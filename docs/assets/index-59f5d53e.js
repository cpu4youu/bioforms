import{s as x,S as D,R as p,_ as f,u as y,a as C,b as I,r as d,j as i,Q as P}from"./index-002d79b3.js";import{u as O}from"./use-transaction-1c225a1e.js";import{s as S}from"./sleep-da79c358.js";import"./toast-options-488e77ba.js";const V=x("div",{position:"relative",d:"grid",gridTemplateAreas:`
    "empty empty header"
    "map map map"
  `,gridTemplateRows:"68px 1fr",gridTemplateColumns:"1fr 1fr 2fr",gap:"10px",br:"15px",w:"100%",h:"100%"}),M=x("div",{gridArea:"header",d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"215px",h:"100%",textTransform:"capitalize",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",justify:"center",gap:"5px",color:"#828282"},img:{h:"26px",objectFit:"contain"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"100%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),k=x("div",{gridArea:"map",d:"flex",align:"flex-end",justify:"flex-end",direction:"column",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)"});async function F(t,n,l){const{executeTransaction:r}=O(),e=H(t,n,l);return!!await r(e)}function H(t,n,l){return{actions:[{account:D.playersAle,name:"travel",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{wallet:t.name,x:n,y:l}}]}}const B=(t,n)=>{const l=String(t),r=String(n);let e="";for(const a of l)a=="0"?e=e+"a":a=="1"?e=e+"b":a=="2"?e=e+"c":a=="3"?e=e+"d":a=="4"?e=e+"e":a=="5"?e=e+"f":a=="6"?e=e+"g":a=="7"?e=e+"h":a=="8"?e=e+"i":a=="9"&&(e=e+"j");e=e+"x";for(const a of r)a=="0"?e=e+"a":a=="1"?e=e+"b":a=="2"?e=e+"c":a=="3"?e=e+"d":a=="4"?e=e+"e":a=="5"?e=e+"f":a=="6"?e=e+"g":a=="7"?e=e+"h":a=="8"?e=e+"i":a=="9"&&(e=e+"j");return e},g=p.lazy(()=>f(()=>import("./index-0ed9ea60.js"),["assets/index-0ed9ea60.js","assets/index-002d79b3.js","assets/index-55fec1ff.css"])),W=p.lazy(()=>f(()=>import("./index-82ba6cf7.js"),["assets/index-82ba6cf7.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/constants-9b21425a.js"])),$=p.lazy(()=>f(()=>import("./index-993f1a5a.js"),["assets/index-993f1a5a.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/constants-9b21425a.js","assets/useQuery-2039e484.js"])),G=p.lazy(()=>f(()=>import("./box-gloves-d2291d6f.js"),["assets/box-gloves-d2291d6f.js","assets/index-002d79b3.js","assets/index-55fec1ff.css"])),N=p.lazy(()=>f(()=>import("./travel-arrow-4b85fecc.js"),["assets/travel-arrow-4b85fecc.js","assets/index-002d79b3.js","assets/index-55fec1ff.css"])),Q=p.lazy(()=>f(()=>import("./index-ab61899a.js").then(t=>t.i),["assets/index-ab61899a.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/fightersSort-5e9a6d34.js","assets/index-5ffe76d0.js","assets/use-transaction-1c225a1e.js","assets/toast-options-488e77ba.js","assets/sleep-da79c358.js","assets/generateRandomWaxName-ee0d1ff2.js"])),X=p.lazy(()=>f(()=>import("./index-df604794.js"),["assets/index-df604794.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/inventory-query-a2dba62a.js","assets/useQuery-2039e484.js","assets/adapters-cca835df.js","assets/atomic-api-89bd3048.js","assets/toast-options-488e77ba.js","assets/use-transaction-1c225a1e.js","assets/sleep-da79c358.js","assets/use-media-f50452b3.js","assets/fighters-query-9923abf4.js"])),Y=p.lazy(()=>f(()=>import("./index-23e6b1b5.js").then(t=>t.i),["assets/index-23e6b1b5.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/index-5ffe76d0.js","assets/index-808b7a8a.js","assets/useQuery-2039e484.js","assets/classtemps-query-b2910289.js","assets/use-media-f50452b3.js","assets/sleep-da79c358.js","assets/use-transaction-1c225a1e.js","assets/toast-options-488e77ba.js","assets/generateRandomWaxName-ee0d1ff2.js"])),U=()=>{var v;const t=y(C(s=>s.user)),{areaSelected:n,allAreas:l,moveCost:r,selectedMap:e,selectedCoordinates:a,setSelectedCoordinates:h,setAreaSelected:_,setMoveCost:T,setSelectedMap:j}=I(),{updatePlayerData:A,updateLandsData:E}=y(),R=d.useRef(null),[u,m]=d.useState(!1);async function b(){const s={x:t.x,y:t.y,type:(o==null?void 0:o.type)||"",landId:B(t.x,t.y)};if(s.type==="tavern"){const c=(t==null?void 0:t.active_taverns.find(({x:w,y:z})=>w===s.x&&z===s.y))||((t==null?void 0:t.last_tavern.x)===s.x&&(t==null?void 0:t.last_tavern.y)===s.y?t==null?void 0:t.last_tavern:{});_({...s,...c});return}_({...s,...n})}async function L(){try{if(m(!0),!t||!a||!await F(t,(a==null?void 0:a.x)+1||0,(a==null?void 0:a.y)+1||0))return;await S(6e3),h(null),T(0);const c=await A();await E(),c!=null&&c.planet&&j({label:c.planet.charAt(0).toUpperCase()+c.planet.slice(1),value:c.planet}),P.success("Travel successful")}catch(s){console.error(s)}finally{m(!1)}}const o=d.useMemo(()=>l[`${t.mapX},${t.mapY}`],[l,t]);return(n==null?void 0:n.type)==="arena"?i.jsx(Q,{}):(n==null?void 0:n.type)==="tavern"?i.jsx(X,{}):(n==null?void 0:n.type)==="dungeon"?i.jsx(Y,{}):i.jsxs(V,{children:[i.jsxs(M,{children:[!!o&&i.jsx(g,{disabled:o.type==="portal"||o.isLocked,color:"black",onClick:b,icon:G,children:`Enter ${o==null?void 0:o.type}`}),i.jsxs(g,{isLoading:u,disabled:e.value!==(t==null?void 0:t.planet)||!a||!r||r>(((v=t==null?void 0:t.activestats)==null?void 0:v.action_points)||0)||u,color:"black",onClick:L,icon:N,children:["Travel",e.value===(t==null?void 0:t.planet)&&i.jsxs("span",{children:["- ",r,i.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]})]})]}),i.jsxs(k,{ref:R,children:[i.jsx(W,{}),i.jsx($,{})]})]})};export{U as default};

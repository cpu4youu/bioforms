import{s as o,d as P,g as b,S as x,e as v,u as m,R as h,_ as y,r as _,j as e}from"./index-70e0b2df.js";import{u as w}from"./useQuery-7d8e5c8d.js";import{t as j}from"./typeToImg-98b92543.js";const T=o("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main side"
  `,gridTemplateRows:"68px 1fr",gridTemplateColumns:"1fr 1fr 500px",gap:"10px",br:"15px",w:"100%",h:"100%",variants:{isPackSelected:{true:{"@xmd":{gridTemplateAreas:`
            "header header header"
            "side side side"
          `}},false:{"@xmd":{gridTemplateAreas:`
              "header header header"
              "main main main"
            `}}}},"@lg":{gridTemplateColumns:"1fr 1fr 2fr"},"@xmd":{gap:"8px"},"@sm":{}}),k=o("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),C=o("div",{gridArea:"main",d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",direction:"column",position:"relative",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",padding:"10px",br:"0 15px 15px 15px",bg:"#141423",backgroundImage:"url(/assets/background/bg-shop.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",variants:{isPackSelected:{true:{"@xmd":{display:"none"}}}}}),F=o("div",{d:"flex",justify:"center",gap:"10px",flexWrap:"wrap",h:"100%",w:"100%",padding:"40px",maxH:"calc(100vh - 175px)",overflowY:"auto"}),A=o("div",{d:"flex",align:"center",padding:"10px",gap:"10px",flexWrap:"wrap",w:"100%",span:{color:"#FFFFFF",ff:"$heading",fs:"16px",fw:"normal"}}),O=o("div",{d:"flex",align:"center",gap:"10px",span:{color:"#FFFFFF",ff:"$heading",fs:"16px",fw:"$bold"}}),E=o("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",position:"absolute",top:"-40px",left:"0px"}),g=o("button",{d:"flex",align:"center",justify:"center",gap:"5px",padding:"10px 15px",color:"#fff",bg:"#141423",fs:"12px",img:{w:"20px",h:"20px",objectFit:"contain"},"&:first-child":{br:"15px 0px 0px 0px"},"&:last-child":{br:"0 15px 0 0"},variants:{isSelected:{true:{bg:"#19192D"}}}}),z=o("div",{w:"100%",h:"45px",bg:"#201D2C",padding:"10px 20px",fontSize:"16px",fontWeight:"bold",ff:"$heading",color:"#C9C9C9","@sm":{h:"initial",fontSize:"14px"}}),R=o("div",{display:"flex",flexDirection:"column",gridArea:"side",padding:"0px 18px",br:"15px",bg:"#141423",overflowY:"auto",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",minW:"500px",variants:{isPackSelected:{false:{"@xmd":{display:"none"}}}},"@lg":{minW:"initial"},"@sm":{mt:"5px"}}),W=o("h4",{d:"flex",alignItems:"center",justifyContent:"center",w:"100%",h:"100%",color:"#FFFFFF",ff:"$heading",fs:"24px",fw:"normal"}),$=P((t,n)=>({selectedPack:null,setSelectedPack:s=>t({selectedPack:s}),selectedPointOffer:null,setSelectedPointOffer:s=>t({selectedPointOffer:s})})),D=async()=>await b({options:{code:x.shopAle,index_position:1,key_type:"i64",limit:"1000",scope:x.shopAle,table:"shopitems"}}),I=async t=>await b({options:{code:x.shopAle,index_position:2,key_type:"i64",limit:"1000",scope:x.shopAle,table:"cdclaim",lower_bound:t,upper_bound:t}}),H=()=>w({queryKey:[v.ShopState],queryFn:()=>G(),staleTime:1e3*60*60,enabled:!!m.getState().user});async function G(){try{const t=await D(),n=await I(),s=m.getState().user;if(!t)return null;const c=n==null?void 0:n.filter(a=>a.wallet===(s==null?void 0:s.wallet));return U(t,c)}catch(t){return console.log(t),null}}function U(t,n){return t.map(s=>{var u;const c=["wax","gem","dust","action_points","legend_acct_seconds"],a=c.find(r=>{if(r==="wax")return Number(s.cost_wax.replace(" WAX",""))>0;const p=s[`cost_${r}`];return Number(p)>0}),d=c.find(r=>{const p=s[`gain_${r}`];return Number(p)>0});let i="";return n&&(i=((u=n.find(r=>r.item===s.item))==null?void 0:u.cooldown_expired)||""),{...s,cost:Number(s.cost_wax.replace(" WAX",""))||s[`cost_${a}`],gain:s[`gain_${d}`],itemCD:i,imageGain:j(d),imageCost:j(a)}})}const N=async t=>await b({options:{code:x.usptsWorlds,index_position:1,key_type:"i64",limit:"100",reverse:!0,scope:x.usptsWorlds,table:"userpoints",lower_bound:t,upper_bound:t}}),q=()=>w({queryKey:[v.UserPointsState],queryFn:()=>M(),staleTime:1e3*60*60,enabled:!!m.getState().user});async function M(){const t=m.getState().user;if(!t)return null;try{const n=await N(t.name);return(n==null?void 0:n[0])||null}catch(n){return console.log(n),null}}const f=h.lazy(()=>y(()=>import("./index-f1ab439e.js"),["assets/index-f1ab439e.js","assets/index-70e0b2df.js","assets/index-55fec1ff.css","assets/index-7ec3138c.js","assets/index-e97083aa.js","assets/useQuery-7d8e5c8d.js","assets/use-transaction-0a64dc19.js","assets/toast-options-37709a4b.js","assets/sleep-da79c358.js","assets/calculateTImeLeft-3fbd33a3.js","assets/v4-4a60fe23.js","assets/typeToImg-98b92543.js"]).then(t=>({default:t.GemList}))),Q=h.lazy(()=>y(()=>import("./index-f1ab439e.js"),["assets/index-f1ab439e.js","assets/index-70e0b2df.js","assets/index-55fec1ff.css","assets/index-7ec3138c.js","assets/index-e97083aa.js","assets/useQuery-7d8e5c8d.js","assets/use-transaction-0a64dc19.js","assets/toast-options-37709a4b.js","assets/sleep-da79c358.js","assets/calculateTImeLeft-3fbd33a3.js","assets/v4-4a60fe23.js","assets/typeToImg-98b92543.js"]).then(t=>({default:t.GemSelection}))),V=h.lazy(()=>y(()=>import("./index-9e4ad178.js"),["assets/index-9e4ad178.js","assets/index-70e0b2df.js","assets/index-55fec1ff.css","assets/useQuery-7d8e5c8d.js","assets/index-7ec3138c.js","assets/index-e97083aa.js","assets/use-transaction-0a64dc19.js","assets/toast-options-37709a4b.js","assets/v4-4a60fe23.js","assets/typeToImg-98b92543.js"]).then(t=>({default:t.PointOffersList}))),Y=h.lazy(()=>y(()=>import("./index-9e4ad178.js"),["assets/index-9e4ad178.js","assets/index-70e0b2df.js","assets/index-55fec1ff.css","assets/useQuery-7d8e5c8d.js","assets/index-7ec3138c.js","assets/index-e97083aa.js","assets/use-transaction-0a64dc19.js","assets/toast-options-37709a4b.js","assets/v4-4a60fe23.js","assets/typeToImg-98b92543.js"]).then(t=>({default:t.PointOffersSelection}))),K=()=>{var S;const{selectedPack:t,selectedPointOffer:n,setSelectedPointOffer:s,setSelectedPack:c}=$(),{data:a}=H(),{data:d}=q(),[i,u]=_.useState("gems");function r(l){u(l),c(null),s(null)}_.useEffect(()=>()=>{c(null),s(null)},[]);const p=!!t||!!n;return console.log(d),e.jsxs(T,{isPackSelected:p,children:[e.jsx(k,{}),e.jsxs(C,{isPackSelected:p,children:[e.jsxs(E,{children:[e.jsxs(g,{isSelected:i==="gems",onClick:()=>r("gems"),children:["Gems",e.jsx("img",{loading:"lazy",src:"/assets/icons/gems.png",alt:""})]}),e.jsxs(g,{isSelected:i==="credits",onClick:()=>r("credits"),children:["Credits",e.jsx("img",{loading:"lazy",src:"/assets/icons/credits.png",alt:""})]}),e.jsxs(g,{isSelected:i==="energy",onClick:()=>r("energy"),children:["Energy",e.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]}),e.jsxs(g,{isSelected:i==="account",onClick:()=>r("account"),children:["Account Upgrade",e.jsx("img",{loading:"lazy",src:"/assets/icons/account.svg",alt:""})]}),e.jsxs(g,{isSelected:i==="outpost",onClick:()=>r("outpost"),children:["Alien Worlds Outpost",e.jsx("img",{loading:"lazy",src:"/assets/icons/outposts.png",alt:""})]})]}),i==="outpost"&&e.jsxs(A,{children:[e.jsx("span",{children:"Available Shards:"}),e.jsxs(O,{children:[e.jsx("img",{loading:"lazy",src:"/assets/icons/aw-shard.svg",alt:""}),e.jsx("span",{children:((S=d==null?void 0:d.redeemable_points)==null?void 0:S.toLocaleString("en-US"))||0})]})]}),e.jsxs(F,{children:[i==="gems"&&e.jsx(f,{list:a==null?void 0:a.filter(l=>l.category==="gems")}),i==="credits"&&e.jsx(f,{list:a==null?void 0:a.filter(l=>l.category==="credits")}),i==="energy"&&e.jsx(f,{list:a==null?void 0:a.filter(l=>l.category==="flasks")}),i==="account"&&e.jsx(f,{list:a==null?void 0:a.filter(l=>l.category==="account")}),i==="outpost"&&e.jsx(V,{})]})]}),e.jsxs(R,{isPackSelected:p,children:[!!t&&e.jsx(Q,{}),!!n&&e.jsx(Y,{}),!t&&!n&&e.jsxs(e.Fragment,{children:[e.jsx(z,{children:"Select a Pack"}),e.jsx(W,{children:"Select a Pack"})]})]})]})},J=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{J as i,$ as u};

import{s as n,S as v,R as l,_ as p,u as w,a as _,r as h,j as e,Q as T}from"./index-071d7aac.js";import{u as S,o as k}from"./activequests-query-e2315192.js";import{s as A}from"./sleep-da79c358.js";import{u as C}from"./use-transaction-2ffed9f0.js";import{c as R}from"./calculateTImeLeft-c445cd36.js";import{v as E}from"./v4-4a60fe23.js";import"./useQuery-2d6d0cd6.js";import"./toast-options-d01d1bd0.js";const Q=n("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main main"
  `,gridTemplateRows:"70px 1fr",gridTemplateColumns:"1fr 1fr .5fr",gap:"10px",br:"15px",w:"100%",h:"100%"}),z=n("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),q=n("div",{gridArea:"main",d:"flex",position:"relative",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",padding:"10px",br:"0 15px 15px 15px",bg:"#141423",backgroundImage:"url(/assets/background/bg-quests.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}),D=n("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",position:"absolute",top:"-40px",left:"0px"}),r=n("button",{d:"flex",align:"center",justify:"center",gap:"5px",padding:"10px 15px",color:"#fff",bg:"#141423",fs:"12px",img:{w:"20px",h:"20px",objectFit:"contain"},"&:first-child":{br:"15px 0px 0px 0px"},"&:last-child":{br:"0 15px 0 0"},variants:{isSelected:{true:{bg:"#19192D"}}}}),L=n("div",{d:"flex",align:"center",justify:"center",w:"100%",gap:"10px",maxH:"calc(100vh - 175px)",overflowY:"auto","@md":{flexDirection:"column",gap:"25px"}});n("span",{color:"#fff",fw:"bold",fs:"28px",ff:"$heading"});async function I(a){const{executeTransaction:s}=C(),i=H(a);return!!await s(i)}function H(a){return{actions:[{account:v.questAle,name:"getquests",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{wallet:a.name}}]}}const P=l.lazy(()=>p(()=>import("./index-acc17fb9.js"),["assets/index-acc17fb9.js","assets/index-071d7aac.js","assets/index-55fec1ff.css","assets/index-e8f7093b.js"])),F=l.lazy(()=>p(()=>import("./index-41ff2eeb.js"),["assets/index-41ff2eeb.js","assets/index-071d7aac.js","assets/index-55fec1ff.css","assets/index-acc17fb9.js","assets/index-e8f7093b.js","assets/use-transaction-2ffed9f0.js","assets/toast-options-d01d1bd0.js","assets/sleep-da79c358.js","assets/activequests-query-e2315192.js","assets/useQuery-2d6d0cd6.js","assets/calculateTImeLeft-c445cd36.js"])),c=l.lazy(()=>p(()=>import("./index-8aad7e0f.js"),["assets/index-8aad7e0f.js","assets/index-071d7aac.js","assets/index-55fec1ff.css"])),J=()=>{var f,m,g;const a=w(_(t=>t.user)),{data:s}=S(),[i,d]=h.useState("day"),[x,u]=h.useState(!1);function o(t){d(t)}async function b(){u(!0);try{if(!await I(a)){console.log("Failed to get new quests");return}await A(3e3),await k(),T.success("New quests generated successfully!")}catch(t){console.log(t)}finally{u(!1)}}const y=(f=s==null?void 0:s.quests)==null?void 0:f.some(t=>{const j=new Date(t.expiry_date);return!!R(j)});return e.jsxs(Q,{children:[e.jsx(z,{children:(!s||y)&&e.jsx(P,{isLoading:x,disabled:x,onClick:b,children:"New Quests"})}),e.jsxs(q,{children:[e.jsxs(D,{children:[e.jsxs(r,{isSelected:i==="day",onClick:()=>o("day"),children:["Daily",e.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]}),e.jsxs(r,{isSelected:i==="week",onClick:()=>o("week"),children:["Weekly",e.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]}),e.jsxs(r,{isSelected:i==="month",onClick:()=>o("month"),children:["Monthly",e.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]})]}),e.jsx(L,{children:s?(g=(m=s==null?void 0:s.quests)==null?void 0:m.filter(t=>t.quest_scope===i))==null?void 0:g.map(t=>e.jsx(F,{...t},E())):e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{})]})})]})]})};export{J as default};

import{s as n,f as L,r as y,R as $,_ as B,u as E,a as D,j as t}from"./index-2bb4cf2e.js";import{u as R}from"./fighters-query-27cbbe13.js";import{u as O}from"./index-1ed0e1fd.js";import N from"./index-82b65957.js";import{u as Q}from"./use-media-4e7a049f.js";import{u as U}from"./inventory-query-919af562.js";import{u as H}from"./index-2b01788d.js";import{m as V}from"./markers-21ad5773.js";import{v as Y}from"./v4-4a60fe23.js";import"./useQuery-71cb0283.js";import"./atomic-api-7160c6f0.js";import"./toast-options-8783363e.js";import"./index-1fed2822.js";import"./sleep-da79c358.js";import"./use-transaction-842dae15.js";const q=n("div",{display:"flex",direction:"column",w:"100%"}),G=n("div",{display:"flex",direction:"column",gap:"10px"}),J=n("div",{display:"flex",justify:"start",gap:"15px","@xlg":{justify:"center"},"@xsm":{gap:"5px"}}),K=n("h4",{display:"flex",textTransform:"uppercase",color:"#fff",ff:"$heading","@xlg":{justify:"center"}}),X=n("div",{gridArea:"content",ml:"20px",mt:"20px",img:{"&:hover":{transform:"scale(1.05)",zIndex:"4","-webkit-filter":"drop-shadow(0px 0px 8px #00BAFF)",filter:"drop-shadow(0px 0px 5px #00BAFF)"},"&:nth-of-type(1)":{transform:"translate(5px,20px) rotate(-20deg)",zIndex:"3","&:hover":{transform:"scale(1.05) translate(5px,20px) rotate(-20deg)",zIndex:"4"}},"&:nth-of-type(2)":{transform:"translate(-5px,20px) rotate(20deg)",zIndex:"1","&:hover":{transform:"scale(1.05) translate(-5px,20px) rotate(20deg)",zIndex:"4"}}},variants:{cardSelected:{0:{img:{"&:nth-of-type(1)":{zIndex:"3"},"&:nth-of-type(2)":{opacity:"0.2"}}},1:{img:{"&:nth-of-type(1)":{opacity:"0.2"},"&:nth-of-type(2)":{}}}}},"@xlg":{display:"flex",justify:"center"},"@sm":{mb:"30px"}}),C=n("img",{cursor:"pointer",transition:"all 0.2s ease-in-out",w:"75px",h:"100px",zIndex:"2",variants:{isSelected:{true:{filter:"grayscale(100%)"}}},"@sm":{w:"65px",h:"90px"}}),Z=n("div",{gridArea:"inventory",display:"flex",direction:"column",w:"100%",mt:"50px",span:{ff:"$heading",fs:"16px",fw:"bold",color:"#fff",textAlign:"center"},"@sm":{mt:"20px"}});n("div",{d:"flex",align:"center",gap:"20px",mb:"20px","@sm":{m:"0px 0 20px",gap:"10px",flexWrap:"wrap",span:{my:"10px"}}});n("button",{d:"flex",align:"center",justify:"center",fs:"12px",ff:"$heading",fw:"$bold",color:"$white500",variants:{isSelected:{true:{textUnderlineOffset:"0.5em",textDecoration:"underline"}}},"@sm":{fs:"14px"}});const ee=n("div",{d:"flex",flexWrap:"wrap",gap:"10px",overflow:"auto",w:"100%",maxH:"calc(100vh - 590px)"}),te=L({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),se=n("div",{w:"75px",h:"100px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${te} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}}),ne=n("div",{display:"flex",direction:"column",mt:"40px"}),re=n("span",{ff:"$heading",fs:"16px",fw:"bold",color:"#00BAFF",mb:"20px","@xlg":{textAlign:"center"}}),oe=n("div",{display:"flex"}),ie=n("div",{display:"flex",direction:"column",gap:"10px"}),ae=n("div",{display:"flex",justify:"space-between",alignItems:"center",h3:{ff:"$heading",fs:"16px",fw:"bold",color:"#00BAFF"}}),le=n("div",{display:"flex",gap:"5px"}),de=n("button",{zIndex:"2",w:"17px",h:"17px",img:{w:"17px",h:"17px",objectFit:"cover",objectPosition:"center","-webkit-filter":"drop-shadow(0px 0px 4px #000)",filter:"drop-shadow(0px 0px 4px #000)"},variants:{isSelected:{true:{img:{zIndex:"4","-webkit-filter":"drop-shadow(0px 0px 4px #00BAFF)",filter:"drop-shadow(0px 0px 4px #00BAFF)"}}}}}),pe=n("div",{display:"flex",gap:"5px",mb:"20px",button:{w:"unset",h:"unset",borderWidth:"1px",minW:"unset",padding:"2px 5px",fs:"10px",br:"6px",textTransform:"capitalize"},"@sm":{width:"100%",flexWrap:"wrap"}}),ce=n("div",{display:"flex"}),xe=n("div",{display:"flex",flexWrap:"wrap",gap:"10px"}),fe=["gem","nature","metal","neutral","fire","air"];function ue(){const{selectedCards:p,setSelectedCards:m,myTeam:h,setMyTeam:v}=H(),[o,j]=y.useState([]),[f,g]=y.useState("fighter"),[w,x]=y.useState(0),[k,F]=y.useState("level.worlds"),[u,l]=y.useState(-1),{data:A,isLoading:b}=U(k);function S(s){if(l(-1),g("fighter"),s===w){x(-1);return}x(s)}function T(s){if(x(-1),g("nft"),s===u){l(-1);return}l(s),F(s===0?"crew.worlds":s===1?"arms.worlds":"crew.worlds")}function z(s){if(!s){const a=p.map((e,r)=>{if(r!==u)return e}),d=u+1;if(l(d),m(a),F(d===0?"crew.worlds":d===1?"arms.worlds":"crew.worlds"),d>1){l(-1);return}return}if(p.some(a=>(a==null?void 0:a.asset_id)===(s==null?void 0:s.asset_id))){l(-1);return}const i=p.map((a,d)=>d===u?s:a),c=u+1;if(l(c),m(i),F(c===0?"crew.worlds":c===1?"arms.worlds":"crew.worlds"),c>1){l(-1);return}}function I(s){if(o.includes(s)){j(o.filter(i=>i!==s));return}j([...o,s])}function _(s){const i=h.map((a,d)=>d===w?s:a);v(i);const c=w+1;if(c===5){x(-1);return}x(c)}function P(s){return p.some(i=>(i==null?void 0:i.asset_id)!==s.asset_id)}return{selectedCards:p,inventoryPosition:u,filterSelected:o,myTeam:h,fighterPosition:w,itemSelected:f,inventory:A,isInventoryLoading:b,handleFighterPosition:S,handleInventoryPosition:T,handleSelectCard:z,handleSelectFilter:I,handleAddFighter:_,filterInventoryCards:P}}const W=$.lazy(()=>B(()=>import("./index-bcff2b16.js"),["assets/index-bcff2b16.js","assets/index-2bb4cf2e.js","assets/index-55fec1ff.css","assets/iconBase-4145cf12.js"])),me=()=>{var I,_,P,s,i,c,a,d;const{setSelectedFighter:p}=O(),{isSuperLarge:m}=Q(),h=E(D(e=>e.user)),{data:v}=R(h==null?void 0:h.name),{selectedCards:o,inventoryPosition:j,filterSelected:f,myTeam:g,fighterPosition:w,inventory:x,isInventoryLoading:k,itemSelected:F,handleAddFighter:u,handleInventoryPosition:l,handleFighterPosition:A,handleSelectCard:b,handleSelectFilter:S,filterInventoryCards:T}=ue(),z=y.useMemo(()=>g.map(e=>({id:Y(),...e})),[g]);return t.jsxs(q,{children:[t.jsxs(G,{children:[t.jsx(K,{children:"YOUR TEAM"}),t.jsx(J,{children:z.map((e,r)=>t.jsx(W,{onMouseEnter:()=>m&&e?null:p(e),onMouseLeave:()=>m?null:p(null),onMouseDown:()=>A(r),isSelected:w===r,fighter:e},e==null?void 0:e.id))})]}),t.jsxs(X,{cardSelected:j,children:[t.jsx(C,{onClick:()=>l(0),loading:"lazy",src:o[0]?`/assets/aw-nft-images/${(I=o[0])==null?void 0:I.template.template_id}.webp`:"/assets/default-card.png",alt:(P=(_=o[0])==null?void 0:_.data)==null?void 0:P.name}),t.jsx(C,{onClick:()=>l(1),loading:"lazy",src:o[1]?`/assets/aw-nft-images/${(s=o[1])==null?void 0:s.template.template_id}.webp`:"/assets/default-card.png",alt:(c=(i=o[1])==null?void 0:i.data)==null?void 0:c.name})]}),F==="fighter"?t.jsxs(ne,{children:[t.jsx(re,{children:"Select your Team"}),t.jsxs(oe,{children:[t.jsxs(ie,{children:[t.jsxs(ae,{children:[t.jsx("h3",{children:"Filter"}),t.jsx(le,{children:V.map(e=>t.jsx(de,{isSelected:f.includes(e),onClick:()=>S(e),children:t.jsx("img",{src:`/assets/markers/${e}.png`,alt:e})},e))})]}),t.jsx(pe,{children:fe.map(e=>t.jsx(N,{color:f.includes(e)?"blue":"black",onClick:()=>S(e),children:e},e))})]}),t.jsx(ce,{})]}),t.jsx(xe,{children:(a=v==null?void 0:v.filter(e=>f!=null&&f.length?f.some(r=>e.element===r||e.marker===r):!0))==null?void 0:a.map(e=>t.jsx(W,{disabled:g.some(r=>e.fighter_id===(r==null?void 0:r.fighter_id)),onMouseEnter:()=>m?null:p(e),onMouseLeave:()=>m?null:p(null),onClick:()=>u(e),fighter:e},e==null?void 0:e.fighter_id))})]}):t.jsx(Z,{children:o.length!==0&&j===-1?t.jsx("span",{children:"Select a card"}):t.jsx(ee,{children:k?new Array(12).fill(0).map((e,r)=>t.jsx(se,{},r)):t.jsxs(t.Fragment,{children:[t.jsx(C,{onClick:()=>b(void 0),src:"/assets/default-card.png",alt:"default card"}),(d=x==null?void 0:x.filter(T))==null?void 0:d.map(e=>{var r;return t.jsx(C,{isSelected:o.some(M=>(M==null?void 0:M.asset_id)===(e==null?void 0:e.asset_id)),onClick:()=>b(e),loading:"lazy",src:`/assets/aw-nft-images/${e==null?void 0:e.template.template_id}.webp`,alt:(r=e==null?void 0:e.data)==null?void 0:r.name},e==null?void 0:e.asset_id)})]})})})]})},Te=$.memo(me);export{Te as default};

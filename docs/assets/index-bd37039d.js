import{e as Q,s as r,S as W,d as H,u as v,R as Y,_ as K,r as u,j as n,Q as O}from"./index-8b01bd0a.js";import{a as U,u as V}from"./inventory-query-01926acb.js";import{s as G}from"./sleep-da79c358.js";import{u as J}from"./use-transaction-d8858974.js";import{u as X}from"./useQuery-e36ba289.js";import Z from"./index-5a904e91.js";import"./atomic-api-042bed03.js";import"./toast-options-cef04bb1.js";import"./index-5068bd70.js";const q=Q({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),N=r("div",{d:"grid",gridTemplateAreas:`
    "empty header"
    "main main"
  `,gridTemplateColumns:"3fr 1fr",gap:"10px",br:"15px",w:"100%",h:"100%"}),ee=r("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}}}),ne=r("div",{gridArea:"main",d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-center",justifyContent:"flex-center",w:"100%",gap:"10px",minH:"calc(100vh - 175px)",overflowY:"auto",padding:"10px",br:"15px",bg:"#141423","@md":{h:"calc(100vh - 175px)",direction:"column"}}),te=r("div",{d:"flex",direction:"column",w:"100%",maxW:"820px",padding:"24px 30px",h:"calc(100vh - 235px)","@md":{h:"unset"}}),k=r("div",{d:"flex",direction:"column",gap:"10px",w:"100%"}),ae=r("div",{d:"flex",gap:"10px",mt:"20px",w:"100%",img:{width:25,height:25}}),F=r("span",{d:"flex",direction:"column",w:"100%",color:"#fff",fs:"16px",ff:"$heading"}),R=r("span",{d:"flex",direction:"column",w:"100%",padding:"10px 10px 20px 10px",bg:"#201D2C",color:"#fff",fs:"16px",ff:"$heading"}),se=r("div",{d:"flex",w:"100%",m:"17px 0 60px"}),ie=r("div",{display:"flex",justify:"center",gap:"10px",img:{"&:hover":{transform:"scale(1.05)",zIndex:"4","-webkit-filter":"drop-shadow(0px 0px 8px #00BAFF)",filter:"drop-shadow(0px 0px 5px #00BAFF)"}},variants:{cardSelected:{0:{img:{"&:nth-of-type(2)":{opacity:"0.2"},"&:nth-of-type(3)":{opacity:"0.2"}}},1:{img:{"&:nth-of-type(1)":{opacity:"0.2"},"&:nth-of-type(3)":{opacity:"0.2"}}},2:{img:{"&:nth-of-type(1)":{opacity:"0.2"},"&:nth-of-type(2)":{opacity:"0.2"}}}}}}),g=r("img",{cursor:"pointer",transition:"all 0.2s ease-in-out",w:"85px",h:"116px",zIndex:"2",variants:{isSelected:{true:{filter:"grayscale(100%)"}}},"@sm":{w:"65px",h:"90px"}}),re=r("div",{d:"flex",gap:"10px",alignContent:"flex-start",flexWrap:"wrap",overflow:"auto",w:"100%",h:"calc(100vh - 235px)","@md":{h:"unset"}}),E=r("div",{w:"85px",h:"116px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${q} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}});async function oe({mine_nfts:o,user:i}){const{executeTransaction:d}=J(),a=le({user:i,mine_nfts:o});return!!await d(a)}function le({mine_nfts:o,user:i}){return{actions:[{account:W.playersAle,name:"setminenfts",authorization:[{actor:i.name,permission:i.authorization.permission}],data:{wallet:i.name,mine_nfts:o}}]}}const de=o=>X({queryKey:[H.AssetsIdState,o],queryFn:()=>ce(o),staleTime:1e3*60*60,enabled:!!v.getState().user});async function ce(o){const{user:i}=v.getState();try{const{getAssets:d}=U,a={owner:i==null?void 0:i.name,limit:1e3,ids:o.join(",")},p=[];let x=0;do{x++;const m=await d({...a,page:x});p.push(...m)}while(x*1e3===p.length);return p}catch(d){return console.log(d),null}}const pe=Y.lazy(()=>K(()=>import("./index-acbe3f0e.js"),["assets/index-acbe3f0e.js","assets/index-8b01bd0a.js","assets/index-55fec1ff.css"])),je=()=>{var S,C,_,b,T,A,I,z,L;const o=v(({user:e})=>e),{data:i,isLoading:d}=V("tool.worlds",!0),{data:a,isLoading:p}=de(o.mine_nfts),[x,m]=u.useState(!1),[c,f]=u.useState(0),[M,P]=u.useState([0]),[s,h]=u.useState([void 0,void 0,void 0]);async function $(){try{m(!0);const e=s.filter(t=>!!t).map(t=>+t.asset_id);if(!await oe({user:o,mine_nfts:e}))return;await G(2e3),O.success("Mine nft equipped !")}catch(e){console.error(e)}finally{m(!1)}}function j(e){if(!e){const t=s.map((y,D)=>{if(D!==c)return y});f(c+1),h(t);return}if(s.some(t=>(t==null?void 0:t.asset_id)===(e==null?void 0:e.asset_id))){f(-1);return}const l=s.map((t,y)=>y===c?e:t);f(c+1),h(l),c===2&&f(-1)}function w(e){if(e===c){f(-1);return}f(e)}function B(e){P(e)}return u.useEffect(()=>{h([(a==null?void 0:a[0])??void 0,(a==null?void 0:a[1])??void 0,(a==null?void 0:a[2])??void 0])},[a]),n.jsxs(N,{children:[n.jsx(ee,{children:n.jsx(pe,{isLoading:x,disabled:x,onClick:$,children:"Save Settings"})}),n.jsxs(ne,{children:[n.jsxs(te,{children:[n.jsxs(k,{children:[n.jsx(F,{children:"Mining Tools"}),n.jsx(R,{children:"These tools are used by trainers to mine for instant rewards when playing Taverns, Dungeons or Arenas."})]}),n.jsx(se,{children:n.jsx(ie,{cardSelected:c,children:p?new Array(3).fill(0).map((e,l)=>n.jsx(E,{},l)):n.jsxs(n.Fragment,{children:[n.jsx(g,{onClick:()=>w(0),loading:"lazy",src:s[0]?`/assets/aw-nft-images/${(S=s[0])==null?void 0:S.template.template_id}.webp`:"/assets/default-card.png",alt:(_=(C=s[0])==null?void 0:C.data)==null?void 0:_.name}),n.jsx(g,{onClick:()=>w(1),loading:"lazy",src:s[1]?`/assets/aw-nft-images/${(b=s[1])==null?void 0:b.template.template_id}.webp`:"/assets/default-card.png",alt:(A=(T=s[1])==null?void 0:T.data)==null?void 0:A.name}),n.jsx(g,{onClick:()=>w(2),loading:"lazy",src:s[1]?`/assets/aw-nft-images/${(I=s[1])==null?void 0:I.template.template_id}.webp`:"/assets/default-card.png",alt:(L=(z=s[1])==null?void 0:z.data)==null?void 0:L.name})]})})}),n.jsxs(k,{children:[n.jsx(F,{children:"Landowner Rewards"}),n.jsx(R,{children:"Whenever a player performs a mine on a landowners land, the landowner also gets rewards. Use the slider to select the percentage of TLM / Shard rewards."})]}),n.jsxs(ae,{children:[n.jsx("img",{loading:"lazy",src:"/assets/icons/tlm.png",alt:""}),n.jsx(Z,{onValueChange:B,value:M}),n.jsx("img",{loading:"lazy",src:"/assets/icons/credit.png",alt:""})]})]}),n.jsx(re,{children:d?new Array(30).fill(0).map((e,l)=>n.jsx(E,{},l)):n.jsxs(n.Fragment,{children:[n.jsx(g,{onClick:()=>j(void 0),src:"/assets/default-card.png",alt:"default card"}),i==null?void 0:i.map(e=>{var l;return n.jsx(g,{isSelected:s.some(t=>(t==null?void 0:t.asset_id)===(e==null?void 0:e.asset_id)),onClick:()=>j(e),loading:"lazy",src:`/assets/aw-nft-images/${e==null?void 0:e.template.template_id}.webp`,alt:(l=e==null?void 0:e.data)==null?void 0:l.name},e==null?void 0:e.asset_id)})]})})]})]})};export{je as default};

import{R as D,r as _,s as E,S as Ji,c as Ii,Q as ie,u as xi,g as ee,_ as q,j as c,a as ne}from"./index-b68297c9.js";import{u as re}from"./use-transaction-4bf0bff5.js";import{s as te}from"./sleep-da79c358.js";import{u as ae}from"./useQuery-3ccebb81.js";import{g as yi,a as oe,l as se,f as le}from"./constants-06470205.js";var B=function(i,r){return Number(i.toFixed(r))},ue=function(i,r){return typeof i=="number"?i:r},X=function(i,r,e){e&&typeof e=="function"&&e(i,r)},de=function(i){return-Math.cos(i*Math.PI)/2+.5},pe=function(i){return i},fe=function(i){return i*i},ve=function(i){return i*(2-i)},me=function(i){return i<.5?2*i*i:-1+(4-2*i)*i},ce=function(i){return i*i*i},he=function(i){return--i*i*i+1},ge=function(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},Se=function(i){return i*i*i*i},we=function(i){return 1- --i*i*i*i},ye=function(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},be=function(i){return i*i*i*i*i},Pe=function(i){return 1+--i*i*i*i*i},Ce=function(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i},Di={easeOut:de,linear:pe,easeInQuad:fe,easeOutQuad:ve,easeInOutQuad:me,easeInCubic:ce,easeOutCubic:he,easeInOutCubic:ge,easeInQuart:Se,easeOutQuart:we,easeInOutQuart:ye,easeInQuint:be,easeOutQuint:Pe,easeInOutQuint:Ce},Wi=function(i){typeof i=="number"&&cancelAnimationFrame(i)},Z=function(i){i.mounted&&(Wi(i.animation),i.animate=!1,i.animation=null,i.velocity=null)};function Oi(i,r,e,n){if(i.mounted){var t=new Date().getTime(),a=1;Z(i),i.animation=function(){if(!i.mounted)return Wi(i.animation);var o=new Date().getTime()-t,s=o/e,u=Di[r],d=u(s);o>=e?(n(a),i.animation=null):i.animation&&(n(d),requestAnimationFrame(i.animation))},requestAnimationFrame(i.animation)}}function Te(i){var r=i.scale,e=i.positionX,n=i.positionY;return!(Number.isNaN(r)||Number.isNaN(e)||Number.isNaN(n))}function Q(i,r,e,n){var t=Te(r);if(!(!i.mounted||!t)){var a=i.setTransformState,o=i.transformState,s=o.scale,u=o.positionX,d=o.positionY,l=r.scale-s,p=r.positionX-u,f=r.positionY-d;e===0?a(r.scale,r.positionX,r.positionY):Oi(i,n,e,function(v){var h=s+l*v,g=u+p*v,P=d+f*v;a(h,g,P)})}}function Ye(i,r,e){var n=i.offsetWidth,t=i.offsetHeight,a=r.offsetWidth,o=r.offsetHeight,s=a*e,u=o*e,d=n-s,l=t-u;return{wrapperWidth:n,wrapperHeight:t,newContentWidth:s,newDiffWidth:d,newContentHeight:u,newDiffHeight:l}}var Xe=function(i,r,e,n,t,a,o){var s=i>r?e*(o?1:.5):0,u=n>t?a*(o?1:.5):0,d=i-r-s,l=s,p=n-t-u,f=u;return{minPositionX:d,maxPositionX:l,minPositionY:p,maxPositionY:f}},vi=function(i,r){var e=i.wrapperComponent,n=i.contentComponent,t=i.setup.centerZoomedOut;if(!e||!n)throw new Error("Components are not mounted");var a=Ye(e,n,r),o=a.wrapperWidth,s=a.wrapperHeight,u=a.newContentWidth,d=a.newDiffWidth,l=a.newContentHeight,p=a.newDiffHeight,f=Xe(o,u,d,s,l,p,!!t);return f},ui=function(i,r,e,n){return n?i<r?B(r,2):i>e?B(e,2):B(i,2):B(i,2)},J=function(i,r){var e=vi(i,r);return i.bounds=e,e};function ei(i,r,e,n,t,a,o){var s=e.minPositionX,u=e.minPositionY,d=e.maxPositionX,l=e.maxPositionY,p=0,f=0;o&&(p=t,f=a);var v=ui(i,s-p,d+p,n),h=ui(r,u-f,l+f,n);return{x:v,y:h}}function ai(i,r,e,n,t,a){var o=i.transformState,s=o.scale,u=o.positionX,d=o.positionY,l=n-s;if(typeof r!="number"||typeof e!="number")return console.error("Mouse X and Y position were not provided!"),{x:u,y:d};var p=u-r*l,f=d-e*l,v=ei(p,f,t,a,0,0,null);return v}function ni(i,r,e,n,t){var a=t?n:0,o=r-a;return!Number.isNaN(e)&&i>=e?e:!Number.isNaN(r)&&i<=o?o:i}var bi=function(i,r){var e=i.setup.panning.excluded,n=i.isInitialized,t=i.wrapperComponent,a=r.target,o="shadowRoot"in a&&"composedPath"in r,s=o?r.composedPath().some(function(l){return l instanceof Element?t==null?void 0:t.contains(l):!1}):t==null?void 0:t.contains(a),u=n&&a&&s;if(!u)return!1;var d=oi(a,e);return!d},Pi=function(i){var r=i.isInitialized,e=i.isPanning,n=i.setup,t=n.panning.disabled,a=r&&e&&!t;return!!a},_e=function(i,r){var e=i.transformState,n=e.positionX,t=e.positionY;i.isPanning=!0;var a=r.clientX,o=r.clientY;i.startCoords={x:a-n,y:o-t}},Ae=function(i,r){var e=r.touches,n=i.transformState,t=n.positionX,a=n.positionY;i.isPanning=!0;var o=e.length===1;if(o){var s=e[0].clientX,u=e[0].clientY;i.startCoords={x:s-t,y:u-a}}};function ze(i){var r=i.transformState,e=r.positionX,n=r.positionY,t=r.scale,a=i.setup,o=a.disabled,s=a.limitToBounds,u=a.centerZoomedOut,d=i.wrapperComponent;if(!(o||!d||!i.bounds)){var l=i.bounds,p=l.maxPositionX,f=l.minPositionX,v=l.maxPositionY,h=l.minPositionY,g=e>p||e<f,P=n>v||n<h,A=e>p?d.offsetWidth:i.setup.minPositionX||0,y=n>v?d.offsetHeight:i.setup.minPositionY||0,Y=ai(i,A,y,t,i.bounds,s||u),W=Y.x,x=Y.y;return{scale:t,positionX:g?W:e,positionY:P?x:n}}}function ji(i,r,e,n,t){var a=i.setup.limitToBounds,o=i.wrapperComponent,s=i.bounds,u=i.transformState,d=u.scale,l=u.positionX,p=u.positionY;if(!(o===null||s===null||r===l&&e===p)){var f=ei(r,e,s,a,n,t,o),v=f.x,h=f.y;i.setTransformState(d,v,h)}}var Ee=function(i,r,e){var n=i.startCoords,t=i.transformState,a=i.setup.panning,o=a.lockAxisX,s=a.lockAxisY,u=t.positionX,d=t.positionY;if(!n)return{x:u,y:d};var l=r-n.x,p=e-n.y,f=o?u:l,v=s?d:p;return{x:f,y:v}},K=function(i,r){var e=i.setup,n=i.transformState,t=n.scale,a=e.minScale,o=e.disablePadding;return r>0&&t>=a&&!o?r:0},xe=function(i){var r=i.mounted,e=i.setup,n=e.disabled,t=e.velocityAnimation,a=i.transformState.scale,o=t.disabled,s=!o||a>1||!n||r;return!!s},De=function(i){var r=i.mounted,e=i.velocity,n=i.bounds,t=i.setup,a=t.disabled,o=t.velocityAnimation,s=i.transformState.scale,u=o.disabled,d=!u||s>1||!a||r;return!(!d||!e||!n)};function We(i,r){var e=i.setup.velocityAnimation,n=e.equalToMove,t=e.animationTime,a=e.sensitivity;return n?t*r*a:t}function Ci(i,r,e,n,t,a,o,s,u,d){if(t){if(r>o&&e>o){var l=o+(i-o)*d;return l>u?u:l<o?o:l}if(r<a&&e<a){var l=a+(i-a)*d;return l<s?s:l>a?a:l}}return n?r:ui(i,a,o,t)}function Oe(i,r){var e=1;return r?Math.min(e,i.offsetWidth/window.innerWidth):e}function je(i,r){var e=xe(i);if(e){var n=i.lastMousePosition,t=i.velocityTime,a=i.setup,o=i.wrapperComponent,s=a.velocityAnimation.equalToMove,u=Date.now();if(n&&t&&o){var d=Oe(o,s),l=r.x-n.x,p=r.y-n.y,f=l/d,v=p/d,h=u-t,g=l*l+p*p,P=Math.sqrt(g)/h;i.velocity={velocityX:f,velocityY:v,total:P}}i.lastMousePosition=r,i.velocityTime=u}}function Be(i){var r=i.velocity,e=i.bounds,n=i.setup,t=i.wrapperComponent,a=De(i);if(!(!a||!r||!e||!t)){var o=r.velocityX,s=r.velocityY,u=r.total,d=e.maxPositionX,l=e.minPositionX,p=e.maxPositionY,f=e.minPositionY,v=n.limitToBounds,h=n.alignmentAnimation,g=n.zoomAnimation,P=n.panning,A=P.lockAxisY,y=P.lockAxisX,Y=g.animationType,W=h.sizeX,x=h.sizeY,k=h.velocityAlignmentTime,O=k,j=We(i,u),N=Math.max(j,O),M=K(i,W),H=K(i,x),F=M*t.offsetWidth/100,U=H*t.offsetHeight/100,G=d+F,m=l-F,w=p+U,T=f-U,S=i.transformState,b=new Date().getTime();Oi(i,Y,N,function($){var L=i.transformState,z=L.scale,V=L.positionX,I=L.positionY,Qi=new Date().getTime()-b,$i=Qi/O,qi=Di[h.animationType],hi=1-qi(Math.min(1,$i)),gi=1-$,Si=V+o*gi,wi=I+s*gi,Ui=Ci(Si,S.positionX,V,y,v,l,d,m,G,hi),Gi=Ci(wi,S.positionY,I,A,v,f,p,T,w,hi);(V!==Si||I!==wi)&&i.setTransformState(z,Ui,Gi)})}}function Ti(i,r){var e=i.transformState.scale;Z(i),J(i,e),window.TouchEvent!==void 0&&r instanceof TouchEvent?Ae(i,r):_e(i,r)}function Bi(i){var r=i.transformState.scale,e=i.setup,n=e.minScale,t=e.alignmentAnimation,a=t.disabled,o=t.sizeX,s=t.sizeY,u=t.animationTime,d=t.animationType,l=a||r<n||!o&&!s;if(!l){var p=ze(i);p&&Q(i,p,u,d)}}function Yi(i,r,e){var n=i.startCoords,t=i.setup,a=t.alignmentAnimation,o=a.sizeX,s=a.sizeY;if(n){var u=Ee(i,r,e),d=u.x,l=u.y,p=K(i,o),f=K(i,s);je(i,{x:d,y:l}),ji(i,d,l,p,f)}}function ke(i){if(i.isPanning){var r=i.setup.panning.velocityDisabled,e=i.velocity,n=i.wrapperComponent,t=i.contentComponent;i.isPanning=!1,i.animate=!1,i.animation=null;var a=n==null?void 0:n.getBoundingClientRect(),o=t==null?void 0:t.getBoundingClientRect(),s=(a==null?void 0:a.width)||0,u=(a==null?void 0:a.height)||0,d=(o==null?void 0:o.width)||0,l=(o==null?void 0:o.height)||0,p=s<d||u<l,f=!r&&e&&(e==null?void 0:e.total)>.1&&p;f?Be(i):Bi(i)}}function mi(i,r,e,n){var t=i.setup,a=t.minScale,o=t.maxScale,s=t.limitToBounds,u=ni(B(r,2),a,o,0,!1),d=J(i,u),l=ai(i,e,n,u,d,s),p=l.x,f=l.y;return{scale:u,positionX:p,positionY:f}}function ki(i,r,e){var n=i.transformState.scale,t=i.wrapperComponent,a=i.setup,o=a.minScale,s=a.limitToBounds,u=a.zoomAnimation,d=u.disabled,l=u.animationTime,p=u.animationType,f=d||n>=o;if((n>=1||s)&&Bi(i),!(f||!t||!i.mounted)){var v=r||t.offsetWidth/2,h=e||t.offsetHeight/2,g=mi(i,o,v,h);g&&Q(i,g,l,p)}}var R=function(){return R=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},R.apply(this,arguments)};function Xi(i,r,e){if(e||arguments.length===2)for(var n=0,t=r.length,a;n<t;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return i.concat(a||Array.prototype.slice.call(r))}var ri={previousScale:1,scale:1,positionX:0,positionY:0},ii={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},di={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Ni=function(i){var r,e,n,t;return{previousScale:(r=i.initialScale)!==null&&r!==void 0?r:ri.scale,scale:(e=i.initialScale)!==null&&e!==void 0?e:ri.scale,positionX:(n=i.initialPositionX)!==null&&n!==void 0?n:ri.positionX,positionY:(t=i.initialPositionY)!==null&&t!==void 0?t:ri.positionY}},_i=function(i){var r=R({},ii);return Object.keys(i).forEach(function(e){var n=typeof i[e]<"u",t=typeof ii[e]<"u";if(t&&n){var a=Object.prototype.toString.call(ii[e]),o=a==="[object Object]",s=a==="[object Array]";o?r[e]=R(R({},ii[e]),i[e]):s?r[e]=Xi(Xi([],ii[e],!0),i[e],!0):r[e]=i[e]}}),r},Mi=function(i,r,e){var n=i.transformState.scale,t=i.wrapperComponent,a=i.setup,o=a.maxScale,s=a.minScale,u=a.zoomAnimation,d=a.smooth,l=u.size;if(!t)throw new Error("Wrapper is not mounted");var p=d?n*Math.exp(r*e):n+r*e,f=ni(B(p,3),s,o,l,!1);return f};function Li(i,r,e,n,t){var a=i.wrapperComponent,o=i.transformState,s=o.scale,u=o.positionX,d=o.positionY;if(!a)return console.error("No WrapperComponent found");var l=a.offsetWidth,p=a.offsetHeight,f=(l/2-u)/s,v=(p/2-d)/s,h=Mi(i,r,e),g=mi(i,h,f,v);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Q(i,g,n,t)}function Zi(i,r,e,n){var t=i.setup,a=i.wrapperComponent,o=t.limitToBounds,s=Ni(i.props),u=i.transformState,d=u.scale,l=u.positionX,p=u.positionY;if(a){var f=vi(i,s.scale),v=ei(s.positionX,s.positionY,f,o,0,0,a),h={scale:s.scale,positionX:v.x,positionY:v.y};d===s.scale&&l===s.positionX&&p===s.positionY||(n==null||n(),Q(i,h,r,e))}}function Ne(i,r,e,n){var t=i.getBoundingClientRect(),a=r.getBoundingClientRect(),o=e.getBoundingClientRect(),s=a.x*n.scale,u=a.y*n.scale;return{x:(t.x-o.x+s)/n.scale,y:(t.y-o.y+u)/n.scale}}function Me(i,r,e){var n=i.wrapperComponent,t=i.contentComponent,a=i.transformState,o=i.setup,s=o.limitToBounds,u=o.minScale,d=o.maxScale;if(!n||!t)return a;var l=n.getBoundingClientRect(),p=r.getBoundingClientRect(),f=Ne(r,n,t,a),v=f.x,h=f.y,g=p.width/a.scale,P=p.height/a.scale,A=n.offsetWidth/g,y=n.offsetHeight/P,Y=ni(e||Math.min(A,y),u,d,0,!1),W=(l.width-g*Y)/2,x=(l.height-P*Y)/2,k=(l.left-v)*Y+W,O=(l.top-h)*Y+x,j=vi(i,Y),N=ei(k,O,j,s,0,0,n),M=N.x,H=N.y;return{positionX:M,positionY:H,scale:Y}}var Le=function(i){return function(r,e,n){r===void 0&&(r=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Li(i,1,r,e,n)}},Ze=function(i){return function(r,e,n){r===void 0&&(r=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Li(i,-1,r,e,n)}},He=function(i){return function(r,e,n,t,a){t===void 0&&(t=300),a===void 0&&(a="easeOut");var o=i.transformState,s=o.positionX,u=o.positionY,d=o.scale,l=i.wrapperComponent,p=i.contentComponent,f=i.setup.disabled;if(!(f||!l||!p)){var v={positionX:Number.isNaN(r)?s:r,positionY:Number.isNaN(e)?u:e,scale:Number.isNaN(n)?d:n};Q(i,v,t,a)}}},Fe=function(i){return function(r,e){r===void 0&&(r=200),e===void 0&&(e="easeOut"),Zi(i,r,e)}},Ve=function(i){return function(r,e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut");var t=i.transformState,a=i.wrapperComponent,o=i.contentComponent;if(a&&o){var s=Hi(r||t.scale,a,o);Q(i,s,e,n)}}},Re=function(i){return function(r,e,n,t){n===void 0&&(n=600),t===void 0&&(t="easeOut"),Z(i);var a=i.wrapperComponent,o=typeof r=="string"?document.getElementById(r):r;if(a&&o&&a.contains(o)){var s=Me(i,o,e);Q(i,s,n,t)}}},pi=function(i){return{instance:i,zoomIn:Le(i),zoomOut:Ze(i),setTransform:He(i),resetTransform:Fe(i),centerView:Ve(i),zoomToElement:Re(i)}},Ke=function(i){return{instance:i,state:i.transformState}},C=function(i){var r={};return Object.assign(r,Ke(i)),Object.assign(r,pi(i)),r},si=!1;function li(){try{var i={get passive(){return si=!0,!1}};return i}catch{return si=!1,si}}var ti=".".concat(di.wrapperClass),oi=function(i,r){return r.some(function(e){return i.matches("".concat(ti," ").concat(e,", ").concat(ti," .").concat(e,", ").concat(ti," ").concat(e," *, ").concat(ti," .").concat(e," *"))})},fi=function(i){i&&clearTimeout(i)},Qe=function(i,r,e){return"translate(".concat(i,"px, ").concat(r,"px) scale(").concat(e,")")},Hi=function(i,r,e){var n=e.offsetWidth*i,t=e.offsetHeight*i,a=(r.offsetWidth-n)/2,o=(r.offsetHeight-t)/2;return{scale:i,positionX:a,positionY:o}};function $e(i){return function(r){i.forEach(function(e){typeof e=="function"?e(r):e!=null&&(e.current=r)})}}var qe=function(i,r){var e=i.setup.wheel,n=e.disabled,t=e.wheelDisabled,a=e.touchPadDisabled,o=e.excluded,s=i.isInitialized,u=i.isPanning,d=r.target,l=s&&!u&&!n&&d;if(!l||t&&!r.ctrlKey||a&&r.ctrlKey)return!1;var p=oi(d,o);return!p},Ue=function(i){return i?i.deltaY<0?1:-1:0};function Ge(i,r){var e=Ue(i),n=ue(r,e);return n}function Fi(i,r,e){var n=r.getBoundingClientRect(),t=0,a=0;if("clientX"in i)t=(i.clientX-n.left)/e,a=(i.clientY-n.top)/e;else{var o=i.touches[0];t=(o.clientX-n.left)/e,a=(o.clientY-n.top)/e}return(Number.isNaN(t)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:t,y:a}}var Je=function(i,r,e,n,t){var a=i.transformState.scale,o=i.wrapperComponent,s=i.setup,u=s.maxScale,d=s.minScale,l=s.zoomAnimation,p=s.disablePadding,f=l.size,v=l.disabled;if(!o)throw new Error("Wrapper is not mounted");var h=a+r*e;if(t)return h;var g=n?!1:!v,P=ni(B(h,3),d,u,f,g&&!p);return P},Ie=function(i,r){var e=i.previousWheelEvent,n=i.transformState.scale,t=i.setup,a=t.maxScale,o=t.minScale;return e?n<a||n>o||Math.sign(e.deltaY)!==Math.sign(r.deltaY)||e.deltaY>0&&e.deltaY<r.deltaY||e.deltaY<0&&e.deltaY>r.deltaY||Math.sign(e.deltaY)!==Math.sign(r.deltaY):!1},en=function(i,r){var e=i.setup.pinch,n=e.disabled,t=e.excluded,a=i.isInitialized,o=r.target,s=a&&!n&&o;if(!s)return!1;var u=oi(o,t);return!u},nn=function(i){var r=i.setup.pinch.disabled,e=i.isInitialized,n=i.pinchStartDistance,t=e&&!r&&n;return!!t},rn=function(i,r,e){var n=e.getBoundingClientRect(),t=i.touches,a=B(t[0].clientX-n.left,5),o=B(t[0].clientY-n.top,5),s=B(t[1].clientX-n.left,5),u=B(t[1].clientY-n.top,5);return{x:(a+s)/2/r,y:(o+u)/2/r}},Vi=function(i){return Math.sqrt(Math.pow(i.touches[0].pageX-i.touches[1].pageX,2)+Math.pow(i.touches[0].pageY-i.touches[1].pageY,2))},tn=function(i,r){var e=i.pinchStartScale,n=i.pinchStartDistance,t=i.setup,a=t.maxScale,o=t.minScale,s=t.zoomAnimation,u=t.disablePadding,d=s.size,l=s.disabled;if(!e||n===null||!r)throw new Error("Pinch touches distance was not provided");if(r<0)return i.transformState.scale;var p=r/n,f=p*e;return ni(B(f,2),o,a,d,!l&&!u)},an=160,on=100,sn=function(i,r){var e=i.props,n=e.onWheelStart,t=e.onZoomStart;i.wheelStopEventTimer||(Z(i),X(C(i),r,n),X(C(i),r,t))},ln=function(i,r){var e=i.props,n=e.onWheel,t=e.onZoom,a=i.contentComponent,o=i.setup,s=i.transformState,u=s.scale,d=o.limitToBounds,l=o.centerZoomedOut,p=o.zoomAnimation,f=o.wheel,v=o.disablePadding,h=o.smooth,g=p.size,P=p.disabled,A=f.step,y=f.smoothStep;if(!a)throw new Error("Component not mounted");r.preventDefault(),r.stopPropagation();var Y=Ge(r,null),W=h?y*Math.abs(r.deltaY):A,x=Je(i,Y,W,!r.ctrlKey);if(u!==x){var k=J(i,x),O=Fi(r,a,u),j=P||g===0||l||v,N=d&&j,M=ai(i,O.x,O.y,x,k,N),H=M.x,F=M.y;i.previousWheelEvent=r,i.setTransformState(x,H,F),X(C(i),r,n),X(C(i),r,t)}},un=function(i,r){var e=i.props,n=e.onWheelStop,t=e.onZoomStop;fi(i.wheelAnimationTimer),i.wheelAnimationTimer=setTimeout(function(){i.mounted&&(ki(i,r.x,r.y),i.wheelAnimationTimer=null)},on);var a=Ie(i,r);a&&(fi(i.wheelStopEventTimer),i.wheelStopEventTimer=setTimeout(function(){i.mounted&&(i.wheelStopEventTimer=null,X(C(i),r,n),X(C(i),r,t))},an))},Ri=function(i){for(var r=0,e=0,n=0;n<2;n+=1)r+=i.touches[n].clientX,e+=i.touches[n].clientY;var t=r/2,a=e/2;return{x:t,y:a}},dn=function(i,r){var e=Vi(r);i.pinchStartDistance=e,i.lastDistance=e,i.pinchStartScale=i.transformState.scale,i.isPanning=!1;var n=Ri(r);i.pinchLastCenterX=n.x,i.pinchLastCenterY=n.y,Z(i)},pn=function(i,r){var e=i.contentComponent,n=i.pinchStartDistance,t=i.wrapperComponent,a=i.transformState.scale,o=i.setup,s=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,l=o.alignmentAnimation,p=d.disabled,f=d.size;if(!(n===null||!e)){var v=rn(r,a,e);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var h=Vi(r),g=tn(i,h),P=Ri(r),A=P.x-(i.pinchLastCenterX||0),y=P.y-(i.pinchLastCenterY||0);if(!(g===a&&A===0&&y===0)){i.pinchLastCenterX=P.x,i.pinchLastCenterY=P.y;var Y=J(i,g),W=p||f===0||u,x=s&&W,k=ai(i,v.x,v.y,g,Y,x),O=k.x,j=k.y;i.pinchMidpoint=v,i.lastDistance=h;var N=l.sizeX,M=l.sizeY,H=K(i,N),F=K(i,M),U=O+A,G=j+y,m=ei(U,G,Y,s,H,F,t),w=m.x,T=m.y;i.setTransformState(g,w,T)}}}},fn=function(i){var r=i.pinchMidpoint;i.velocity=null,i.lastDistance=null,i.pinchMidpoint=null,i.pinchStartScale=null,i.pinchStartDistance=null,ki(i,r==null?void 0:r.x,r==null?void 0:r.y)},Ki=function(i,r){var e=i.props.onZoomStop,n=i.setup.doubleClick.animationTime;fi(i.doubleClickStopEventTimer),i.doubleClickStopEventTimer=setTimeout(function(){i.doubleClickStopEventTimer=null,X(C(i),r,e)},n)},vn=function(i,r){var e=i.props,n=e.onZoomStart,t=e.onZoom,a=i.setup.doubleClick,o=a.animationTime,s=a.animationType;X(C(i),r,n),Zi(i,o,s,function(){return X(C(i),r,t)}),Ki(i,r)};function mn(i,r){return i==="toggle"?r===1?1:-1:i==="zoomOut"?-1:1}function cn(i,r){var e=i.setup,n=i.doubleClickStopEventTimer,t=i.transformState,a=i.contentComponent,o=t.scale,s=i.props,u=s.onZoomStart,d=s.onZoom,l=e.doubleClick,p=l.disabled,f=l.mode,v=l.step,h=l.animationTime,g=l.animationType;if(!p&&!n){if(f==="reset")return vn(i,r);if(!a)return console.error("No ContentComponent found");var P=mn(f,i.transformState.scale),A=Mi(i,P,v);if(o!==A){X(C(i),r,u);var y=Fi(r,a,o),Y=mi(i,A,y.x,y.y);if(!Y)return console.error("Error during zoom event. New transformation state was not calculated.");X(C(i),r,d),Q(i,Y,h,g),Ki(i,r)}}}var hn=function(i,r){var e=i.isInitialized,n=i.setup,t=i.wrapperComponent,a=n.doubleClick,o=a.disabled,s=a.excluded,u=r.target,d=t==null?void 0:t.contains(u),l=e&&u&&d&&!o;if(!l)return!1;var p=oi(u,s);return!p},gn=function(){function i(r){var e=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){e.initializeWindowEvents()},this.unmount=function(){e.cleanupWindowEvents()},this.update=function(n){e.props=n,J(e,e.transformState.scale),e.setup=_i(n)},this.initializeWindowEvents=function(){var n,t,a=li(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;(t=e.wrapperComponent)===null||t===void 0||t.addEventListener("wheel",e.onWheelPanning,a),s==null||s.addEventListener("mousedown",e.onPanningStart,a),s==null||s.addEventListener("mousemove",e.onPanning,a),s==null||s.addEventListener("mouseup",e.onPanningStop,a),o==null||o.addEventListener("mouseleave",e.clearPanning,a),s==null||s.addEventListener("keyup",e.setKeyUnPressed,a),s==null||s.addEventListener("keydown",e.setKeyPressed,a)},this.cleanupWindowEvents=function(){var n,t,a=li(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;s==null||s.removeEventListener("mousedown",e.onPanningStart,a),s==null||s.removeEventListener("mousemove",e.onPanning,a),s==null||s.removeEventListener("mouseup",e.onPanningStop,a),o==null||o.removeEventListener("mouseleave",e.clearPanning,a),s==null||s.removeEventListener("keyup",e.setKeyUnPressed,a),s==null||s.removeEventListener("keydown",e.setKeyPressed,a),document.removeEventListener("mouseleave",e.clearPanning,a),Z(e),(t=e.observer)===null||t===void 0||t.disconnect()},this.handleInitializeWrapperEvents=function(n){var t=li();n.addEventListener("wheel",e.onWheelZoom,t),n.addEventListener("dblclick",e.onDoubleClick,t),n.addEventListener("touchstart",e.onTouchPanningStart,t),n.addEventListener("touchmove",e.onTouchPanning,t),n.addEventListener("touchend",e.onTouchPanningStop,t)},this.handleInitialize=function(n){var t=e.setup.centerOnInit;e.applyTransformation(),e.onInitCallbacks.forEach(function(a){return a(C(e))}),t&&(e.setCenter(),e.observer=new ResizeObserver(function(){var a,o=n.offsetWidth,s=n.offsetHeight;(o>0||s>0)&&(e.onInitCallbacks.forEach(function(u){return u(C(e))}),e.setCenter(),(a=e.observer)===null||a===void 0||a.disconnect())}),setTimeout(function(){var a;(a=e.observer)===null||a===void 0||a.disconnect()},5e3),e.observer.observe(n))},this.onWheelZoom=function(n){var t=e.setup.disabled;if(!t){var a=qe(e,n);if(a){var o=e.isPressingKeys(e.setup.wheel.activationKeys);o&&(sn(e,n),ln(e,n),un(e,n))}}},this.onWheelPanning=function(n){var t=e.setup,a=t.disabled,o=t.wheel,s=t.panning;if(!(!e.wrapperComponent||!e.contentComponent||a||!o.wheelDisabled||s.disabled||!s.wheelPanning||n.ctrlKey)){n.preventDefault(),n.stopPropagation();var u=e.transformState,d=u.positionX,l=u.positionY,p=d-n.deltaX,f=l-n.deltaY,v=s.lockAxisX?d:p,h=s.lockAxisY?l:f,g=e.setup.alignmentAnimation,P=g.sizeX,A=g.sizeY,y=K(e,P),Y=K(e,A);v===d&&h===l||ji(e,v,h,y,Y)}},this.onPanningStart=function(n){var t=e.setup.disabled,a=e.props.onPanningStart;if(!t){var o=bi(e,n);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.button===0&&!e.setup.panning.allowLeftClickPan||n.button===1&&!e.setup.panning.allowMiddleClickPan||n.button===2&&!e.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),Z(e),Ti(e,n),X(C(e),n,a)))}}},this.onPanning=function(n){var t=e.setup.disabled,a=e.props.onPanning;if(!t){var o=Pi(e);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.preventDefault(),n.stopPropagation(),Yi(e,n.clientX,n.clientY),X(C(e),n,a))}}},this.onPanningStop=function(n){var t=e.props.onPanningStop;e.isPanning&&(ke(e),X(C(e),n,t))},this.onPinchStart=function(n){var t=e.setup.disabled,a=e.props,o=a.onPinchingStart,s=a.onZoomStart;if(!t){var u=en(e,n);u&&(dn(e,n),Z(e),X(C(e),n,o),X(C(e),n,s))}},this.onPinch=function(n){var t=e.setup.disabled,a=e.props,o=a.onPinching,s=a.onZoom;if(!t){var u=nn(e);u&&(n.preventDefault(),n.stopPropagation(),pn(e,n),X(C(e),n,o),X(C(e),n,s))}},this.onPinchStop=function(n){var t=e.props,a=t.onPinchingStop,o=t.onZoomStop;e.pinchStartScale&&(fn(e),X(C(e),n,a),X(C(e),n,o))},this.onTouchPanningStart=function(n){var t=e.setup.disabled,a=e.props.onPanningStart;if(!t){var o=bi(e,n);if(o){var s=e.lastTouch&&+new Date-e.lastTouch<200;if(!s){e.lastTouch=+new Date,Z(e);var u=n.touches,d=u.length===1,l=u.length===2;d&&(Z(e),Ti(e,n),X(C(e),n,a)),l&&e.onPinchStart(n)}}}},this.onTouchPanning=function(n){var t=e.setup.disabled,a=e.props.onPanning;if(e.isPanning&&n.touches.length===1){if(t)return;var o=Pi(e);if(!o)return;n.preventDefault(),n.stopPropagation();var s=n.touches[0];Yi(e,s.clientX,s.clientY),X(C(e),n,a)}else n.touches.length>1&&e.onPinch(n)},this.onTouchPanningStop=function(n){e.onPanningStop(n),e.onPinchStop(n)},this.onDoubleClick=function(n){var t=e.setup.disabled;if(!t){var a=hn(e,n);a&&cn(e,n)}},this.clearPanning=function(n){e.isPanning&&e.onPanningStop(n)},this.setKeyPressed=function(n){e.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){e.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(t){return e.pressedKeys[t]}):!0},this.setTransformState=function(n,t,a){var o=e.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(t)&&!Number.isNaN(a)){n!==e.transformState.scale&&(e.transformState.previousScale=e.transformState.scale,e.transformState.scale=n),e.transformState.positionX=t,e.transformState.positionY=a,e.applyTransformation();var s=C(e);e.onChangeCallbacks.forEach(function(u){return u(s)}),X(s,{scale:n,positionX:t,positionY:a},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(e.wrapperComponent&&e.contentComponent){var n=Hi(e.transformState.scale,e.wrapperComponent,e.contentComponent);e.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,t,a){return e.props.customTransform?e.props.customTransform(n,t,a):Qe(n,t,a)},this.applyTransformation=function(){if(!(!e.mounted||!e.contentComponent)){var n=e.transformState,t=n.scale,a=n.positionX,o=n.positionY,s=e.handleTransformStyles(a,o,t);e.contentComponent.style.transform=s}},this.getContext=function(){return C(e)},this.onChange=function(n){return e.onChangeCallbacks.has(n)||e.onChangeCallbacks.add(n),function(){e.onChangeCallbacks.delete(n)}},this.onInit=function(n){return e.onInitCallbacks.has(n)||e.onInitCallbacks.add(n),function(){e.onInitCallbacks.delete(n)}},this.init=function(n,t){e.cleanupWindowEvents(),e.wrapperComponent=n,e.contentComponent=t,J(e,e.transformState.scale),e.handleInitializeWrapperEvents(n),e.handleInitialize(t),e.initializeWindowEvents(),e.isInitialized=!0;var a=C(e);X(a,void 0,e.props.onInit)},this.props=r,this.setup=_i(this.props),this.transformState=Ni(this.props)}return i}(),ci=D.createContext(null),Sn=function(i,r){return typeof i=="function"?i(r):i},wn=D.forwardRef(function(i,r){var e=_.useRef(new gn(i)).current,n=Sn(i.children,pi(e));return _.useImperativeHandle(r,function(){return pi(e)},[e]),_.useEffect(function(){e.update(i)},[e,i]),D.createElement(ci.Provider,{value:e},n)});D.forwardRef(function(i,r){var e=_.useRef(null),n=_.useContext(ci);return _.useEffect(function(){return n.onChange(function(t){if(e.current){var a=0,o=0;e.current.style.transform=n.handleTransformStyles(a,o,1/t.instance.transformState.scale)}})},[n]),D.createElement("div",R({},i,{ref:$e([e,r])}))});function yn(i,r){r===void 0&&(r={});var e=r.insertAt;if(!(!i||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e==="top"&&n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i))}}var bn=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Ai={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};yn(bn);var Pn=function(i){var r=i.children,e=i.wrapperClass,n=e===void 0?"":e,t=i.contentClass,a=t===void 0?"":t,o=i.wrapperStyle,s=i.contentStyle,u=i.wrapperProps,d=u===void 0?{}:u,l=i.contentProps,p=l===void 0?{}:l,f=_.useContext(ci),v=f.init,h=f.cleanupWindowEvents,g=_.useRef(null),P=_.useRef(null);return _.useEffect(function(){var A=g.current,y=P.current;return A!==null&&y!==null&&v&&(v==null||v(A,y)),function(){h==null||h()}},[]),D.createElement("div",R({},d,{ref:g,className:"".concat(di.wrapperClass," ").concat(Ai.wrapper," ").concat(n),style:o}),D.createElement("div",R({},p,{ref:P,className:"".concat(di.contentClass," ").concat(Ai.content," ").concat(a),style:s}),r))};const Cn=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),Tn=E("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"205px",h:"70px",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",gap:"5px",justify:"center",color:"#828282"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),Yn=E("div",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",mt:"10px",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%"}),Xn=E("div",{d:"grid",gap:"10px",gridTemplateAreas:`
    "filters destination"
    "team team"
  `,px:"20px",pb:"10px",w:"100%","@sm":{}}),_n=E("div",{d:"flex",gridArea:"filters",gap:"10px"}),An=E("div",{d:"flex",align:"center",justify:"flex-end",gridArea:"destination",gap:"2px"}),zn=E("div",{d:"flex",bg:"rgba(255, 225, 225, 0.05)",padding:"2px 3px",img:{w:"40px"},variants:{disabled:{true:{opacity:.7,filter:"grayscale(100%)"}}}});E("div",{d:"block",gridArea:"destination",w:"max-content",ml:"auto",p:{textAlign:"right",fs:"24px",ff:"$heading",color:"#fff",textTransform:"capitalize","&:not(:first-child)":{fs:"14px"}},"@sm":{p:{fs:"14px","&:not(:first-child)":{fs:"10px",color:"#8A8A8A"}}}});E("div",{d:"flex",gridArea:"team",w:"max-content",ml:"auto",">div":{ml:"5px","&:nth-child(3)":{ml:"25px"}},"@sm":{}});E("div",{d:"flex",align:"center",gap:"5px",direction:"column",img:{w:"35px",h:"35px"},span:{fs:"12px",ff:"$heading",color:"#A6A6A6"},"@sm":{}});const En=E("div",{d:"flex",w:"100%",px:"10px",".react-transform-wrapper":{maxH:"calc(100vh - 250px)"},"@sm":{".react-transform-wrapper":{maxH:"calc(100vh - 190px)"}},"@media (max-width: 768px) and (max-height: 500px)":{".react-transform-wrapper":{maxH:"calc(100vh)"}}}),xn=E("div",{d:"flex",w:"1420px",h:"710px",position:"relative",img:{w:"1420px",h:"710px"}}),Dn=E("button",{d:"flex",align:"center",justify:"center",position:"absolute",border:"1px solid rgba(0,0,0,0.6)",zIndex:1,w:"35.5px",h:"35.5px",svg:{w:"20px",h:"20px"},variants:{isSelected:{true:{bg:"rgba(0, 186, 255, 0.58)"}},type:{miningEvent:{zIndex:2},portal:{zIndex:2}}}});E("div",{d:"flex",align:"center",flexWrap:"wrap",gap:"20px",mt:"10px",pl:"20px",w:"100%"});E("div",{d:"flex",align:"center",justify:"center",gap:"5px",color:"#fff",ff:"$heading",fs:"10px",svg:{w:"17px",h:"17px"},"&:nth-child(1)":{fill:"#80FF00"},"&:nth-child(2)":{fill:"#EB094D"},"&:nth-child(3)":{fill:"#FFB800"}});const Wn=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",textTransform:"capitalize",padding:"2px 5px",bg:"#333333",color:"#fff",ff:"$heading",fs:"10px",br:"5px"}}),On=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fw:900,ff:"$heading",fs:"16px",br:"5px","-webkit-text-stroke":"1px #000"}}),jn=i=>{const r=new Date(new Date().toUTCString().substring(0,25)),e=+i-+r;let n={days:0,hours:0,minutes:0,seconds:0};return e>0&&(n={days:Math.floor(e/(1e3*60*60)/24),hours:Math.floor(e/(1e3*60*60)%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}),{...n,difference:e}},Bn=i=>{if(i&&((i==null?void 0:i.seconds)>0||(i==null?void 0:i.minutes)>0||(i==null?void 0:i.hours)>0)){const r=i.hours>0?`${i.hours>9?`${i.hours}:`:`0${i.hours}:`}`:"",e=i.minutes>0?`${i.minutes>9?i.minutes:`0${i.minutes}`}`:"00",n=i.seconds>9?i.seconds:`0${i.seconds}`;return`${r}${e}:${n}`}return"MINE"};async function kn(i,r,e){const{executeTransaction:n}=re(),t=Nn(i,r,e);return!!await n(t)}function Nn(i,r,e){return{actions:[{account:Ji.playersAle,name:"travel",authorization:[{actor:i.name,permission:i.authorization.permission}],data:{wallet:i.name,x:r,y:e}}]}}const Mn=Ii((i,r)=>({areaSelected:null,setAreaSelected:e=>i({areaSelected:e})})),Ln=i=>ae({queryKey:[ie.playerDataState,i],queryFn:()=>Zn(i),staleTime:1e3*60*20,enabled:!!xi.getState().user});async function Zn(i){try{const r=await ee(i);return r||null}catch(r){return console.log(r),null}}const zi=D.lazy(()=>q(()=>import("./index-74c0fe3b.js"),["assets/index-74c0fe3b.js","assets/index-b68297c9.js","assets/index-55fec1ff.css"])),Ei=D.lazy(()=>q(()=>import("./index-bea161a7.js"),["assets/index-bea161a7.js","assets/index-b68297c9.js","assets/index-55fec1ff.css","assets/index-fb772a0b.js","assets/iconBase-8f556a80.js"])),Hn=D.lazy(()=>q(()=>import("./box-gloves-3c4beef0.js"),["assets/box-gloves-3c4beef0.js","assets/index-b68297c9.js","assets/index-55fec1ff.css"])),Fn=D.lazy(()=>q(()=>import("./travel-arrow-d56b3792.js"),["assets/travel-arrow-d56b3792.js","assets/index-b68297c9.js","assets/index-55fec1ff.css"])),Vn=D.lazy(()=>q(()=>import("./portal-1185b889.js"),["assets/portal-1185b889.js","assets/index-b68297c9.js","assets/index-55fec1ff.css"])),Rn=D.lazy(()=>q(()=>import("./index-51c5dd3f.js"),["assets/index-51c5dd3f.js","assets/index-b68297c9.js","assets/index-55fec1ff.css"])),Kn=D.lazy(()=>q(()=>import("./index-4e7f8150.js"),["assets/index-4e7f8150.js","assets/index-b68297c9.js","assets/index-55fec1ff.css","assets/inventory-query-35546aab.js","assets/useQuery-3ccebb81.js","assets/atomic-api-f42fec59.js","assets/toast-options-bf0eb520.js","assets/use-transaction-4bf0bff5.js","assets/sleep-da79c358.js","assets/constants-06470205.js"])),Qn=()=>{var G;const{areaSelected:i,setAreaSelected:r}=Mn(),{user:e,updatePlayerData:n,updateLandsData:t}=xi(),a=_.useRef(null),[o,s]=_.useState([]),[u,d]=_.useState([]),[l,p]=_.useState(null),[f,v]=_.useState(8),[h,g]=_.useState(0),[P,A]=_.useState(!1),[y,Y]=_.useState({label:e!=null&&e.planet?e.planet.charAt(0).toUpperCase()+e.planet.slice(1):"",value:(e==null?void 0:e.planet)||""}),[W,x]=_.useState([]),[k,O]=_.useState(W),{data:j}=Ln((y==null?void 0:y.value)||""),N=_.useCallback(()=>{var b,$,L;if(!e)return null;const m=((b=j==null?void 0:j.filter(z=>!!z.special_effect))==null?void 0:b.map(z=>({x:z.x-1,y:z.y-1,type:"portal",text:z.special_effect.slice(2,1/0)})))||[],w=((L=($=e.active_taverns)==null?void 0:$.filter(z=>z.planet===(y==null?void 0:y.value)))==null?void 0:L.map(z=>({x:z.x-1,y:z.y-1,type:"tavern"})))||[],T=[...m,...w],S=T.reduce((z,V)=>(z.some(({value:I})=>I===V.type)||z.push({label:V.type.charAt(0).toUpperCase()+V.type.slice(1),value:V.type}),z),[]);x(S),O(S),d(T)},[e,j]);_.useEffect(()=>{const w=1420/yi,T=[];for(let S=0;S<yi;S++){T[S]=[];for(let b=0;b<oe;b++)T[S][b]={x:S*w,y:b*w}}s(T),N()},[N]);function M(m,w){switch(w){case"arena":return c.jsxs("svg",{fill:"rgba(235, 9, 77, 0.67)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"youControl":return c.jsxs("svg",{fill:"rgba(173, 255, 0, 0.65)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"miningEvent":return c.jsxs(On,{children:[c.jsx("span",{children:m}),c.jsxs("svg",{fill:"#FFB800",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490 490",children:[c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m}),c.jsx("polygon",{points:"245,456.701 490,33.299 0,33.299 "})]})]});case"portal":return c.jsxs(Wn,{children:[c.jsx("span",{children:m}),c.jsx(Vn,{})]});case"flag":return c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999,width:"14px",height:"14px"},children:[c.jsx("circle",{cx:"11",cy:"11",r:"11",fill:"#DB4447"}),c.jsx("circle",{cx:"11",cy:"11",r:"9",fill:"#141423"}),c.jsx("circle",{cx:"11",cy:"11",r:"7",fill:"#DB4447"})]});case"tavern":return c.jsx("div",{children:c.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{width:"17.6777",height:"17.6777",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 0 12.5)",fill:"#FFB800"}),c.jsx("rect",{width:"12.8565",height:"12.8565",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 3.37476 12.5)",fill:"#141423"}),c.jsx("rect",{width:"8.03534",height:"8.03534",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 6.83008 12.5)",fill:"#FFB800"})]})});default:return null}}function H(m){if(!e)return;if((l==null?void 0:l.x)===m.clientX&&(l==null?void 0:l.y)===m.clientY){p(null);return}if(p({x:m.clientX,y:m.clientY,type:m.type}),e.mapX===m.clientX&&e.mapY===m.clientY){g(0);return}const w=Math.sqrt(Math.pow(e.mapX-m.clientX,2)+Math.pow(e.mapY-m.clientY,2)),T=Math.ceil(w);g(T)}function F(){if(!l)return;const m={x:l.x+1,y:l.y+1,type:(l==null?void 0:l.type)||""};if(m.type==="tavern"){const w=(e==null?void 0:e.active_taverns.find(({x:T,y:S})=>T===m.x&&S===m.y))||{};r({...m,...w})}}async function U(){try{if(A(!0),!e||!l||!await kn(e,(l==null?void 0:l.x)+1||0,(l==null?void 0:l.y)+1||0))return;await te(2e3),p(null),g(0);const w=await n();await t(),w!=null&&w.planet&&Y({label:w.planet.charAt(0).toUpperCase()+w.planet.slice(1),value:w.planet}),ne.success("Travel successful")}catch(m){console.error(m)}finally{A(!1)}}return _.useEffect(()=>{const m=setInterval(()=>{var T;const w=(T=u==null?void 0:u.filter(S=>(S==null?void 0:S.formattedTimeLeft)!=="MINE"))==null?void 0:T.map(S=>{if(S.type==="miningEvent"&&(S==null?void 0:S.formattedTimeLeft)!=="MINE"&&(S!=null&&S.expirationDate)){const b=jn(S==null?void 0:S.expirationDate);return{...S,formattedTimeLeft:Bn(b),mineTime:b}}return S});d(w)},1e3);return()=>clearInterval(m)},[u]),(i==null?void 0:i.type)==="arena"?c.jsx(Rn,{}):(i==null?void 0:i.type)==="tavern"?c.jsx(Kn,{}):(console.log(e),c.jsxs(Cn,{children:[c.jsxs(Tn,{children:[u.some(({x:m,y:w})=>(e==null?void 0:e.mapX)===m&&(e==null?void 0:e.mapY)===w)&&c.jsx(zi,{disabled:!!u.find(({x:m,y:w})=>(e==null?void 0:e.x)===m&&(e==null?void 0:e.y)===w),color:"black",onClick:F,icon:Hn,children:(l==null?void 0:l.type)==="tavern"?"Enter Tavern":"Enter Arena"}),c.jsxs(zi,{isLoading:P,disabled:y.value!==(e==null?void 0:e.planet)||!l||!h||h>(((G=e==null?void 0:e.activestats)==null?void 0:G.action_points)||0)||P,color:"black",onClick:U,icon:Fn,children:["Travel",y.value===(e==null?void 0:e.planet)&&c.jsxs("span",{children:["- ",h,c.jsx("img",{loading:"lazy",src:"/assets/icons/potion.png",alt:""})]})]})]}),c.jsxs(Yn,{ref:a,children:[c.jsxs(Xn,{children:[c.jsxs(_n,{children:[c.jsx(Ei,{options:se,selected:y,onSelected:m=>Y(m)}),c.jsx(Ei,{title:"Select a filter",onMultipleSelected:m=>O(m),isMultipleItems:!0,multiplesSelected:k,options:W})]}),c.jsx(An,{children:le.map((m,w)=>{var T;return c.jsx(zn,{disabled:!((T=e==null?void 0:e.buildingsOnLand)!=null&&T.some(S=>S.building_name===m.name.toLowerCase())),children:c.jsx("img",{loading:"lazy",src:`/assets/buildings/${m.img}.png`,alt:m.name,title:m.name})},w)})})]}),(e==null?void 0:e.playerLand)&&c.jsx(En,{children:c.jsx(wn,{disablePadding:!0,initialScale:1,maxScale:2,doubleClick:{step:f},onPanningStop:m=>{m.state.scale!==1?v(-8):v(8)},children:c.jsx(Pn,{children:c.jsxs(xn,{children:[c.jsx("img",{loading:"lazy",src:`/assets/maps/${y==null?void 0:y.value}.jpg`,alt:""}),o.map((m,w)=>m.map((T,S)=>{var $;const b=($=u==null?void 0:u.filter(L=>k.some(z=>z.value!=="mixed"?z.value===L.type:!0)))==null?void 0:$.find(L=>L.x===w&&L.y===S);return c.jsxs(Dn,{onClick:()=>H({clientX:w,clientY:S,type:(b==null?void 0:b.type)||""}),isSelected:(l==null?void 0:l.x)===w&&(l==null?void 0:l.y)===S,type:(b==null?void 0:b.type)||"empty",style:{top:T.y,left:T.x},children:[!!b&&M((b==null?void 0:b.formattedTimeLeft)||(b==null?void 0:b.number)||(b==null?void 0:b.text)||"",(b==null?void 0:b.type)||""),e.planet===y.value&&e.mapX===w&&e.mapY===S&&M("","flag")]},T.x+T.y)}))]})})})})]})]}))},In=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));export{In as i,Mn as u};

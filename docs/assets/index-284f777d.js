import{g as m,S as i,e as x,u as p,s as u,R as c,_ as y,j as s,r as g,Q as n}from"./index-32d28607.js";import{u as h}from"./useQuery-20f20cfd.js";import b from"./index-3839b643.js";import{u as S}from"./index-0d11f853.js";import{u as w}from"./use-transaction-86ced0bc.js";import{v as T}from"./v4-4a60fe23.js";import"./toast-options-07ca6d7b.js";const _=async()=>await m({options:{code:i.usptsWorlds,index_position:1,key_type:"i64",limit:"100",reverse:!0,scope:i.usptsWorlds,table:"pointoffers"}}),j=()=>h({queryKey:[x.PointOffersState],queryFn:()=>v(),staleTime:1e3*60*60,enabled:!!p.getState().user});async function v(){try{return await _()}catch(t){return console.log(t),null}}const R=u("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",padding:"40px 40px",gap:"50px",mt:"10px",bg:"#141423",br:"15px",maxW:"524px",w:"100%",button:{justify:"center",h:"50px",fw:"bold"},img:{h:"233px",w:"150px",objectFit:"contain"},variants:{isHidden:{true:{"@sm":{display:"none"}}}},"@xmd":{maxW:"100%"}}),W=u("div",{d:"flex",fw:"bold",ff:"$heading",fs:"16px",color:"white"}),A=u("button",{display:"none",align:"flex-start",justify:"center",color:"#fff",fs:"30px",w:"50px",h:"50px",top:"0px",right:"0px",position:"absolute","@xmd":{d:"flex"}});async function C(t,o){const{executeTransaction:e}=w(),r=E(t,o);return!!await e(r)}function E(t,o){return{actions:[{account:i.usptsWorlds,name:"redeempntnft",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{user:t.name,offer_id:o}}]}}const F=c.lazy(()=>y(()=>import("./index-875331dc.js"),["assets/index-875331dc.js","assets/index-32d28607.js","assets/index-55fec1ff.css","assets/index-0d11f853.js","assets/useQuery-20f20cfd.js","assets/index-3839b643.js"])),L=c.memo(()=>{const{data:t}=j();return s.jsx(s.Fragment,{children:t==null?void 0:t.map(o=>s.jsx(F,{...o},T()))})}),N=c.memo(()=>{const{user:t,updatePlayerData:o}=p(),{selectedPointOffer:e,setSelectedPointOffer:r}=S(),[a,l]=g.useState(!1);async function d(){if(!t)return n.error("You need to be logged in to buy items");if(!e)return n.error("You need to select a NFT to buy items");l(!0);try{await C(t,e.template_id)&&(await o(),n.success("Item bought successfully"))}catch{n.error("Error buying item")}finally{l(!1),r(null)}}return s.jsxs(R,{children:[s.jsx(A,{onClick:()=>r(null),children:"x"}),s.jsxs(W,{children:["Are you sure you want to spend"," ",(((e==null?void 0:e.required)||1)/10).toLocaleString("en-US")," Alien Worlds shards to craft this NFT?"]}),s.jsx("img",{loading:"lazy",src:`/assets/aw-nft-images/${e==null?void 0:e.template_id}.webp`,alt:""}),s.jsxs(b,{isLoading:a,disabled:a,onClick:d,color:"blue",children:["Buy now for ",(((e==null?void 0:e.required)||1)/10).toLocaleString("en-US")," AW shards"]})]})});L.displayName="PointOffersList";N.displayName="PointOffersSelection";export{L as PointOffersList,N as PointOffersSelection};

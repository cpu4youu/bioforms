import{s as a,R as w,j as e}from"./index-907b2698.js";import{u as v,b as y}from"./all-buildings-2fed9534.js";import{f as g,b as S}from"./constants-308cd0ac.js";import{u as _}from"./index-23d4e20a.js";import"./useQuery-468e16bd.js";import"./atomic-api-2d5f4e0a.js";import"./toast-options-f08cc4c0.js";const z=a("div",{mt:"20px","@sm":{mt:"5px"}}),$=a("div",{d:"grid",gridTemplateColumns:"1fr 1fr 1fr",w:"100%",bg:"#242438",padding:"10px 20px",fontSize:"14px",fontWeight:"bold",ff:"$heading",color:"#C9C9C9","@md":{gap:"10px",fontSize:"12px",padding:"10px 10px",span:{textAlign:"center"}}}),L=a("div",{d:"flex",direction:"column",gap:"10px",overflowY:"auto",h:"calc(100vh - 280px)",pb:"20px"}),T=a("button",{d:"grid",gridTemplateColumns:"1fr 1fr 1fr",bg:"#201D2C",padding:"8px",gap:"3px",variants:{isSelected:{true:{bg:"rgb(255 255 255 / 17%)"}}},"@sm":{gap:"3px"}}),B=a("div",{d:"flex",w:"100%",h:"100%",mt:"10px",img:{objectFit:"contain",w:"70px",h:"70px"},span:{ml:"10px",fontSize:"14px",ff:"$heading",color:"#C9C9C9"},"@md":{span:{fontSize:"12px"}},"@sm":{direction:"column-reverse",alignItems:"center",justify:"flex-end",gap:"10px",img:{w:"100%",h:"auto"}}}),I=a("div",{d:"flex",flexWrap:"wrap",gap:"2px 3px",w:"100%",h:"77px"}),f=a("div",{d:"flex",w:"49%",h:"100%",gap:"2px",img:{objectFit:"contain",w:"34px",h:"100%",bg:"#242438"},span:{d:"flex",alignItems:"center",justifyContent:"center",w:"100%",fontSize:"14px",ff:"$heading",fw:"bold",color:"#C9C9C9",bg:"#242438"},"@md":{w:"100%",span:{fontSize:"10px"}}}),A=a("div",{d:"flex",w:"100%",gap:"3px",variants:{isSide:{true:{mt:"0px","@sm":{mt:"8px"}},false:{h:"100%"}}},"@sm":{gap:"3px",flexWrap:"wrap"}}),F=a("div",{d:"flex",justifyContent:"center",alignItems:"center",direction:"column",position:"relative",bg:"#242438",w:"70px",h:"77px",overflow:"hidden",span:{position:"absolute",top:"8px",left:"5px",ff:"$heading",fw:"bold",fs:"16px",color:"#D9CA9A"},img:{objectFit:"contain",w:"77px",h:"100%"},variants:{disabled:{true:{"img, span":{filter:"grayscale(100%)"}}}},"@md":{span:{fontSize:"12px"}},"@sm":{maxW:"48%",span:{fontSize:"12px"},img:{objectFit:"contain",w:"50px"}}}),W=a("div",{position:"absolute",w:"100%",h:"7px",top:0,left:0,bg:"red","@sm":{h:"3px"}}),N=()=>{const{data:c}=v(),{data:x}=y(),{selectedLand:l,setBuildingBoost:h,setSelectedBuild:j,setSelectedLand:u}=_();function C(s){var m,p;u(s);const t={...(m=g)==null?void 0:m[0],...(p=s.buildings)==null?void 0:p[0],index:0},r=((t==null?void 0:t.boost_score)||0)/1e4;j(t),h([r])}return e.jsxs(z,{children:[e.jsxs($,{children:[e.jsx("span",{children:"Land"}),e.jsx("span",{children:"Income since last claim"}),e.jsx("span",{children:"Buildings"})]}),e.jsx(L,{children:c==null?void 0:c.map(s=>{const t=x==null?void 0:x[s.data.planetName].find(i=>i.x===s.data.x&&i.y===s.data.y),r=t==null?void 0:t.buildings.reduce((i,o)=>({credits:i.credits+o.credits,gems:i.gems+o.gems,shards:i.shards+o.shards,tlm:i.tlm+o.tlm}),{credits:0,gems:0,shards:0,tlm:0}),p=[g.find(i=>{var o;return(o=t==null?void 0:t.buildings)==null?void 0:o.some(n=>{var d;return n.building_name===((d=i==null?void 0:i.building_name)==null?void 0:d.toLowerCase())})})||g[0],...S];return e.jsxs(T,{isSelected:s.asset_id===Number(l==null?void 0:l.asset_id),onClick:()=>C({...s,...t}),children:[e.jsxs(B,{children:[e.jsx("img",{loading:"lazy",src:`/assets/lands/map_${s.data.planetName}_row-${s.data.y}-column-${s.data.x}.jpg`,alt:"Land"}),e.jsxs("span",{children:[s.data.name," (",s.data.x,":",s.data.y,")"]})]}),e.jsxs(I,{children:[e.jsxs(f,{children:[e.jsx("img",{loading:"lazy",src:"/assets/icons/credit.png",alt:""}),e.jsx("span",{children:r==null?void 0:r.credits})]}),e.jsxs(f,{children:[e.jsx("img",{loading:"lazy",src:"/assets/icons/tlm.png",alt:""}),e.jsx("span",{children:r==null?void 0:r.tlm})]})]}),e.jsx(A,{isSide:!1,children:p.map((i,o)=>{const n=t==null?void 0:t.buildings.find(b=>b.building_name===i.building_name.toLowerCase()),d=((n==null?void 0:n.boost_score)||0)/1e4;return e.jsxs(F,{disabled:!n,children:[e.jsx(W,{style:{width:`${d}%`}}),e.jsx("span",{children:n==null?void 0:n.level}),e.jsx("img",{loading:"lazy",src:`/assets/buildings/${i.img}.png`,alt:n==null?void 0:n.building_name,title:n==null?void 0:n.building_name})]},o)})})]},s.asset_id)})})]})},P=w.memo(N);export{P as default};

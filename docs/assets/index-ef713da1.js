import{R as W,r as T,s as E,S as Ji,c as Ii,Q as ie,u as Oi,g as ee,_ as U,j as c,a as ne}from"./index-54c37fb5.js";import{u as te}from"./use-transaction-26def561.js";import{s as re}from"./sleep-da79c358.js";import{u as ae}from"./useQuery-02dce8f0.js";import{g as Ci,a as oe,l as se,f as le}from"./constants-06470205.js";var B=function(i,t){return Number(i.toFixed(t))},ue=function(i,t){return typeof i=="number"?i:t},X=function(i,t,e){e&&typeof e=="function"&&e(i,t)},de=function(i){return-Math.cos(i*Math.PI)/2+.5},pe=function(i){return i},fe=function(i){return i*i},ve=function(i){return i*(2-i)},me=function(i){return i<.5?2*i*i:-1+(4-2*i)*i},ce=function(i){return i*i*i},he=function(i){return--i*i*i+1},ge=function(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},Se=function(i){return i*i*i*i},we=function(i){return 1- --i*i*i*i},ye=function(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},be=function(i){return i*i*i*i*i},Pe=function(i){return 1+--i*i*i*i*i},Ce=function(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i},ji={easeOut:de,linear:pe,easeInQuad:fe,easeOutQuad:ve,easeInOutQuad:me,easeInCubic:ce,easeOutCubic:he,easeInOutCubic:ge,easeInQuart:Se,easeOutQuart:we,easeInOutQuart:ye,easeInQuint:be,easeOutQuint:Pe,easeInOutQuint:Ce},Bi=function(i){typeof i=="number"&&cancelAnimationFrame(i)},V=function(i){i.mounted&&(Bi(i.animation),i.animate=!1,i.animation=null,i.velocity=null)};function ki(i,t,e,n){if(i.mounted){var r=new Date().getTime(),a=1;V(i),i.animation=function(){if(!i.mounted)return Bi(i.animation);var o=new Date().getTime()-r,s=o/e,l=ji[t],d=l(s);o>=e?(n(a),i.animation=null):i.animation&&(n(d),requestAnimationFrame(i.animation))},requestAnimationFrame(i.animation)}}function Te(i){var t=i.scale,e=i.positionX,n=i.positionY;return!(Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(n))}function q(i,t,e,n){var r=Te(t);if(!(!i.mounted||!r)){var a=i.setTransformState,o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY,u=t.scale-s,p=t.positionX-l,f=t.positionY-d;e===0?a(t.scale,t.positionX,t.positionY):ki(i,n,e,function(v){var h=s+u*v,g=l+p*v,P=d+f*v;a(h,g,P)})}}function Ye(i,t,e){var n=i.offsetWidth,r=i.offsetHeight,a=t.offsetWidth,o=t.offsetHeight,s=a*e,l=o*e,d=n-s,u=r-l;return{wrapperWidth:n,wrapperHeight:r,newContentWidth:s,newDiffWidth:d,newContentHeight:l,newDiffHeight:u}}var Xe=function(i,t,e,n,r,a,o){var s=i>t?e*(o?1:.5):0,l=n>r?a*(o?1:.5):0,d=i-t-s,u=s,p=n-r-l,f=l;return{minPositionX:d,maxPositionX:u,minPositionY:p,maxPositionY:f}},Si=function(i,t){var e=i.wrapperComponent,n=i.contentComponent,r=i.setup.centerZoomedOut;if(!e||!n)throw new Error("Components are not mounted");var a=Ye(e,n,t),o=a.wrapperWidth,s=a.wrapperHeight,l=a.newContentWidth,d=a.newDiffWidth,u=a.newContentHeight,p=a.newDiffHeight,f=Xe(o,l,d,s,u,p,!!r);return f},mi=function(i,t,e,n){return n?i<t?B(t,2):i>e?B(e,2):B(i,2):B(i,2)},ei=function(i,t){var e=Si(i,t);return i.bounds=e,e};function ri(i,t,e,n,r,a,o){var s=e.minPositionX,l=e.minPositionY,d=e.maxPositionX,u=e.maxPositionY,p=0,f=0;o&&(p=r,f=a);var v=mi(i,s-p,d+p,n),h=mi(t,l-f,u+f,n);return{x:v,y:h}}function di(i,t,e,n,r,a){var o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY,u=n-s;if(typeof t!="number"||typeof e!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:d};var p=l-t*u,f=d-e*u,v=ri(p,f,r,a,0,0,null);return v}function ai(i,t,e,n,r){var a=r?n:0,o=t-a;return!Number.isNaN(e)&&i>=e?e:!Number.isNaN(t)&&i<=o?o:i}var Ti=function(i,t){var e=i.setup.panning.excluded,n=i.isInitialized,r=i.wrapperComponent,a=t.target,o="shadowRoot"in a&&"composedPath"in t,s=o?t.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(a),l=n&&a&&s;if(!l)return!1;var d=pi(a,e);return!d},Yi=function(i){var t=i.isInitialized,e=i.isPanning,n=i.setup,r=n.panning.disabled,a=t&&e&&!r;return!!a},_e=function(i,t){var e=i.transformState,n=e.positionX,r=e.positionY;i.isPanning=!0;var a=t.clientX,o=t.clientY;i.startCoords={x:a-n,y:o-r}},Ae=function(i,t){var e=t.touches,n=i.transformState,r=n.positionX,a=n.positionY;i.isPanning=!0;var o=e.length===1;if(o){var s=e[0].clientX,l=e[0].clientY;i.startCoords={x:s-r,y:l-a}}};function ze(i){var t=i.transformState,e=t.positionX,n=t.positionY,r=t.scale,a=i.setup,o=a.disabled,s=a.limitToBounds,l=a.centerZoomedOut,d=i.wrapperComponent;if(!(o||!d||!i.bounds)){var u=i.bounds,p=u.maxPositionX,f=u.minPositionX,v=u.maxPositionY,h=u.minPositionY,g=e>p||e<f,P=n>v||n<h,A=e>p?d.offsetWidth:i.setup.minPositionX||0,w=n>v?d.offsetHeight:i.setup.minPositionY||0,Y=di(i,A,w,r,i.bounds,s||l),O=Y.x,D=Y.y;return{scale:r,positionX:g?O:e,positionY:P?D:n}}}function Ni(i,t,e,n,r){var a=i.setup.limitToBounds,o=i.wrapperComponent,s=i.bounds,l=i.transformState,d=l.scale,u=l.positionX,p=l.positionY;if(!(o===null||s===null||t===u&&e===p)){var f=ri(t,e,s,a,n,r,o),v=f.x,h=f.y;i.setTransformState(d,v,h)}}var Ee=function(i,t,e){var n=i.startCoords,r=i.transformState,a=i.setup.panning,o=a.lockAxisX,s=a.lockAxisY,l=r.positionX,d=r.positionY;if(!n)return{x:l,y:d};var u=t-n.x,p=e-n.y,f=o?l:u,v=s?d:p;return{x:f,y:v}},$=function(i,t){var e=i.setup,n=i.transformState,r=n.scale,a=e.minScale,o=e.disablePadding;return t>0&&r>=a&&!o?t:0},xe=function(i){var t=i.mounted,e=i.setup,n=e.disabled,r=e.velocityAnimation,a=i.transformState.scale,o=r.disabled,s=!o||a>1||!n||t;return!!s},De=function(i){var t=i.mounted,e=i.velocity,n=i.bounds,r=i.setup,a=r.disabled,o=r.velocityAnimation,s=i.transformState.scale,l=o.disabled,d=!l||s>1||!a||t;return!(!d||!e||!n)};function We(i,t){var e=i.setup.velocityAnimation,n=e.equalToMove,r=e.animationTime,a=e.sensitivity;return n?r*t*a:r}function Xi(i,t,e,n,r,a,o,s,l,d){if(r){if(t>o&&e>o){var u=o+(i-o)*d;return u>l?l:u<o?o:u}if(t<a&&e<a){var u=a+(i-a)*d;return u<s?s:u>a?a:u}}return n?t:mi(i,a,o,r)}function Oe(i,t){var e=1;return t?Math.min(e,i.offsetWidth/window.innerWidth):e}function je(i,t){var e=xe(i);if(e){var n=i.lastMousePosition,r=i.velocityTime,a=i.setup,o=i.wrapperComponent,s=a.velocityAnimation.equalToMove,l=Date.now();if(n&&r&&o){var d=Oe(o,s),u=t.x-n.x,p=t.y-n.y,f=u/d,v=p/d,h=l-r,g=u*u+p*p,P=Math.sqrt(g)/h;i.velocity={velocityX:f,velocityY:v,total:P}}i.lastMousePosition=t,i.velocityTime=l}}function Be(i){var t=i.velocity,e=i.bounds,n=i.setup,r=i.wrapperComponent,a=De(i);if(!(!a||!t||!e||!r)){var o=t.velocityX,s=t.velocityY,l=t.total,d=e.maxPositionX,u=e.minPositionX,p=e.maxPositionY,f=e.minPositionY,v=n.limitToBounds,h=n.alignmentAnimation,g=n.zoomAnimation,P=n.panning,A=P.lockAxisY,w=P.lockAxisX,Y=g.animationType,O=h.sizeX,D=h.sizeY,k=h.velocityAlignmentTime,j=k,N=We(i,l),L=Math.max(N,j),x=$(i,O),Z=$(i,D),R=x*r.offsetWidth/100,J=Z*r.offsetHeight/100,ni=d+R,I=u-R,H=p+J,ii=f-J,m=i.transformState,y=new Date().getTime();ki(i,Y,L,function(_){var S=i.transformState,b=S.scale,K=S.positionX,M=S.positionY,G=new Date().getTime()-y,oi=G/j,z=ji[h.animationType],F=1-z(Math.min(1,oi)),si=1-_,bi=K+o*si,Pi=M+s*si,Gi=Xi(bi,m.positionX,K,w,v,u,d,I,ni,F),Ui=Xi(Pi,m.positionY,M,A,v,f,p,ii,H,F);(K!==bi||M!==Pi)&&i.setTransformState(b,Gi,Ui)})}}function _i(i,t){var e=i.transformState.scale;V(i),ei(i,e),window.TouchEvent!==void 0&&t instanceof TouchEvent?Ae(i,t):_e(i,t)}function Mi(i){var t=i.transformState.scale,e=i.setup,n=e.minScale,r=e.alignmentAnimation,a=r.disabled,o=r.sizeX,s=r.sizeY,l=r.animationTime,d=r.animationType,u=a||t<n||!o&&!s;if(!u){var p=ze(i);p&&q(i,p,l,d)}}function Ai(i,t,e){var n=i.startCoords,r=i.setup,a=r.alignmentAnimation,o=a.sizeX,s=a.sizeY;if(n){var l=Ee(i,t,e),d=l.x,u=l.y,p=$(i,o),f=$(i,s);je(i,{x:d,y:u}),Ni(i,d,u,p,f)}}function ke(i){if(i.isPanning){var t=i.setup.panning.velocityDisabled,e=i.velocity,n=i.wrapperComponent,r=i.contentComponent;i.isPanning=!1,i.animate=!1,i.animation=null;var a=n==null?void 0:n.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),s=(a==null?void 0:a.width)||0,l=(a==null?void 0:a.height)||0,d=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,p=s<d||l<u,f=!t&&e&&(e==null?void 0:e.total)>.1&&p;f?Be(i):Mi(i)}}function wi(i,t,e,n){var r=i.setup,a=r.minScale,o=r.maxScale,s=r.limitToBounds,l=ai(B(t,2),a,o,0,!1),d=ei(i,l),u=di(i,e,n,l,d,s),p=u.x,f=u.y;return{scale:l,positionX:p,positionY:f}}function Li(i,t,e){var n=i.transformState.scale,r=i.wrapperComponent,a=i.setup,o=a.minScale,s=a.limitToBounds,l=a.zoomAnimation,d=l.disabled,u=l.animationTime,p=l.animationType,f=d||n>=o;if((n>=1||s)&&Mi(i),!(f||!r||!i.mounted)){var v=t||r.offsetWidth/2,h=e||r.offsetHeight/2,g=wi(i,o,v,h);g&&q(i,g,u,p)}}var Q=function(){return Q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Q.apply(this,arguments)};function zi(i,t,e){if(e||arguments.length===2)for(var n=0,r=t.length,a;n<r;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return i.concat(a||Array.prototype.slice.call(t))}var li={previousScale:1,scale:1,positionX:0,positionY:0},ti={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},ci={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Zi=function(i){var t,e,n,r;return{previousScale:(t=i.initialScale)!==null&&t!==void 0?t:li.scale,scale:(e=i.initialScale)!==null&&e!==void 0?e:li.scale,positionX:(n=i.initialPositionX)!==null&&n!==void 0?n:li.positionX,positionY:(r=i.initialPositionY)!==null&&r!==void 0?r:li.positionY}},Ei=function(i){var t=Q({},ti);return Object.keys(i).forEach(function(e){var n=typeof i[e]<"u",r=typeof ti[e]<"u";if(r&&n){var a=Object.prototype.toString.call(ti[e]),o=a==="[object Object]",s=a==="[object Array]";o?t[e]=Q(Q({},ti[e]),i[e]):s?t[e]=zi(zi([],ti[e],!0),i[e],!0):t[e]=i[e]}}),t},Hi=function(i,t,e){var n=i.transformState.scale,r=i.wrapperComponent,a=i.setup,o=a.maxScale,s=a.minScale,l=a.zoomAnimation,d=a.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var p=d?n*Math.exp(t*e):n+t*e,f=ai(B(p,3),s,o,u,!1);return f};function Fi(i,t,e,n,r){var a=i.wrapperComponent,o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY;if(!a)return console.error("No WrapperComponent found");var u=a.offsetWidth,p=a.offsetHeight,f=(u/2-l)/s,v=(p/2-d)/s,h=Hi(i,t,e),g=wi(i,h,f,v);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");q(i,g,n,r)}function Vi(i,t,e,n){var r=i.setup,a=i.wrapperComponent,o=r.limitToBounds,s=Zi(i.props),l=i.transformState,d=l.scale,u=l.positionX,p=l.positionY;if(a){var f=Si(i,s.scale),v=ri(s.positionX,s.positionY,f,o,0,0,a),h={scale:s.scale,positionX:v.x,positionY:v.y};d===s.scale&&u===s.positionX&&p===s.positionY||(n==null||n(),q(i,h,t,e))}}function Ne(i,t,e,n){var r=i.getBoundingClientRect(),a=t.getBoundingClientRect(),o=e.getBoundingClientRect(),s=a.x*n.scale,l=a.y*n.scale;return{x:(r.x-o.x+s)/n.scale,y:(r.y-o.y+l)/n.scale}}function Me(i,t,e){var n=i.wrapperComponent,r=i.contentComponent,a=i.transformState,o=i.setup,s=o.limitToBounds,l=o.minScale,d=o.maxScale;if(!n||!r)return a;var u=n.getBoundingClientRect(),p=t.getBoundingClientRect(),f=Ne(t,n,r,a),v=f.x,h=f.y,g=p.width/a.scale,P=p.height/a.scale,A=n.offsetWidth/g,w=n.offsetHeight/P,Y=ai(e||Math.min(A,w),l,d,0,!1),O=(u.width-g*Y)/2,D=(u.height-P*Y)/2,k=(u.left-v)*Y+O,j=(u.top-h)*Y+D,N=Si(i,Y),L=ri(k,j,N,s,0,0,n),x=L.x,Z=L.y;return{positionX:x,positionY:Z,scale:Y}}var Le=function(i){return function(t,e,n){t===void 0&&(t=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Fi(i,1,t,e,n)}},Ze=function(i){return function(t,e,n){t===void 0&&(t=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Fi(i,-1,t,e,n)}},He=function(i){return function(t,e,n,r,a){r===void 0&&(r=300),a===void 0&&(a="easeOut");var o=i.transformState,s=o.positionX,l=o.positionY,d=o.scale,u=i.wrapperComponent,p=i.contentComponent,f=i.setup.disabled;if(!(f||!u||!p)){var v={positionX:Number.isNaN(t)?s:t,positionY:Number.isNaN(e)?l:e,scale:Number.isNaN(n)?d:n};q(i,v,r,a)}}},Fe=function(i){return function(t,e){t===void 0&&(t=200),e===void 0&&(e="easeOut"),Vi(i,t,e)}},Ve=function(i){return function(t,e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut");var r=i.transformState,a=i.wrapperComponent,o=i.contentComponent;if(a&&o){var s=Ri(t||r.scale,a,o);q(i,s,e,n)}}},Re=function(i){return function(t,e,n,r){n===void 0&&(n=600),r===void 0&&(r="easeOut"),V(i);var a=i.wrapperComponent,o=typeof t=="string"?document.getElementById(t):t;if(a&&o&&a.contains(o)){var s=Me(i,o,e);q(i,s,n,r)}}},hi=function(i){return{instance:i,zoomIn:Le(i),zoomOut:Ze(i),setTransform:He(i),resetTransform:Fe(i),centerView:Ve(i),zoomToElement:Re(i)}},Ke=function(i){return{instance:i,state:i.transformState}},C=function(i){var t={};return Object.assign(t,Ke(i)),Object.assign(t,hi(i)),t},fi=!1;function vi(){try{var i={get passive(){return fi=!0,!1}};return i}catch{return fi=!1,fi}}var ui=".".concat(ci.wrapperClass),pi=function(i,t){return t.some(function(e){return i.matches("".concat(ui," ").concat(e,", ").concat(ui," .").concat(e,", ").concat(ui," ").concat(e," *, ").concat(ui," .").concat(e," *"))})},gi=function(i){i&&clearTimeout(i)},Qe=function(i,t,e){return"translate(".concat(i,"px, ").concat(t,"px) scale(").concat(e,")")},Ri=function(i,t,e){var n=e.offsetWidth*i,r=e.offsetHeight*i,a=(t.offsetWidth-n)/2,o=(t.offsetHeight-r)/2;return{scale:i,positionX:a,positionY:o}};function $e(i){return function(t){i.forEach(function(e){typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var qe=function(i,t){var e=i.setup.wheel,n=e.disabled,r=e.wheelDisabled,a=e.touchPadDisabled,o=e.excluded,s=i.isInitialized,l=i.isPanning,d=t.target,u=s&&!l&&!n&&d;if(!u||r&&!t.ctrlKey||a&&t.ctrlKey)return!1;var p=pi(d,o);return!p},Ge=function(i){return i?i.deltaY<0?1:-1:0};function Ue(i,t){var e=Ge(i),n=ue(t,e);return n}function Ki(i,t,e){var n=t.getBoundingClientRect(),r=0,a=0;if("clientX"in i)r=(i.clientX-n.left)/e,a=(i.clientY-n.top)/e;else{var o=i.touches[0];r=(o.clientX-n.left)/e,a=(o.clientY-n.top)/e}return(Number.isNaN(r)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:r,y:a}}var Je=function(i,t,e,n,r){var a=i.transformState.scale,o=i.wrapperComponent,s=i.setup,l=s.maxScale,d=s.minScale,u=s.zoomAnimation,p=s.disablePadding,f=u.size,v=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var h=a+t*e;if(r)return h;var g=n?!1:!v,P=ai(B(h,3),d,l,f,g&&!p);return P},Ie=function(i,t){var e=i.previousWheelEvent,n=i.transformState.scale,r=i.setup,a=r.maxScale,o=r.minScale;return e?n<a||n>o||Math.sign(e.deltaY)!==Math.sign(t.deltaY)||e.deltaY>0&&e.deltaY<t.deltaY||e.deltaY<0&&e.deltaY>t.deltaY||Math.sign(e.deltaY)!==Math.sign(t.deltaY):!1},en=function(i,t){var e=i.setup.pinch,n=e.disabled,r=e.excluded,a=i.isInitialized,o=t.target,s=a&&!n&&o;if(!s)return!1;var l=pi(o,r);return!l},nn=function(i){var t=i.setup.pinch.disabled,e=i.isInitialized,n=i.pinchStartDistance,r=e&&!t&&n;return!!r},tn=function(i,t,e){var n=e.getBoundingClientRect(),r=i.touches,a=B(r[0].clientX-n.left,5),o=B(r[0].clientY-n.top,5),s=B(r[1].clientX-n.left,5),l=B(r[1].clientY-n.top,5);return{x:(a+s)/2/t,y:(o+l)/2/t}},Qi=function(i){return Math.sqrt(Math.pow(i.touches[0].pageX-i.touches[1].pageX,2)+Math.pow(i.touches[0].pageY-i.touches[1].pageY,2))},rn=function(i,t){var e=i.pinchStartScale,n=i.pinchStartDistance,r=i.setup,a=r.maxScale,o=r.minScale,s=r.zoomAnimation,l=r.disablePadding,d=s.size,u=s.disabled;if(!e||n===null||!t)throw new Error("Pinch touches distance was not provided");if(t<0)return i.transformState.scale;var p=t/n,f=p*e;return ai(B(f,2),o,a,d,!u&&!l)},an=160,on=100,sn=function(i,t){var e=i.props,n=e.onWheelStart,r=e.onZoomStart;i.wheelStopEventTimer||(V(i),X(C(i),t,n),X(C(i),t,r))},ln=function(i,t){var e=i.props,n=e.onWheel,r=e.onZoom,a=i.contentComponent,o=i.setup,s=i.transformState,l=s.scale,d=o.limitToBounds,u=o.centerZoomedOut,p=o.zoomAnimation,f=o.wheel,v=o.disablePadding,h=o.smooth,g=p.size,P=p.disabled,A=f.step,w=f.smoothStep;if(!a)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var Y=Ue(t,null),O=h?w*Math.abs(t.deltaY):A,D=Je(i,Y,O,!t.ctrlKey);if(l!==D){var k=ei(i,D),j=Ki(t,a,l),N=P||g===0||u||v,L=d&&N,x=di(i,j.x,j.y,D,k,L),Z=x.x,R=x.y;i.previousWheelEvent=t,i.setTransformState(D,Z,R),X(C(i),t,n),X(C(i),t,r)}},un=function(i,t){var e=i.props,n=e.onWheelStop,r=e.onZoomStop;gi(i.wheelAnimationTimer),i.wheelAnimationTimer=setTimeout(function(){i.mounted&&(Li(i,t.x,t.y),i.wheelAnimationTimer=null)},on);var a=Ie(i,t);a&&(gi(i.wheelStopEventTimer),i.wheelStopEventTimer=setTimeout(function(){i.mounted&&(i.wheelStopEventTimer=null,X(C(i),t,n),X(C(i),t,r))},an))},$i=function(i){for(var t=0,e=0,n=0;n<2;n+=1)t+=i.touches[n].clientX,e+=i.touches[n].clientY;var r=t/2,a=e/2;return{x:r,y:a}},dn=function(i,t){var e=Qi(t);i.pinchStartDistance=e,i.lastDistance=e,i.pinchStartScale=i.transformState.scale,i.isPanning=!1;var n=$i(t);i.pinchLastCenterX=n.x,i.pinchLastCenterY=n.y,V(i)},pn=function(i,t){var e=i.contentComponent,n=i.pinchStartDistance,r=i.wrapperComponent,a=i.transformState.scale,o=i.setup,s=o.limitToBounds,l=o.centerZoomedOut,d=o.zoomAnimation,u=o.alignmentAnimation,p=d.disabled,f=d.size;if(!(n===null||!e)){var v=tn(t,a,e);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var h=Qi(t),g=rn(i,h),P=$i(t),A=P.x-(i.pinchLastCenterX||0),w=P.y-(i.pinchLastCenterY||0);if(!(g===a&&A===0&&w===0)){i.pinchLastCenterX=P.x,i.pinchLastCenterY=P.y;var Y=ei(i,g),O=p||f===0||l,D=s&&O,k=di(i,v.x,v.y,g,Y,D),j=k.x,N=k.y;i.pinchMidpoint=v,i.lastDistance=h;var L=u.sizeX,x=u.sizeY,Z=$(i,L),R=$(i,x),J=j+A,ni=N+w,I=ri(J,ni,Y,s,Z,R,r),H=I.x,ii=I.y;i.setTransformState(g,H,ii)}}}},fn=function(i){var t=i.pinchMidpoint;i.velocity=null,i.lastDistance=null,i.pinchMidpoint=null,i.pinchStartScale=null,i.pinchStartDistance=null,Li(i,t==null?void 0:t.x,t==null?void 0:t.y)},qi=function(i,t){var e=i.props.onZoomStop,n=i.setup.doubleClick.animationTime;gi(i.doubleClickStopEventTimer),i.doubleClickStopEventTimer=setTimeout(function(){i.doubleClickStopEventTimer=null,X(C(i),t,e)},n)},vn=function(i,t){var e=i.props,n=e.onZoomStart,r=e.onZoom,a=i.setup.doubleClick,o=a.animationTime,s=a.animationType;X(C(i),t,n),Vi(i,o,s,function(){return X(C(i),t,r)}),qi(i,t)};function mn(i,t){return i==="toggle"?t===1?1:-1:i==="zoomOut"?-1:1}function cn(i,t){var e=i.setup,n=i.doubleClickStopEventTimer,r=i.transformState,a=i.contentComponent,o=r.scale,s=i.props,l=s.onZoomStart,d=s.onZoom,u=e.doubleClick,p=u.disabled,f=u.mode,v=u.step,h=u.animationTime,g=u.animationType;if(!p&&!n){if(f==="reset")return vn(i,t);if(!a)return console.error("No ContentComponent found");var P=mn(f,i.transformState.scale),A=Hi(i,P,v);if(o!==A){X(C(i),t,l);var w=Ki(t,a,o),Y=wi(i,A,w.x,w.y);if(!Y)return console.error("Error during zoom event. New transformation state was not calculated.");X(C(i),t,d),q(i,Y,h,g),qi(i,t)}}}var hn=function(i,t){var e=i.isInitialized,n=i.setup,r=i.wrapperComponent,a=n.doubleClick,o=a.disabled,s=a.excluded,l=t.target,d=r==null?void 0:r.contains(l),u=e&&l&&d&&!o;if(!u)return!1;var p=pi(l,s);return!p},gn=function(){function i(t){var e=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){e.initializeWindowEvents()},this.unmount=function(){e.cleanupWindowEvents()},this.update=function(n){e.props=n,ei(e,e.transformState.scale),e.setup=Ei(n)},this.initializeWindowEvents=function(){var n,r,a=vi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;(r=e.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",e.onWheelPanning,a),s==null||s.addEventListener("mousedown",e.onPanningStart,a),s==null||s.addEventListener("mousemove",e.onPanning,a),s==null||s.addEventListener("mouseup",e.onPanningStop,a),o==null||o.addEventListener("mouseleave",e.clearPanning,a),s==null||s.addEventListener("keyup",e.setKeyUnPressed,a),s==null||s.addEventListener("keydown",e.setKeyPressed,a)},this.cleanupWindowEvents=function(){var n,r,a=vi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;s==null||s.removeEventListener("mousedown",e.onPanningStart,a),s==null||s.removeEventListener("mousemove",e.onPanning,a),s==null||s.removeEventListener("mouseup",e.onPanningStop,a),o==null||o.removeEventListener("mouseleave",e.clearPanning,a),s==null||s.removeEventListener("keyup",e.setKeyUnPressed,a),s==null||s.removeEventListener("keydown",e.setKeyPressed,a),document.removeEventListener("mouseleave",e.clearPanning,a),V(e),(r=e.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(n){var r=vi();n.addEventListener("wheel",e.onWheelZoom,r),n.addEventListener("dblclick",e.onDoubleClick,r),n.addEventListener("touchstart",e.onTouchPanningStart,r),n.addEventListener("touchmove",e.onTouchPanning,r),n.addEventListener("touchend",e.onTouchPanningStop,r)},this.handleInitialize=function(n){var r=e.setup.centerOnInit;e.applyTransformation(),e.onInitCallbacks.forEach(function(a){return a(C(e))}),r&&(e.setCenter(),e.observer=new ResizeObserver(function(){var a,o=n.offsetWidth,s=n.offsetHeight;(o>0||s>0)&&(e.onInitCallbacks.forEach(function(l){return l(C(e))}),e.setCenter(),(a=e.observer)===null||a===void 0||a.disconnect())}),setTimeout(function(){var a;(a=e.observer)===null||a===void 0||a.disconnect()},5e3),e.observer.observe(n))},this.onWheelZoom=function(n){var r=e.setup.disabled;if(!r){var a=qe(e,n);if(a){var o=e.isPressingKeys(e.setup.wheel.activationKeys);o&&(sn(e,n),ln(e,n),un(e,n))}}},this.onWheelPanning=function(n){var r=e.setup,a=r.disabled,o=r.wheel,s=r.panning;if(!(!e.wrapperComponent||!e.contentComponent||a||!o.wheelDisabled||s.disabled||!s.wheelPanning||n.ctrlKey)){n.preventDefault(),n.stopPropagation();var l=e.transformState,d=l.positionX,u=l.positionY,p=d-n.deltaX,f=u-n.deltaY,v=s.lockAxisX?d:p,h=s.lockAxisY?u:f,g=e.setup.alignmentAnimation,P=g.sizeX,A=g.sizeY,w=$(e,P),Y=$(e,A);v===d&&h===u||Ni(e,v,h,w,Y)}},this.onPanningStart=function(n){var r=e.setup.disabled,a=e.props.onPanningStart;if(!r){var o=Ti(e,n);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.button===0&&!e.setup.panning.allowLeftClickPan||n.button===1&&!e.setup.panning.allowMiddleClickPan||n.button===2&&!e.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),V(e),_i(e,n),X(C(e),n,a)))}}},this.onPanning=function(n){var r=e.setup.disabled,a=e.props.onPanning;if(!r){var o=Yi(e);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.preventDefault(),n.stopPropagation(),Ai(e,n.clientX,n.clientY),X(C(e),n,a))}}},this.onPanningStop=function(n){var r=e.props.onPanningStop;e.isPanning&&(ke(e),X(C(e),n,r))},this.onPinchStart=function(n){var r=e.setup.disabled,a=e.props,o=a.onPinchingStart,s=a.onZoomStart;if(!r){var l=en(e,n);l&&(dn(e,n),V(e),X(C(e),n,o),X(C(e),n,s))}},this.onPinch=function(n){var r=e.setup.disabled,a=e.props,o=a.onPinching,s=a.onZoom;if(!r){var l=nn(e);l&&(n.preventDefault(),n.stopPropagation(),pn(e,n),X(C(e),n,o),X(C(e),n,s))}},this.onPinchStop=function(n){var r=e.props,a=r.onPinchingStop,o=r.onZoomStop;e.pinchStartScale&&(fn(e),X(C(e),n,a),X(C(e),n,o))},this.onTouchPanningStart=function(n){var r=e.setup.disabled,a=e.props.onPanningStart;if(!r){var o=Ti(e,n);if(o){var s=e.lastTouch&&+new Date-e.lastTouch<200;if(!s){e.lastTouch=+new Date,V(e);var l=n.touches,d=l.length===1,u=l.length===2;d&&(V(e),_i(e,n),X(C(e),n,a)),u&&e.onPinchStart(n)}}}},this.onTouchPanning=function(n){var r=e.setup.disabled,a=e.props.onPanning;if(e.isPanning&&n.touches.length===1){if(r)return;var o=Yi(e);if(!o)return;n.preventDefault(),n.stopPropagation();var s=n.touches[0];Ai(e,s.clientX,s.clientY),X(C(e),n,a)}else n.touches.length>1&&e.onPinch(n)},this.onTouchPanningStop=function(n){e.onPanningStop(n),e.onPinchStop(n)},this.onDoubleClick=function(n){var r=e.setup.disabled;if(!r){var a=hn(e,n);a&&cn(e,n)}},this.clearPanning=function(n){e.isPanning&&e.onPanningStop(n)},this.setKeyPressed=function(n){e.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){e.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(r){return e.pressedKeys[r]}):!0},this.setTransformState=function(n,r,a){var o=e.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(r)&&!Number.isNaN(a)){n!==e.transformState.scale&&(e.transformState.previousScale=e.transformState.scale,e.transformState.scale=n),e.transformState.positionX=r,e.transformState.positionY=a,e.applyTransformation();var s=C(e);e.onChangeCallbacks.forEach(function(l){return l(s)}),X(s,{scale:n,positionX:r,positionY:a},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(e.wrapperComponent&&e.contentComponent){var n=Ri(e.transformState.scale,e.wrapperComponent,e.contentComponent);e.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,r,a){return e.props.customTransform?e.props.customTransform(n,r,a):Qe(n,r,a)},this.applyTransformation=function(){if(!(!e.mounted||!e.contentComponent)){var n=e.transformState,r=n.scale,a=n.positionX,o=n.positionY,s=e.handleTransformStyles(a,o,r);e.contentComponent.style.transform=s}},this.getContext=function(){return C(e)},this.onChange=function(n){return e.onChangeCallbacks.has(n)||e.onChangeCallbacks.add(n),function(){e.onChangeCallbacks.delete(n)}},this.onInit=function(n){return e.onInitCallbacks.has(n)||e.onInitCallbacks.add(n),function(){e.onInitCallbacks.delete(n)}},this.init=function(n,r){e.cleanupWindowEvents(),e.wrapperComponent=n,e.contentComponent=r,ei(e,e.transformState.scale),e.handleInitializeWrapperEvents(n),e.handleInitialize(r),e.initializeWindowEvents(),e.isInitialized=!0;var a=C(e);X(a,void 0,e.props.onInit)},this.props=t,this.setup=Ei(this.props),this.transformState=Zi(this.props)}return i}(),yi=W.createContext(null),Sn=function(i,t){return typeof i=="function"?i(t):i},wn=W.forwardRef(function(i,t){var e=T.useRef(new gn(i)).current,n=Sn(i.children,hi(e));return T.useImperativeHandle(t,function(){return hi(e)},[e]),T.useEffect(function(){e.update(i)},[e,i]),W.createElement(yi.Provider,{value:e},n)});W.forwardRef(function(i,t){var e=T.useRef(null),n=T.useContext(yi);return T.useEffect(function(){return n.onChange(function(r){if(e.current){var a=0,o=0;e.current.style.transform=n.handleTransformStyles(a,o,1/r.instance.transformState.scale)}})},[n]),W.createElement("div",Q({},i,{ref:$e([e,t])}))});function yn(i,t){t===void 0&&(t={});var e=t.insertAt;if(!(!i||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var bn=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,xi={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};yn(bn);var Pn=function(i){var t=i.children,e=i.wrapperClass,n=e===void 0?"":e,r=i.contentClass,a=r===void 0?"":r,o=i.wrapperStyle,s=i.contentStyle,l=i.wrapperProps,d=l===void 0?{}:l,u=i.contentProps,p=u===void 0?{}:u,f=T.useContext(yi),v=f.init,h=f.cleanupWindowEvents,g=T.useRef(null),P=T.useRef(null);return T.useEffect(function(){var A=g.current,w=P.current;return A!==null&&w!==null&&v&&(v==null||v(A,w)),function(){h==null||h()}},[]),W.createElement("div",Q({},d,{ref:g,className:"".concat(ci.wrapperClass," ").concat(xi.wrapper," ").concat(n),style:o}),W.createElement("div",Q({},p,{ref:P,className:"".concat(ci.contentClass," ").concat(xi.content," ").concat(a),style:s}),t))};const Cn=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),Tn=E("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"205px",h:"70px",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",gap:"5px",justify:"center",color:"#828282"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),Yn=E("div",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",mt:"10px",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%"}),Xn=E("div",{d:"grid",gap:"10px",gridTemplateAreas:`
    "filters destination"
    "team team"
  `,px:"20px",pb:"10px",w:"100%","@sm":{}}),_n=E("div",{d:"flex",gridArea:"filters",gap:"10px"}),An=E("div",{d:"flex",align:"center",justify:"flex-end",gridArea:"destination",gap:"2px"}),zn=E("div",{d:"flex",bg:"rgba(255, 225, 225, 0.05)",padding:"2px 3px",img:{w:"40px"},variants:{disabled:{true:{opacity:.7,filter:"grayscale(100%)"}}}});E("div",{d:"block",gridArea:"destination",w:"max-content",ml:"auto",p:{textAlign:"right",fs:"24px",ff:"$heading",color:"#fff",textTransform:"capitalize","&:not(:first-child)":{fs:"14px"}},"@sm":{p:{fs:"14px","&:not(:first-child)":{fs:"10px",color:"#8A8A8A"}}}});E("div",{d:"flex",gridArea:"team",w:"max-content",ml:"auto",">div":{ml:"5px","&:nth-child(3)":{ml:"25px"}},"@sm":{}});E("div",{d:"flex",align:"center",gap:"5px",direction:"column",img:{w:"35px",h:"35px"},span:{fs:"12px",ff:"$heading",color:"#A6A6A6"},"@sm":{}});const En=E("div",{d:"flex",w:"100%",px:"10px",".react-transform-wrapper":{maxH:"calc(100vh - 250px)"},"@sm":{".react-transform-wrapper":{maxH:"calc(100vh - 190px)"}},"@media (max-width: 768px) and (max-height: 500px)":{".react-transform-wrapper":{maxH:"calc(100vh)"}}}),xn=E("div",{d:"flex",w:"1420px",h:"710px",position:"relative",img:{w:"1420px",h:"710px"}}),Dn=E("button",{d:"flex",align:"center",justify:"center",position:"absolute",border:"1px solid rgba(0,0,0,0.6)",zIndex:1,w:"35.5px",h:"35.5px",svg:{w:"20px",h:"20px"},variants:{isSelected:{true:{bg:"rgba(0, 186, 255, 0.58)"}},type:{miningEvent:{zIndex:2},portal:{zIndex:2}}}});E("div",{d:"flex",align:"center",flexWrap:"wrap",gap:"20px",mt:"10px",pl:"20px",w:"100%"});E("div",{d:"flex",align:"center",justify:"center",gap:"5px",color:"#fff",ff:"$heading",fs:"10px",svg:{w:"17px",h:"17px"},"&:nth-child(1)":{fill:"#80FF00"},"&:nth-child(2)":{fill:"#EB094D"},"&:nth-child(3)":{fill:"#FFB800"}});const Wn=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",textTransform:"capitalize",padding:"2px 5px",bg:"#333333",color:"#fff",ff:"$heading",fs:"10px",br:"5px"}}),On=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fw:900,ff:"$heading",fs:"16px",br:"5px","-webkit-text-stroke":"1px #000"}}),jn=i=>{const t=new Date(new Date().toUTCString().substring(0,25)),e=+i-+t;let n={days:0,hours:0,minutes:0,seconds:0};return e>0&&(n={days:Math.floor(e/(1e3*60*60)/24),hours:Math.floor(e/(1e3*60*60)%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}),{...n,difference:e}},Bn=i=>{if(i&&((i==null?void 0:i.seconds)>0||(i==null?void 0:i.minutes)>0||(i==null?void 0:i.hours)>0)){const t=i.hours>0?`${i.hours>9?`${i.hours}:`:`0${i.hours}:`}`:"",e=i.minutes>0?`${i.minutes>9?i.minutes:`0${i.minutes}`}`:"00",n=i.seconds>9?i.seconds:`0${i.seconds}`;return`${t}${e}:${n}`}return"MINE"};async function kn(i,t,e){const{executeTransaction:n}=te(),r=Nn(i,t,e);return!!await n(r)}function Nn(i,t,e){return{actions:[{account:Ji.playersAle,name:"travel",authorization:[{actor:i.name,permission:i.authorization.permission}],data:{wallet:i.name,x:t,y:e}}]}}const Mn=Ii((i,t)=>({areaSelected:null,setAreaSelected:e=>i({areaSelected:e})})),Ln=i=>ae({queryKey:[ie.playerDataState,i],queryFn:()=>Zn(i),staleTime:1e3*60*20,enabled:!!Oi.getState().user});async function Zn(i){try{const t=await ee(i);return t||null}catch(t){return console.log(t),null}}const Di=W.lazy(()=>U(()=>import("./index-6e143d94.js"),["assets/index-6e143d94.js","assets/index-54c37fb5.js","assets/index-55fec1ff.css"])),Wi=W.lazy(()=>U(()=>import("./index-16fa1407.js"),["assets/index-16fa1407.js","assets/index-54c37fb5.js","assets/index-55fec1ff.css","assets/index-ba540326.js","assets/iconBase-1d26a5ab.js"])),Hn=W.lazy(()=>U(()=>import("./box-gloves-3cd8279e.js"),["assets/box-gloves-3cd8279e.js","assets/index-54c37fb5.js","assets/index-55fec1ff.css"])),Fn=W.lazy(()=>U(()=>import("./travel-arrow-93e88bfc.js"),["assets/travel-arrow-93e88bfc.js","assets/index-54c37fb5.js","assets/index-55fec1ff.css"])),Vn=W.lazy(()=>U(()=>import("./portal-d8cd4cd9.js"),["assets/portal-d8cd4cd9.js","assets/index-54c37fb5.js","assets/index-55fec1ff.css"])),Rn=W.lazy(()=>U(()=>import("./index-8fb801c5.js"),["assets/index-8fb801c5.js","assets/index-54c37fb5.js","assets/index-55fec1ff.css"])),Kn=W.lazy(()=>U(()=>import("./index-2797b7a8.js"),["assets/index-2797b7a8.js","assets/index-54c37fb5.js","assets/index-55fec1ff.css","assets/inventory-query-29f2584b.js","assets/useQuery-02dce8f0.js","assets/atomic-api-d625bb22.js","assets/toast-options-587c6c59.js","assets/use-transaction-26def561.js","assets/sleep-da79c358.js","assets/constants-06470205.js"])),Qn=()=>{var ii;const{areaSelected:i,setAreaSelected:t}=Mn(),{user:e,updatePlayerData:n,updateLandsData:r}=Oi(),a=T.useRef(null),[o,s]=T.useState([]),[l,d]=T.useState([]),[u,p]=T.useState(null),[f,v]=T.useState(8),[h,g]=T.useState(0),[P,A]=T.useState(!1),[w,Y]=T.useState({label:e!=null&&e.planet?e.planet.charAt(0).toUpperCase()+e.planet.slice(1):"",value:(e==null?void 0:e.planet)||""}),[O,D]=T.useState([]),[k,j]=T.useState(O),[N,L]=T.useState([]),{data:x}=Ln((w==null?void 0:w.value)||""),Z=T.useCallback(()=>{var K,M,G,oi;if(!e)return null;const m=((K=x==null?void 0:x.filter(z=>!!z.special_effect))==null?void 0:K.map(z=>({x:z.x-1,y:z.y-1,type:"portal",text:z.special_effect.slice(2,1/0)})))||[],y=((G=(M=e.active_taverns)==null?void 0:M.filter(z=>z.planet===(w==null?void 0:w.value)))==null?void 0:G.map(z=>({x:z.x-1,y:z.y-1,type:"tavern"})))||[],_=[...m,...y],S=_.reduce((z,F)=>(z.some(({value:si})=>si===F.type)||z.push({label:F.type.charAt(0).toUpperCase()+F.type.slice(1),value:F.type}),z),[]),b=(oi=(x==null?void 0:x.filter(z=>{var F;return!!((F=z.buildings)!=null&&F.length)}))||[])==null?void 0:oi.flatMap(z=>z.buildings);L(b),D(S),j(S),d(_)},[e,x,w]);T.useEffect(()=>{const y=1420/Ci,_=[];for(let S=0;S<Ci;S++){_[S]=[];for(let b=0;b<oe;b++)_[S][b]={x:S*y,y:b*y}}s(_),Z()},[Z]);function R(m,y){switch(y){case"arena":return c.jsxs("svg",{fill:"rgba(235, 9, 77, 0.67)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"youControl":return c.jsxs("svg",{fill:"rgba(173, 255, 0, 0.65)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"miningEvent":return c.jsxs(On,{children:[c.jsx("span",{children:m}),c.jsxs("svg",{fill:"#FFB800",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490 490",children:[c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m}),c.jsx("polygon",{points:"245,456.701 490,33.299 0,33.299 "})]})]});case"portal":return c.jsxs(Wn,{children:[c.jsx("span",{children:m}),c.jsx(Vn,{})]});case"flag":return c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999,width:"14px",height:"14px"},children:[c.jsx("circle",{cx:"11",cy:"11",r:"11",fill:"#DB4447"}),c.jsx("circle",{cx:"11",cy:"11",r:"9",fill:"#141423"}),c.jsx("circle",{cx:"11",cy:"11",r:"7",fill:"#DB4447"})]});case"tavern":return c.jsx("div",{children:c.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{width:"17.6777",height:"17.6777",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 0 12.5)",fill:"#FFB800"}),c.jsx("rect",{width:"12.8565",height:"12.8565",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 3.37476 12.5)",fill:"#141423"}),c.jsx("rect",{width:"8.03534",height:"8.03534",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 6.83008 12.5)",fill:"#FFB800"})]})});default:return null}}function J(m){if(!e)return;if((u==null?void 0:u.x)===m.clientX&&(u==null?void 0:u.y)===m.clientY){p(null);return}if(p({x:m.clientX,y:m.clientY,type:m.type}),e.mapX===m.clientX&&e.mapY===m.clientY){g(0);return}const y=Math.sqrt(Math.pow(e.mapX-m.clientX,2)+Math.pow(e.mapY-m.clientY,2)),_=Math.ceil(y);g(_)}function ni(){if(!e)return;const m={x:e.x,y:e.y,type:(H==null?void 0:H.type)||""};if(m.type==="tavern"){const y=(e==null?void 0:e.active_taverns.find(({x:_,y:S})=>_===m.x&&S===m.y))||{};t({...m,...y})}}async function I(){try{if(A(!0),!e||!u||!await kn(e,(u==null?void 0:u.x)+1||0,(u==null?void 0:u.y)+1||0))return;await re(2e3),p(null),g(0);const y=await n();await r(),y!=null&&y.planet&&Y({label:y.planet.charAt(0).toUpperCase()+y.planet.slice(1),value:y.planet}),ne.success("Travel successful")}catch(m){console.error(m)}finally{A(!1)}}const H=T.useMemo(()=>l.find(({x:m,y})=>(e==null?void 0:e.mapX)===m&&(e==null?void 0:e.mapY)===y),[l,e]);return T.useEffect(()=>{const m=setInterval(()=>{var _;const y=(_=l==null?void 0:l.filter(S=>(S==null?void 0:S.formattedTimeLeft)!=="MINE"))==null?void 0:_.map(S=>{if(S.type==="miningEvent"&&(S==null?void 0:S.formattedTimeLeft)!=="MINE"&&(S!=null&&S.expirationDate)){const b=jn(S==null?void 0:S.expirationDate);return{...S,formattedTimeLeft:Bn(b),mineTime:b}}return S});d(y)},1e3);return()=>clearInterval(m)},[l]),(i==null?void 0:i.type)==="arena"?c.jsx(Rn,{}):(i==null?void 0:i.type)==="tavern"?c.jsx(Kn,{}):c.jsxs(Cn,{children:[c.jsxs(Tn,{children:[l.some(({x:m,y})=>(e==null?void 0:e.mapX)===m&&(e==null?void 0:e.mapY)===y)&&c.jsx(Di,{color:"black",onClick:ni,icon:Hn,children:(H==null?void 0:H.type)==="tavern"?"Enter Tavern":"Enter Arena"}),c.jsxs(Di,{isLoading:P,disabled:w.value!==(e==null?void 0:e.planet)||!u||!h||h>(((ii=e==null?void 0:e.activestats)==null?void 0:ii.action_points)||0)||P,color:"black",onClick:I,icon:Fn,children:["Travel",w.value===(e==null?void 0:e.planet)&&c.jsxs("span",{children:["- ",h,c.jsx("img",{loading:"lazy",src:"/assets/icons/potion.png",alt:""})]})]})]}),c.jsxs(Yn,{ref:a,children:[c.jsxs(Xn,{children:[c.jsxs(_n,{children:[c.jsx(Wi,{options:se,selected:w,onSelected:m=>Y(m)}),c.jsx(Wi,{title:"Select a filter",onMultipleSelected:m=>j(m),isMultipleItems:!0,multiplesSelected:k,options:O})]}),c.jsx(An,{children:le.map((m,y)=>c.jsx(zn,{disabled:!(N!=null&&N.some(_=>_.building_name===m.name.toLowerCase())),children:c.jsx("img",{loading:"lazy",src:`/assets/buildings/${m.img}.png`,alt:m.name,title:m.name})},y))})]}),(e==null?void 0:e.playerLand)&&c.jsx(En,{children:c.jsx(wn,{disablePadding:!0,initialScale:1,maxScale:2,doubleClick:{step:f},onPanningStop:m=>{m.state.scale!==1?v(-8):v(8)},children:c.jsx(Pn,{children:c.jsxs(xn,{children:[c.jsx("img",{loading:"lazy",src:`/assets/maps/${w==null?void 0:w.value}.jpg`,alt:""}),o.map((m,y)=>m.map((_,S)=>{var K;const b=(K=l==null?void 0:l.filter(M=>k.some(G=>G.value!=="mixed"?G.value===M.type:!0)))==null?void 0:K.find(M=>M.x===y&&M.y===S);return c.jsxs(Dn,{onClick:()=>J({clientX:y,clientY:S,type:(b==null?void 0:b.type)||""}),isSelected:(u==null?void 0:u.x)===y&&(u==null?void 0:u.y)===S,type:(b==null?void 0:b.type)||"empty",style:{top:_.y,left:_.x},children:[!!b&&R((b==null?void 0:b.formattedTimeLeft)||(b==null?void 0:b.number)||(b==null?void 0:b.text)||"",(b==null?void 0:b.type)||""),e.planet===w.value&&e.mapX===y&&e.mapY===S&&R("","flag")]},_.x+_.y)}))]})})})})]})]})},In=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));export{In as i,Mn as u};

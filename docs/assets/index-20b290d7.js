import{s as styled,f as ee,v as rpc,S as SMART_CONTRACTS,t as TABLES,e as QUERY_KEYS,u as useAuthStore,g as getTable,R as React,j as jsxRuntimeExports,_ as __vitePreload,b as useMapStore,r as reactExports,Q}from"./index-9a1d8aef.js";import{u as useInventoryQuery}from"./inventory-query-9f535b90.js";import{u as useQuery}from"./useQuery-e3635f16.js";import{u as useTransaction}from"./use-transaction-020c76e2.js";import{s as sleep}from"./sleep-da79c358.js";import{u as useMedia}from"./use-media-dac2e485.js";import{o as onRefetchFighters}from"./fighters-query-899b7e73.js";import InventoryCard$1 from"./index-97f06f62.js";import"./atomic-api-a8ace563.js";import"./toast-options-3550ec67.js";const Wrapper=styled("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),Header=styled("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{d:"flex",align:"center",justify:"center",maxW:"188px",h:"70px",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",justify:"center",gap:"5px",color:"#828282"},img:{maxW:"35px",maxH:"30px"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),ContentWrapper=styled("div",{d:"flex",align:"flex-start",justify:"center",gap:"10px",w:"100%",h:"calc(100vh - 160px)",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",">img":{mt:"10px",h:"calc(100vh - 160px)",br:"15px","@lg":{d:"none"}}}),Container=styled("div",{d:"grid",gridTemplateAreas:`
    "title title title"
    "objectivesLeft content objectivesRight"
    "objectivesLeft inventory objectivesRight"
    "objectivesLeft inventory objectivesRight"
    "objectivesLeft inventory objectivesRight"
  `,gridTemplateColumns:"1fr 5fr 1fr",gap:"20px",mt:"10px",padding:"15px 10px",bg:"#141423",br:"15px",w:"100%",h:"100%","@sm":{gridTemplateAreas:`
    "title title title"
    "content content content"
    "objectivesLeft objectivesLeft objectivesLeft"
    "objectivesRight objectivesRight objectivesRight"
    "inventory inventory inventory"
  `},variants:{isHidden:{true:{"@sm":{display:"none"}}}}});styled("div",{d:"grid",gridTemplateAreas:`
    "title title title"
    "objectivesLeft content objectivesRight"
    "objectivesLeft inventory objectivesRight"
  `,gridTemplateColumns:"1fr 5fr 1fr",gap:"20px",mt:"10px",padding:"15px 10px",bg:"#141423",br:"15px",w:"100%","@sm":{gridTemplateAreas:`
    "title title title"
    "content content content"
    "objectivesLeft objectivesLeft objectivesLeft"
    "objectivesRight objectivesRight objectivesRight"
    "inventory inventory inventory"
  `},variants:{isHidden:{true:{"@sm":{display:"none"}}}}});const Title=styled("h2",{gridArea:"title",w:"100%",textAlign:"center",textTransform:"capitalize",fs:"24px",color:"#fff"}),Content=styled("div",{gridArea:"content",display:"flex",alignItems:"flex-start",justifyContent:"center",gap:"35px",w:"100%",">img":{w:"135px",h:"195px",br:"10px",objectPosition:"top",objectFit:"cover"},"@sm":{gap:"10px",img:{maxW:"85px"}},"@xsm":{gap:"5px",img:{maxW:"65px"}}}),CardContainer=styled("div",{gridArea:"content",img:{"&:hover":{transform:"scale(1.05)",zIndex:"4","-webkit-filter":"drop-shadow(0px 0px 8px #00BAFF)",filter:"drop-shadow(0px 0px 5px #00BAFF)"},"&:nth-of-type(1)":{transform:"translate(30px,20px) rotate(-20deg)",zIndex:"3","&:hover":{transform:"scale(1.05) translate(30px,20px) rotate(-20deg)",zIndex:"4"}},"&:nth-of-type(3)":{transform:"translate(-30px,20px) rotate(20deg)",zIndex:"1","&:hover":{transform:"scale(1.05) translate(-30px,20px) rotate(20deg)",zIndex:"4"}},"@sm":{"&:nth-of-type(1)":{transform:"translate(20px,9px) rotate(-20deg)",zIndex:"3","&:hover":{transform:"scale(1.05) translate(20px,9px) rotate(-20deg)",zIndex:"4"}},"&:nth-of-type(3)":{transform:"translate(-20px,9px) rotate(20deg)",zIndex:"1","&:hover":{transform:"scale(1.05) translate(-20px,9px) rotate(20deg)",zIndex:"4"}}}},variants:{cardSelected:{0:{img:{"&:nth-of-type(1)":{zIndex:"3"},"&:nth-of-type(2)":{opacity:"0.2"},"&:nth-of-type(3)":{opacity:"0.2"}}},1:{img:{"&:nth-of-type(1)":{opacity:"0.2"},"&:nth-of-type(2)":{},"&:nth-of-type(3)":{opacity:"0.2"}}},2:{img:{"&:nth-of-type(1)":{opacity:"0.2"},"&:nth-of-type(2)":{opacity:"0.2"},"&:nth-of-type(3)":{}}}}}});styled("img",{cursor:"pointer",transition:"all 0.2s ease-in-out",w:"120px",h:"170px",zIndex:"2",variants:{isSelected:{true:{filter:"grayscale(100%)"}}},"@lg":{w:"100px",h:"150px"},"@sm":{width:"80px",height:"initial"},"@xsm":{width:"70px",height:"initial"}});const shimmer=ee({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),CardLoading=styled("div",{w:"120px",h:"170px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${shimmer} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}}),getTavernTemplateTable=async()=>{var n,i;let e=!1,t;const s=[];for(;!e;){const r=await rpc.get_table_rows({code:SMART_CONTRACTS.ADVENTURE_MC,index_position:1,limit:"10000",scope:SMART_CONTRACTS.ADVENTURE_MC,table:TABLES.ADV_TEMPLATES,show_payer:!1,json:!0,lower_bound:t});e=!r.more,s.push(...r.rows.slice(0,-1)),t=((i=(n=r.rows)==null?void 0:n[r.rows.length-1])==null?void 0:i.templateid)??""}return s},useTavernTemplateQuery=()=>useQuery({queryKey:[QUERY_KEYS.tavernDataState],queryFn:()=>onFetch$1(),staleTime:1e3*60*60,enabled:!!useAuthStore.getState().user});async function onFetch$1(){try{const e=await getTavernTemplateTable();return e?formattedTemplateData(e):null}catch(e){return console.log(e),null}}function formattedTemplateData(e){return e.map(t=>({...t,"nft.mp":t.nft_mp,"tlm.mp":t.tlm_mp}))}const getTavernConfigTable=async()=>await getTable({options:{code:SMART_CONTRACTS.tavernAle,index_position:1,limit:"1000",scope:SMART_CONTRACTS.tavernAle,table:TABLES.CONFIG}}),useTavernConfigQuery=()=>useQuery({queryKey:[QUERY_KEYS.tavernConfigState],queryFn:()=>onFetch(),staleTime:1e3*60*60,enabled:!!useAuthStore.getState().user});async function onFetch(){try{const e=await getTavernConfigTable();return e||null}catch(e){return console.log(e),null}}async function executeRevealContract(e,t){const{executeTransaction:s}=useTransaction(),n=buildTransaction$1(e,t);return!!await s(n)}function buildTransaction$1(e,t){return{actions:[{account:SMART_CONTRACTS.tavernAle,name:"reveal",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,use_gems:t}}]}}async function executeHireContract(e,t,s){const{executeTransaction:n}=useTransaction(),i=buildTransaction(e,t,s);return!!await n(i)}function buildTransaction(e,t,s){return{actions:[{account:SMART_CONTRACTS.playersAle,name:"hire",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,asset_ids:t,cost_action_points:s}}]}}const InventoryContainer$1=styled("div",{gridArea:"inventory",display:"flex",direction:"column",w:"100%",span:{ff:"$heading",fs:"16px",fw:"bold",color:"#fff",textAlign:"center"},"@sm":{mt:"0px"}}),Tabs=styled("div",{d:"flex",align:"center",justify:"center",gap:"20px",mb:"20px","@sm":{m:"0px 0 20px",gap:"10px"}}),ButtonTabs=styled("button",{d:"flex",align:"center",justify:"center",fs:"20px",ff:"$heading",fw:"$bold",color:"$white500",variants:{isSelected:{true:{textUnderlineOffset:"0.5em",textDecoration:"underline"}}},"@sm":{fs:"14px"}}),InventoryCards=styled("div",{d:"flex",flexWrap:"wrap",gap:"10px",overflow:"auto",w:"100%",maxH:"calc(100vh - 520px)"}),CardImage=styled("img",{cursor:"pointer",transition:"all 0.2s ease-in-out",w:"120px",h:"170px",zIndex:"2",variants:{isSelected:{true:{filter:"grayscale(100%)"}}},"@lg":{w:"100px",h:"150px"},"@sm":{width:"80px",height:"initial"},"@xsm":{width:"70px",height:"initial"}}),INVENTORY_TABS=[{key:"crew.worlds",label:"Minions"},{key:"arms.worlds",label:"Weapons"},{key:"tool.worlds",label:"Tools"},{key:"level.worlds",label:"Levels"},{key:"faces.worlds",label:"Avatars"}],InventoryContainer=React.memo(({isInventoryLoading:e,filteredInventory:t,handleSelectCard:s,selectedCards:n,inventoryPosition:i,inventoryFilter:r,setInventoryFilter:a})=>jsxRuntimeExports.jsx(InventoryContainer$1,{children:n.length!==0&&i===-1?jsxRuntimeExports.jsx("span",{children:"Select a card"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Tabs,{children:INVENTORY_TABS.map(o=>jsxRuntimeExports.jsx(ButtonTabs,{isSelected:r===o.key,onClick:()=>a(o.key),children:o.label},o.key))}),jsxRuntimeExports.jsx(InventoryCards,{children:e?Array.from({length:10}).map((o,l)=>jsxRuntimeExports.jsx(CardLoading,{},l)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CardImage,{onClick:()=>s(void 0),src:"/assets/default-card.png",alt:"default card"}),t==null?void 0:t.map(o=>jsxRuntimeExports.jsx(InventoryCard$1,{item:o,isSelected:n.some(l=>(l==null?void 0:l.asset_id)===(o==null?void 0:o.asset_id)),onClick:()=>s(o)},o.asset_id))]})})]})}));InventoryContainer.displayName="InventoryContainer";const ObjectivesContainer$1=styled("div",{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"5px",mb:"auto",w:"100%","&.left":{gridArea:"objectivesLeft"},"&.right":{gridArea:"objectivesRight"},"@sm":{flexDirection:"row"}}),Objective=styled("div",{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",w:"100%",maxW:"82px",h:"85px",padding:"5px 0px 0px",bg:"#358CAC",br:"3px",span:{color:"#fff",ff:"$heading",fs:"10px","&:first-child":{fontWeight:"bold",color:"#07445A",mb:"12px"}},variants:{disabled:{true:{bg:"#7e7e7eff","span:first-child":{color:"#fff"},"span:last-child":{color:"#afafafff"},">div":{bg:"#505050ff",">img":{filter:"grayscale(100%)"}}}},isSelected:{true:{boxShadow:"0 0 10px 2px rgb(0, 186, 255)"}}}}),ObjectiveValue=styled("div",{display:"flex",alignItems:"center",gap:"5px",mt:"auto",padding:"5px 10px",color:"#fff",ff:"$heading",fs:"14px",br:"3px",bg:"#17566D",w:"100%",img:{w:"16px",objectFit:"contain"}});function formatObjectiveValue(e,t,s){return e==="tlm.mp"||e==="nft.mp"?(t/10).toFixed(1):s==="-"?t:s}const ObjectivesContainer=React.memo(({areaSelected:e,selectedBonus:t,orientation:s,selectedFilter:n,setSelectedFilter:i})=>{var l;const r=s==="left";function a({objective_string:u,objective_type:c,objective_value:x}){const d=formatObjectiveValue(c,x,u);if(n.some(p=>(p==null?void 0:p.type)===c&&p.value===d)){const p=n.filter(g=>g.value!==d||(g==null?void 0:g.type)!==c);i(p);return}i([...n,{type:c,value:d}])}function o({objective_string:u,objective_type:c,objective_value:x}){return!!n.find(d=>(d==null?void 0:d.type)===c&&d.value===formatObjectiveValue(c,x,u))}return jsxRuntimeExports.jsx(ObjectivesContainer$1,{className:s,children:(l=e==null?void 0:e.objectives)==null?void 0:l.slice(r?5:0,r?10:5).map(({objective_string:u,objective_type:c,objective_value:x,mod_value:d},p)=>jsxRuntimeExports.jsxs(Objective,{onClick:()=>a({objective_string:u,objective_type:c,objective_value:x}),disabled:!(t!=null&&t[p+(r?5:0)]),isSelected:o({objective_string:u,objective_type:c,objective_value:x}),children:[jsxRuntimeExports.jsx("span",{children:c}),jsxRuntimeExports.jsx("span",{children:u==="-"?x:u}),jsxRuntimeExports.jsxs(ObjectiveValue,{children:[d,jsxRuntimeExports.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]})]},p))})});ObjectivesContainer.displayName="ObjectivesContainer";const Button=React.lazy(()=>__vitePreload(()=>import("./index-e0aeaef3.js"),["assets/index-e0aeaef3.js","assets/index-9a1d8aef.js","assets/index-55fec1ff.css","assets/index-ea8a1aa6.js"])),FighterDetail=React.lazy(()=>__vitePreload(()=>import("./index-02b9935f.js"),["assets/index-02b9935f.js","assets/index-9a1d8aef.js","assets/index-55fec1ff.css","assets/config-query-4ffdd64a.js","assets/useQuery-e3635f16.js","assets/classtemps-query-56abce69.js","assets/resStats-2fa1b20e.js"])),FighterImage=React.lazy(()=>__vitePreload(()=>import("./index-6b05eea4.js"),["assets/index-6b05eea4.js","assets/index-9a1d8aef.js","assets/index-55fec1ff.css"])),InventoryCard=React.lazy(()=>__vitePreload(()=>import("./index-97f06f62.js"),["assets/index-97f06f62.js","assets/index-9a1d8aef.js","assets/index-55fec1ff.css"])),Tavern=()=>{const{setAreaSelected,areaSelected}=useMapStore(),{user,updatePlayerData,updateLandsData}=useAuthStore(),{isSmall}=useMedia(),[inventoryFilter,setInventoryFilter]=reactExports.useState("level.worlds"),[inventoryPosition,setInventoryPosition]=reactExports.useState(0),[selectedBonus,setSelectedBonus]=reactExports.useState({}),[selectedCards,setSelectedCards]=reactExports.useState([void 0,void 0,void 0]),[isRevealLoading,setIsRevealLoading]=reactExports.useState(!1),[isHireLoading,setIsHireLoading]=reactExports.useState(!1),[isFighterSelected,setIsFighterSelected]=reactExports.useState(!1),[isDetailReveled,setIsDetailReveled]=reactExports.useState(!1),[selectedFilter,setSelectedFilter]=reactExports.useState([]),{data:inventory,isLoading:isInventoryLoading}=useInventoryQuery(inventoryFilter),{data:tavernTemplate}=useTavernTemplateQuery(),{data:tavernConfig}=useTavernConfigQuery();function handleLeaveArena(){setAreaSelected(null)}function handleInventoryPosition(e){if(e===inventoryPosition){setInventoryPosition(-1);return}setInventoryPosition(e)}function handleSelectCard(e){if(!e){const s=selectedCards.map((n,i)=>{if(i!==inventoryPosition)return n});calculateTotalBonus(s),setInventoryPosition(inventoryPosition+1),setSelectedCards(s);return}if(selectedCards.some(s=>(s==null?void 0:s.asset_id)===(e==null?void 0:e.asset_id))){setInventoryPosition(-1);return}const t=selectedCards.map((s,n)=>n===inventoryPosition?e:s);calculateTotalBonus(t),setInventoryPosition(inventoryPosition+1),setSelectedCards(t),inventoryPosition===2&&setInventoryPosition(-1)}function calculateTotalBonus(e){let t={};e.forEach(s=>{const n=tavernTemplate==null?void 0:tavernTemplate.find(r=>(r==null?void 0:r.templateid)===Number(s==null?void 0:s.template.template_id));if(!n||!(areaSelected!=null&&areaSelected.objectives))return;const i=areaSelected.objectives.reduce((r,a,o)=>{if(a.objective_value!==99999&&a.objective_value===(n==null?void 0:n[a.objective_type])){const l=a==null?void 0:a.mod_value;return r[o]=l,r}if(a.objective_type==="element"&&(a.objective_string.toLocaleLowerCase()===(n==null?void 0:n.element.toLocaleLowerCase())||a.objective_string.toLocaleLowerCase()===(n==null?void 0:n.weaponclass.toLocaleLowerCase()))){const l=a==null?void 0:a.mod_value;return r[o]=l,r}if(a.objective_string!=="-"&&a.objective_string.toLocaleLowerCase()===String(n==null?void 0:n[a.objective_type]).toLocaleLowerCase()){const l=a==null?void 0:a.mod_value;return r[o]=l,r}return r},{});t={...t,...i}}),setSelectedBonus(t)}function showRevelCost(){var e,t,s,n,i,r;return!tavernConfig||!user?null:((e=user==null?void 0:user.activestats)==null?void 0:e.gems)>=((t=tavernConfig==null?void 0:tavernConfig[0])==null?void 0:t.cost_reveal_gem)?(s=tavernConfig==null?void 0:tavernConfig[0])==null?void 0:s.cost_reveal_gem:((n=user==null?void 0:user.activestats)==null?void 0:n.credits)>=((i=tavernConfig==null?void 0:tavernConfig[0])==null?void 0:i.cost_reveal_credits)?(r=tavernConfig==null?void 0:tavernConfig[0])==null?void 0:r.cost_reveal_credits:null}async function handleReveal(e){if(!e){setIsFighterSelected(!1),setIsDetailReveled(!1);return}if(tavernFighter){setIsFighterSelected(!0),setIsDetailReveled(!isDetailReveled);return}if(user){setIsRevealLoading(!0);try{await executeRevealContract(user,e)&&(await sleep(4e3),await updatePlayerData(),Q.success("Reveal success"))}catch(t){console.error("Error during reveal:",t),Q.error("Failed to reveal fighter")}finally{setIsRevealLoading(!1)}}}async function handleHire(){if(user){setIsHireLoading(!0);try{await executeHireContract(user,selectedAssetIds,hireCost)&&(await sleep(4e3),await updatePlayerData(),await updateLandsData(),setAreaSelected(null),onRefetchFighters(user.name),Q.success("Hire success"))}catch(e){console.error("Error during hire:",e),Q.error("Failed to hire fighter")}finally{setIsHireLoading(!1)}}}function filterInventoryCards(card){var e,t;const cardTemplate={schema:card.schema.schema_name,...card.data,def:(e=card.data)==null?void 0:e.defense,pow:(t=card.data)==null?void 0:t.difficulty};if(!cardTemplate)return!0;const conditionalString=selectedFilter.reduce((s,{type:n,value:i},r)=>(n=n==="element"&&inventoryFilter==="arms.worlds"?"weaponclass":n,n==="tlm.mp"||n==="nft.mp"?s+=` cardTemplate["${n}"] === ${+i*10} ${r===selectedFilter.length-1?"":"&&"}`:typeof i=="number"?s+=` cardTemplate["${n}"] === ${i} ${r===selectedFilter.length-1?"":"&&"}`:s+=` cardTemplate["${n}"] === "${i}" ${r===selectedFilter.length-1?"":"&&"}`,s),"");return conditionalString?eval(conditionalString):!0}const hireCost=reactExports.useMemo(()=>{var t;const e=Array.from({length:10},(s,n)=>selectedBonus[n]||0).reduce((s,n)=>s+n,0);return(((t=tavernConfig==null?void 0:tavernConfig[0])==null?void 0:t.cost_hire_ap)||0)-e},[selectedBonus,tavernConfig]),filteredInventory=reactExports.useMemo(()=>(inventory==null?void 0:inventory.filter(e=>selectedCards.some(t=>(t==null?void 0:t.asset_id)!==e.asset_id)))||[],[inventory,selectedCards]),selectedAssetIds=reactExports.useMemo(()=>selectedCards.filter(e=>!!e).map(e=>Number(e==null?void 0:e.asset_id)),[selectedCards]),isRevealed=reactExports.useMemo(()=>{var e;return(e=user==null?void 0:user.active_taverns)==null?void 0:e.some(t=>t.x===(areaSelected==null?void 0:areaSelected.x)&&t.y===(areaSelected==null?void 0:areaSelected.y))},[user==null?void 0:user.active_taverns,areaSelected==null?void 0:areaSelected.x,areaSelected==null?void 0:areaSelected.y]),tavernFighter=reactExports.useMemo(()=>{var e,t;if(((e=user==null?void 0:user.last_tavern)==null?void 0:e.x)===(areaSelected==null?void 0:areaSelected.x)&&((t=user==null?void 0:user.last_tavern)==null?void 0:t.y)===(areaSelected==null?void 0:areaSelected.y))return user==null?void 0:user.last_tavern_fighter},[user==null?void 0:user.last_tavern,user==null?void 0:user.last_tavern_fighter,areaSelected==null?void 0:areaSelected.x,areaSelected==null?void 0:areaSelected.y]);return jsxRuntimeExports.jsxs(Wrapper,{children:[jsxRuntimeExports.jsxs(Header,{children:[!isRevealed&&jsxRuntimeExports.jsxs(Button,{disabled:isHireLoading,isLoading:isHireLoading,color:"black",onClick:handleHire,children:["Hire",jsxRuntimeExports.jsxs("span",{children:[hireCost,jsxRuntimeExports.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]})]}),jsxRuntimeExports.jsx(Button,{color:"black",isLoading:isRevealLoading,onClick:()=>{var e,t;return handleReveal((((e=user==null?void 0:user.activestats)==null?void 0:e.gems)||0)>=(((t=tavernConfig==null?void 0:tavernConfig[0])==null?void 0:t.cost_reveal_gem)||0))},disabled:showRevelCost()===null||isRevealLoading,children:tavernFighter?"Details":jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Reveal",jsxRuntimeExports.jsxs("span",{children:[showRevelCost(),jsxRuntimeExports.jsx("img",{loading:"lazy",src:"/assets/icons/credits.png",alt:""})]})]})}),jsxRuntimeExports.jsx(Button,{color:"black",onClick:handleLeaveArena,children:"Back"})]}),jsxRuntimeExports.jsxs(ContentWrapper,{children:[jsxRuntimeExports.jsxs(Container,{isHidden:isFighterSelected,children:[jsxRuntimeExports.jsx(Title,{children:tavernFighter?`${tavernFighter.racename} ${tavernFighter.classname}`:"Unknown Fighter"}),jsxRuntimeExports.jsx(ObjectivesContainer,{areaSelected,selectedBonus,orientation:"left",selectedFilter,setSelectedFilter}),jsxRuntimeExports.jsxs(Content,{children:[tavernFighter?jsxRuntimeExports.jsx(FighterImage,{onClick:()=>setIsFighterSelected(!0),fighter:tavernFighter}):jsxRuntimeExports.jsx("img",{loading:"lazy",src:"/assets/fighter/default-avatar.jpg",alt:""}),jsxRuntimeExports.jsxs(CardContainer,{cardSelected:inventoryPosition,children:[jsxRuntimeExports.jsx(InventoryCard,{item:selectedCards[0],onClick:()=>handleInventoryPosition(0)}),jsxRuntimeExports.jsx(InventoryCard,{item:selectedCards[1],onClick:()=>handleInventoryPosition(1)}),jsxRuntimeExports.jsx(InventoryCard,{item:selectedCards[2],onClick:()=>handleInventoryPosition(2)})]})]}),jsxRuntimeExports.jsx(InventoryContainer,{selectedCards,inventoryPosition,isInventoryLoading,filteredInventory:filteredInventory.filter(filterInventoryCards),inventoryFilter,setInventoryFilter,handleSelectCard}),jsxRuntimeExports.jsx(ObjectivesContainer,{areaSelected,selectedBonus,orientation:"right",selectedFilter,setSelectedFilter})]}),isDetailReveled&&tavernFighter?jsxRuntimeExports.jsx(FighterDetail,{isHidden:!isFighterSelected,selectedFighter:tavernFighter,onCloseFighterDetail:()=>handleReveal()}):!isDetailReveled&&tavernFighter?isSmall?jsxRuntimeExports.jsx(FighterDetail,{isHidden:!isFighterSelected,selectedFighter:tavernFighter,onCloseFighterDetail:()=>handleReveal()}):jsxRuntimeExports.jsx("img",{src:`/assets/fighter/classes/full_${tavernFighter.racename}_${tavernFighter.classname}.png`,alt:"",loading:"lazy"}):jsxRuntimeExports.jsx("img",{src:"/assets/fighter/unknown-fighter.jpeg",alt:"",loading:"lazy"})]})]})},index=React.memo(Tavern);export{index as default};

import{g as m,S as i,e as o,u as _,v as u,N as d}from"./index-8ba6f6d2.js";import{u as h}from"./useQuery-8673c832.js";const p=async t=>await m({options:{code:i.battleAle,index_position:2,key_type:"i64",limit:"1000",scope:i.battleAle,table:"fighters",lower_bound:t,upper_bound:t}}),f=t=>h({queryKey:[o.fightersState,t],queryFn:()=>S(t),staleTime:1e3*60*60,enabled:!!_.getState().user});async function x(t){return await u.invalidateQueries([o.fightersState,t])}async function S(t){try{const e=await p(t);return e?w(e):null}catch(e){return console.log(e),null}}function w(t){return t.map(e=>{const a=F(e),n=d({...e,stats:a}),s=new Date().getTime(),r=new Date(e.next_payday).getTime();return{...e,stats:{...e.stats,...n},is_disabled:s>r}})}function F(t){const e=u.getQueryData(o.BattleConfigState),a=Math.floor((Date.now()-new Date(t.creation_date).getTime())/(1e3*60*60*24));let n=1;e!=null&&e.age_penaly_percent_day&&(n=e==null?void 0:e.age_penaly_percent_day);const s=n/100,r=a*s,y=["health_max","health_min","damage_max","damage_min"],l={...t.stats};return y.forEach(c=>{const g=Math.max(0,100-r);l[c]=t.stats[c]*Math.pow(1.1,t.stats.level)*g/100}),{...t.stats,...l}}export{x as o,f as u};

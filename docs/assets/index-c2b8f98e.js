import{s as i,R as m,u as b,r as a,j as e,Q as s}from"./index-d5c19f07.js";import y from"./index-64e78562.js";import{u as j}from"./index-713eaf3e.js";import{e as w,a as C}from"./execute-transfer-wax-to-shop copy-fa3627ab.js";import{s as S}from"./sleep-da79c358.js";import{c as A,a as T}from"./calculateTImeLeft-3fbd33a3.js";import"./index-ff689e21.js";import"./use-transaction-52d187eb.js";import"./toast-options-c7a995a7.js";const v=i("div",{d:"flex",align:"flex-start",justify:"flex-start",direction:"column",position:"relative",padding:"40px 40px",gap:"13px",mt:"10px",bg:"#141423",br:"15px",w:"100%",maxW:"500px",button:{justify:"center",h:"50px",fw:"bold"},variants:{isHidden:{true:{"@sm":{display:"none"}}}}}),B=i("div",{d:"flex",align:"center",justify:"center",w:"100%",fw:"bold",ff:"$heading",fs:"20px",color:"white",mb:"50px"}),c=i("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",w:"100%",ff:"$heading",fs:"16px",color:"#C7C7C7",span:{textAlign:"center"},input:{d:"flex",w:"100%",br:"4px",padding:"8px"},strong:{display:"flex",align:"center",justify:"center",gap:"10px",padding:"10px",w:"100%",color:"white",bg:"#212130",br:"10px"},img:{w:"25px",h:"25px",objectFit:"contain"}}),E=i("div",{d:"flex",align:"center",justify:"center",direction:"column",mt:"60px",w:"100%",span:{ff:"$heading",fs:"15px",fw:"bold",color:"#C7C7C7",textAlign:"center"},input:{d:"flex",w:"100%",br:"4px",padding:"8px"}}),I=i("button",{display:"none",align:"flex-start",justify:"center",color:"#fff",fs:"30px",w:"50px",h:"50px",top:"0px",right:"0px",position:"absolute","@xmd":{d:"flex"}}),D=i(y,{display:"inline-flex",align:"center",justify:"center",gap:"5px",zIndex:"3",w:"100%",h:"40px",br:"2px !important",bg:"#6750A4 !important",border:"1px solid #36B9EA !important",fw:"bold",ff:"$heading",fs:"14px",color:"white"}),z=()=>{const{user:o,updatePlayerData:g}=b(),{selectedPack:t,setSelectedPack:l}=j(),[p,x]=m.useState(""),[d,u]=a.useState(!1);async function h(){if(!o)return s.error("You need to be logged in to buy items");if(!t)return s.error("You need to select a pack to buy items");u(!0);let n=!1;try{(t==null?void 0:t.category)==="credits"||(t==null?void 0:t.category)==="flasks"||(t==null?void 0:t.category)==="account"?n=await w(o,t.item):n=await C(o,t.item,t.cost_wax),n&&(await S(3e3),await g(),s.success("Item bought successfully"))}catch{s.error("Error buying item")}finally{u(!1),l(null)}}const r=a.useCallback(()=>{if(!(t!=null&&t.itemCD))return x("");const n=A(new Date(t==null?void 0:t.itemCD)),f=T(n,"weeks");x(f)},[t]);return a.useEffect(()=>{r();const n=setTimeout(()=>{r()},1e3*60);return()=>{clearTimeout(n)}},[r]),e.jsxs(v,{children:[e.jsx(I,{onClick:()=>l(null),children:"x"}),e.jsx(B,{children:"Contribute gems to mission"}),e.jsxs(c,{children:[e.jsxs("span",{children:["At the end of a mission the rewards are being distributed based on gem contribution."," "]}),e.jsxs("strong",{children:["1000",e.jsx("img",{loading:"lazy",src:"/assets/icons/wax-coin.png",alt:""})]})]}),e.jsxs(c,{children:[e.jsx("span",{children:"Current total contributions"}),e.jsxs("strong",{children:[e.jsx("img",{loading:"lazy",src:"/assets/icons/wax-coin.png",alt:""}),"1000"]})]}),e.jsxs(c,{children:[e.jsx("span",{children:"Your current contributions"}),e.jsxs("strong",{children:[e.jsx("img",{loading:"lazy",src:"/assets/icons/wax-coin.png",alt:""}),"1000"]})]}),e.jsxs(E,{children:[e.jsx("span",{children:"Add more gems to this mission"}),e.jsx("input",{type:"text"})]}),e.jsx(D,{isLoading:d,disabled:d,onClick:h,color:"blue",children:p||"Confirm exchange"})]})},_=m.memo(z);export{_ as default};

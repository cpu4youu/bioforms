import{s as _,S as P,R as p,_ as f,u as g,a as O,b as S,r as x,j as o,Q as h}from"./index-6ffa1e5c.js";import{u as V}from"./use-transaction-32dcef0f.js";import{s as T}from"./sleep-da79c358.js";import"./toast-options-bfab8171.js";const M=_("div",{position:"relative",d:"grid",gridTemplateAreas:`
    "empty empty header"
    "map map map"
  `,gridTemplateRows:"68px 1fr",gridTemplateColumns:"1fr 1fr 2fr",gap:"10px",br:"15px",w:"100%",h:"100%"}),C=_("div",{gridArea:"header",d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"215px",h:"100%",textTransform:"capitalize",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",justify:"center",gap:"5px",color:"#828282"},img:{h:"26px",objectFit:"contain"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"100%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),k=_("div",{gridArea:"map",d:"flex",align:"flex-end",justify:"flex-end",direction:"column",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)"});async function F(e,n,r){const{executeTransaction:c}=V(),t=H(e,n,r);return!!await c(t)}function H(e,n,r){return{actions:[{account:P.playersAle,name:"travel",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,x:n,y:r}}]}}const B=(e,n)=>{const r=String(e),c=String(n);let t="";for(const a of r)a=="0"?t=t+"a":a=="1"?t=t+"b":a=="2"?t=t+"c":a=="3"?t=t+"d":a=="4"?t=t+"e":a=="5"?t=t+"f":a=="6"?t=t+"g":a=="7"?t=t+"h":a=="8"?t=t+"i":a=="9"&&(t=t+"j");t=t+"x";for(const a of c)a=="0"?t=t+"a":a=="1"?t=t+"b":a=="2"?t=t+"c":a=="3"?t=t+"d":a=="4"?t=t+"e":a=="5"?t=t+"f":a=="6"?t=t+"g":a=="7"?t=t+"h":a=="8"?t=t+"i":a=="9"&&(t=t+"j");return t},j=p.lazy(()=>f(()=>import("./index-b04e074c.js"),["assets/index-b04e074c.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css","assets/index-a8b49a12.js"])),W=p.lazy(()=>f(()=>import("./index-90255f59.js"),["assets/index-90255f59.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css","assets/constants-9b21425a.js"])),$=p.lazy(()=>f(()=>import("./index-f67287d3.js"),["assets/index-f67287d3.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css","assets/constants-9b21425a.js","assets/useQuery-3d6f3bc3.js","assets/dateUtils-ab03db27.js"])),G=p.lazy(()=>f(()=>import("./box-gloves-73012f67.js"),["assets/box-gloves-73012f67.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css"])),N=p.lazy(()=>f(()=>import("./travel-arrow-6ccebd8a.js"),["assets/travel-arrow-6ccebd8a.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css"])),Q=p.lazy(()=>f(()=>import("./index-a191d686.js").then(e=>e.i),["assets/index-a191d686.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css","assets/fightersSort-4ad40f1c.js","assets/use-transaction-32dcef0f.js","assets/toast-options-bfab8171.js","assets/weather-query-dbc95ee9.js","assets/useQuery-3d6f3bc3.js","assets/sleep-da79c358.js","assets/landtranking-query-12001701.js"])),X=p.lazy(()=>f(()=>import("./index-583ee5a0.js"),["assets/index-583ee5a0.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css","assets/inventory-query-dc95a7b2.js","assets/useQuery-3d6f3bc3.js","assets/atomic-api-04d7721b.js","assets/toast-options-bfab8171.js","assets/use-transaction-32dcef0f.js","assets/sleep-da79c358.js","assets/fighters-query-3b0a44c2.js","assets/index-36a94554.js","assets/use-media-e3272e14.js"])),Y=p.lazy(()=>f(()=>import("./index-fc8c4cbb.js").then(e=>e.i),["assets/index-fc8c4cbb.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css","assets/fightersSort-4ad40f1c.js","assets/use-transaction-32dcef0f.js","assets/toast-options-bfab8171.js","assets/useQuery-3d6f3bc3.js","assets/weather-query-dbc95ee9.js","assets/sleep-da79c358.js","assets/config-query-b2eb6a11.js","assets/inventory-query-dc95a7b2.js","assets/atomic-api-04d7721b.js"])),U=()=>{var v;const e=g(O(s=>s.user)),{areaSelected:n,allAreas:r,moveCost:c,selectedMap:t,selectedCoordinates:a,setSelectedCoordinates:A,setAreaSelected:u,setMoveCost:E,setSelectedMap:R}=S(),{updatePlayerData:d,updateLandsData:b}=g(),w=x.useRef(null),[m,y]=x.useState(!1);async function L(){const s={x:e.x,y:e.y,type:(l==null?void 0:l.type)||"",landId:B(e.x,e.y)};if(s.type==="tavern"){const i=(e==null?void 0:e.active_taverns.find(({x:D,y:I})=>D===s.x&&I===s.y))||((e==null?void 0:e.last_tavern.x)===s.x&&(e==null?void 0:e.last_tavern.y)===s.y?e==null?void 0:e.last_tavern:{});u({...s,...i});return}u({...s,...n})}async function z(){try{if(y(!0),!e||!a||!await F(e,(a==null?void 0:a.x)+1||0,(a==null?void 0:a.y)+1||0))return;await T(6e3),A(null),E(0);const i=await d();if(await b(),i!=null&&i.planet&&R({label:i.planet.charAt(0).toUpperCase()+i.planet.slice(1),value:i.planet}),(i==null?void 0:i.x)!==(a==null?void 0:a.x)&&(i==null?void 0:i.y)!==(a==null?void 0:a.y))return await T(1e3),await d(),h.success("Travel successful");h.success("Travel successful")}catch(s){console.error(s)}finally{y(!1)}}const l=x.useMemo(()=>r[`${e.mapX},${e.mapY}`],[r,e]);return(n==null?void 0:n.type)==="arena"?o.jsx(Q,{}):(n==null?void 0:n.type)==="tavern"?o.jsx(X,{}):(n==null?void 0:n.type)==="dungeon"?o.jsx(Y,{}):o.jsxs(M,{children:[o.jsxs(C,{children:[!!l&&o.jsx(j,{disabled:l.type==="portal"||l.isLocked,color:"black",onClick:L,icon:G,children:`Enter ${l==null?void 0:l.type}`}),o.jsxs(j,{isLoading:m,disabled:t.value!==(e==null?void 0:e.planet)||!a||!c||c>(((v=e==null?void 0:e.activestats)==null?void 0:v.action_points)||0)||m,color:"black",onClick:z,icon:N,children:["Travel",t.value===(e==null?void 0:e.planet)&&o.jsxs("span",{children:["- ",c,o.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]})]})]}),o.jsxs(k,{ref:w,children:[o.jsx(W,{}),o.jsx($,{})]})]})};export{U as default};

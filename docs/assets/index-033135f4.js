import{s as u,d as z,r as b,S as D,R as g,_,u as L,a as M,b as O,j as r,Q as T}from"./index-e967e66d.js";import{s as W}from"./fightersSort-5e9a6d34.js";import{u as H}from"./index-53be5cdf.js";import{u as V}from"./use-transaction-9bb94975.js";import{s as k}from"./sleep-da79c358.js";import{g as N}from"./generateRandomWaxName-ee0d1ff2.js";const B=u("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main side"
  `,gridTemplateRows:"65px 1fr",gridTemplateColumns:"1fr 1fr 500px",gap:"10px",overflowY:"hidden",br:"15px",w:"100%",h:"100%",variants:{isFighterSelected:{true:{"@lg":{gridTemplateAreas:`
            "header header header"
            "side side side"
          `}},false:{"@lgxxx":{gridTemplateAreas:`
              "header header header"
              "main main main"
            `}}}},"@lgxxx":{gridTemplateColumns:"1fr 1fr 2fr"},"@xmd":{gap:"8px"},"@sm":{}}),$=u("div",{gridArea:"header",d:"grid",justifyContent:"end",gridTemplateColumns:"200px 200px",gap:"10px",minHeight:"65px",button:{padding:"20px",height:"65px",w:"100%",maxW:"100%",span:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@lgxxx":{gridColumnStart:3,w:"100%"},"@md":{gridColumnStart:1,gridTemplateColumns:"1fr 1fr"},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),Y=u("div",{display:"flex",flexDirection:"column",gridArea:"side",br:"15px",bg:"#141423",overflowY:"auto",minW:"500px",maxW:"500px",maxH:"calc(100vh - 160px)",minH:"calc(100vh - 160px)",variants:{isFighterSelected:{false:{"@lgxxx":{display:"none"}}}},"@lgxxx":{minW:"initial"},"@sm":{mt:"5px"}}),G=u("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",padding:"0px 15px ",bg:"#141423",br:"15px",w:"100%",overflowY:"auto",position:"relative",">img":{position:"absolute",top:0,left:0,w:"100%",h:"100%",objectFit:"cover"},gridArea:"main",h:"calc(100vh - 235px)",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",variants:{isFighterSelected:{true:{"@lg":{display:"none"},"@xmd":{display:"none"}}}},"@md":{minH:"calc(100vh - 185px)",mt:"30px"}}),Q=u("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"350px",padding:"15px 10px",zIndex:"2",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",bg:"#1D1B20",color:"#E9E9E9",ff:"$heading",fs:"14px",fw:"bold"}),q=u("div",{d:"flex",justify:"space-between",gridTemplateColumns:"1fr 2fr",gap:"10px",mt:"48px",pb:"10px",w:"100%",zIndex:"2",">span":{ff:"$heading",fs:"20px",fw:"bold",color:"#fff"},"@lg":{direction:"column",justify:"center",">span":{my:"10px",order:"-1"}}}),J=u("div",{w:"100%",h:"100%"}),K=u("h4",{d:"flex",alignItems:"center",justifyContent:"center",w:"100%",h:"100%",color:"#FFFFFF",ff:"$heading",fs:"24px",fw:"normal"}),R=z((e,d)=>({arenaSelected:null,setArenaSelected:t=>e({arenaSelected:t}),myTeam:[null,null,null,null,null],setMyTeam:t=>e({myTeam:t}),selectedCards:[void 0,void 0],setSelectedCards:t=>e({selectedCards:t}),selectedFighterClassname:{label:"All",value:""},setSelectedFighterClassname:t=>e({selectedFighterClassname:t}),selectedSort:W[0],setSelectedSort:t=>e({selectedSort:t}),selectedElement:[],setSelectedElement:t=>e({selectedElement:t}),selectedMarkers:[],setSelectedMarkers:t=>e({selectedMarkers:t})}));function U(){const{selectedCards:e,setSelectedCards:d,myTeam:t,setMyTeam:f}=R(),[y,w]=b.useState("fighter"),[p,l]=b.useState(0),[F,v]=b.useState("level.worlds"),[m,s]=b.useState(-1);function j(n){if(s(-1),w("fighter"),n===p){l(-1);return}l(n)}function A(n){if(l(-1),w("nft"),n===m){s(-1);return}s(n),v(n===0?"crew.worlds":n===1?"arms.worlds":"crew.worlds")}function S(n){if(!n){const a=e.map((h,E)=>{if(E!==m)return h}),o=m+1;if(s(o),d(a),v(o===0?"crew.worlds":o===1?"arms.worlds":"crew.worlds"),o>1){s(-1);return}return}if(e.some(a=>(a==null?void 0:a.asset_id)===(n==null?void 0:n.asset_id))){s(-1);return}const c=e.map((a,o)=>o===m?n:a),i=m+1;if(s(i),d(c),v(i===0?"crew.worlds":i===1?"arms.worlds":"crew.worlds"),i>1){s(-1);return}}function x(n){const c=t.map((a,o)=>o===p?n:a);f(c);const i=p+1;if(i===5){l(-1);return}l(i)}function C(n){return e.some(c=>(c==null?void 0:c.asset_id)!==n.asset_id)}return{inventoryPosition:m,fighterPosition:p,itemSelected:y,handleFighterPosition:j,handleInventoryPosition:A,handleSelectCard:S,handleAddFighter:x,filterInventoryCards:C,setFighterPosition:l,inventoryFilter:F}}async function X(e,d){const{executeTransaction:t}=V(),f=Z(e,d);return!!await t(f)}function Z(e,{planet:d,land_id:t,crew_asset_id:f,weapon_asset_id:y,fighter_ids:w,history_id:p,x:l,y:F}){return{actions:[{account:D.arenaAle,name:"playarena",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,planet:d,land_id:t,crew_asset_id:f,weapon_asset_id:y,fighter_ids:w,history_id:p,x:l,y:F}}]}}const I=g.lazy(()=>_(()=>import("./index-9a611eba.js"),["assets/index-9a611eba.js","assets/index-e967e66d.js","assets/index-55fec1ff.css"])),ee=g.lazy(()=>_(()=>import("./travel-arrow-1626ddfc.js"),["assets/travel-arrow-1626ddfc.js","assets/index-e967e66d.js","assets/index-55fec1ff.css"])),te=g.lazy(()=>_(()=>import("./index-1d03a7d0.js").then(e=>e.i),["assets/index-1d03a7d0.js","assets/index-e967e66d.js","assets/index-55fec1ff.css","assets/useQuery-74fac7bf.js","assets/classtemps-query-c7ce030d.js"])),re=g.lazy(()=>_(()=>import("./index-a22f729b.js"),["assets/index-a22f729b.js","assets/index-e967e66d.js","assets/index-55fec1ff.css","assets/use-media-f222daa6.js","assets/index-53be5cdf.js","assets/fightersSort-5e9a6d34.js","assets/use-transaction-9bb94975.js","assets/toast-options-bd85cbdc.js","assets/sleep-da79c358.js","assets/generateRandomWaxName-ee0d1ff2.js"])),ne=g.lazy(()=>_(()=>import("./index-5239a5d9.js"),["assets/index-5239a5d9.js","assets/index-e967e66d.js","assets/index-55fec1ff.css","assets/use-media-f222daa6.js","assets/index-53be5cdf.js","assets/useQuery-74fac7bf.js"])),se=g.lazy(()=>_(()=>import("./index-d03f06d7.js"),["assets/index-d03f06d7.js","assets/index-e967e66d.js","assets/index-55fec1ff.css","assets/index-53be5cdf.js","assets/use-media-f222daa6.js","assets/fighterFilters-e6065055.js","assets/fighters-query-c4d7ac49.js","assets/useQuery-74fac7bf.js","assets/fightersSort-5e9a6d34.js","assets/use-transaction-9bb94975.js","assets/toast-options-bd85cbdc.js","assets/sleep-da79c358.js","assets/generateRandomWaxName-ee0d1ff2.js"])),ie=g.lazy(()=>_(()=>import("./index-a778e221.js"),["assets/index-a778e221.js","assets/index-e967e66d.js","assets/index-55fec1ff.css","assets/inventory-query-34016488.js","assets/useQuery-74fac7bf.js","assets/adapters-99079144.js","assets/atomic-api-115924ad.js","assets/toast-options-bd85cbdc.js","assets/fightersSort-5e9a6d34.js","assets/index-53be5cdf.js","assets/use-transaction-9bb94975.js","assets/sleep-da79c358.js","assets/generateRandomWaxName-ee0d1ff2.js"])),ae=()=>{const{inventoryPosition:e,handleInventoryPosition:d,fighterPosition:t,inventoryFilter:f,itemSelected:y,handleAddFighter:w,handleFighterPosition:p,handleSelectCard:l,filterInventoryCards:F}=U(),v=L(M(i=>i.user)),{selectedMap:m,areaSelected:s}=O(),{setArenaSelected:j,myTeam:A,selectedCards:S}=R(),{selectedFighter:x,setSelectedFighter:C}=H();async function n(){var a,o;if(j(null),!s){T.error("Error on getting area selected.");return}if(!((a=S[0])!=null&&a.asset_id)){T.error("Please select a Crew card to start the fight.");return}if(!((o=S[1])!=null&&o.asset_id)){T.error("Please select a Weapon card to start the fight.");return}const i=A.filter(h=>h!==null);if(i.length<1){T.error("Please select a Fighter to start the fight.");return}try{const h={planet:m.value,land_id:s.landId,crew_asset_id:Number(S[0].asset_id),weapon_asset_id:Number(S[1].asset_id),fighter_ids:i.map(P=>P==null?void 0:P.fighter_id),history_id:N(),x:s.x,y:s.y};await X(v,h)&&(await k(2e3),T.success("Fight started successfully!"))}catch(h){console.error("Error starting fight:",h)}}function c(){j(null)}return r.jsxs(B,{isFighterSelected:!!x,children:[r.jsxs($,{children:[r.jsx(I,{color:"black",onClick:c,icon:ee,children:"Leave Arena"}),r.jsxs(I,{color:"black",onClick:n,children:["Start Fight",r.jsxs("span",{children:["-15",r.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]})]})]}),r.jsxs(G,{isFighterSelected:!!x,children:[r.jsx(Q,{children:"+20% Gem Damage"}),r.jsxs(q,{children:[r.jsx(re,{inventoryPosition:e,handleInventoryPosition:d,fighterPosition:t,handleFighterPosition:p}),r.jsx("span",{children:"VS"}),r.jsx(ne,{})]}),r.jsx(J,{children:y==="fighter"?r.jsx(se,{handleAddFighter:w}):r.jsx(ie,{inventoryPosition:e,inventoryFilter:f,handleSelectCard:l,filterInventoryCards:F})}),r.jsx("img",{src:"/assets/background/bg-arena.png",alt:""})]}),r.jsx(Y,{isFighterSelected:!!x,children:x?r.jsx(te,{selectedFighter:{...x,...x.stats},onCloseFighterDetail:C}):r.jsx(r.Fragment,{children:r.jsx(K,{children:"Select a Fighter"})})})]})},oe=g.memo(ae),ue=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{ue as i,R as u};

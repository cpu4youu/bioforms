import{g as x,S as l,e as m,u,s as r,R as p,_ as g,j as n,r as h,Q as a}from"./index-6ffa1e5c.js";import{u as y}from"./useQuery-3d6f3bc3.js";import w from"./index-b04e074c.js";import{u as b}from"./index-12cc5ad0.js";import{u as j}from"./use-transaction-32dcef0f.js";import{v as S}from"./v4-4a60fe23.js";import"./index-a8b49a12.js";import"./toast-options-bfab8171.js";const C=async()=>await x({options:{code:l.usptsWorlds,index_position:1,key_type:"i64",limit:"100",reverse:!0,scope:l.usptsWorlds,table:"pointoffers"}}),T=()=>y({queryKey:[m.PointOffersState],queryFn:()=>_(),staleTime:1e3*60*60,enabled:!!u.getState().user});async function _(){try{return await C()}catch(t){return console.log(t),null}}const v=r("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",padding:"40px 40px",gap:"20px",mt:"10px",bg:"#141423",br:"15px",w:"100%",h:"100%",button:{justify:"center",h:"50px",fw:"bold"},img:{h:"233px",w:"150px",objectFit:"contain"},variants:{isHidden:{true:{"@sm":{display:"none"}}}},"@xmd":{maxW:"100%"}}),D=r("span",{d:"flex",align:"center",justify:"center",w:"100%",fw:"bold",ff:"$heading",fs:"20px",color:"white"}),F=r("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",w:"100%",ff:"$heading",fs:"16px",color:"#C7C7C7",strong:{display:"flex",align:"center",justify:"center",gap:"10px",padding:"10px",w:"100%",color:"white",bg:"#212130",br:"10px",img:{w:"25px",h:"25px",objectFit:"contain"}}}),R=r("span",{d:"flex",align:"center",justify:"center",w:"100%",ff:"$heading",fs:"16px",color:"#FF7777"}),A=r("span",{d:"flex",align:"center",justify:"center",w:"100%",mt:"40px",ff:"$heading",fs:"15px",color:"#C7C7C7"}),E=r(w,{display:"inline-flex",align:"center",justify:"center",gap:"5px",zIndex:"3",mt:"auto",w:"100%",h:"40px",br:"2px !important",bg:"#6750A4 !important",border:"1px solid #36B9EA !important",fw:"bold",ff:"$heading",fs:"14px",color:"white"}),L=r("button",{display:"none",align:"flex-start",justify:"center",color:"#fff",fs:"30px",w:"50px",h:"50px",top:"0px",right:"0px",position:"absolute","@xmd":{d:"flex"}});async function W(t,s){const{executeTransaction:e}=j(),o=z(t,s);return!!await e(o)}function z(t,s){return{actions:[{account:l.usptsWorlds,name:"redeempntnft",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{user:t.name,offer_id:s}}]}}const O=p.lazy(()=>g(()=>import("./index-c17e1918.js"),["assets/index-c17e1918.js","assets/index-6ffa1e5c.js","assets/index-55fec1ff.css","assets/index-b04e074c.js","assets/index-a8b49a12.js","assets/index-12cc5ad0.js","assets/useQuery-3d6f3bc3.js","assets/calculateTImeLeft-b770b02f.js"])),P=p.memo(()=>{var s;const{data:t}=T();return n.jsx(n.Fragment,{children:(s=t==null?void 0:t.filter(e=>{const o=new Date;return new Date(e.end).getTime()-o.getTime()>0}))==null?void 0:s.map(e=>n.jsx(O,{...e},S()))})}),Y=p.memo(()=>{const{user:t,updatePlayerData:s}=u(),{selectedPointOffer:e,setSelectedPointOffer:o}=b(),[i,c]=h.useState(!1);async function f(){if(!t)return a.error("You need to be logged in to buy items");if(!e)return a.error("You need to select a NFT to buy items");c(!0);try{await W(t,e.template_id)&&(await s(),a.success("Item bought successfully"))}catch{a.error("Error buying item")}finally{c(!1),o(null)}}return n.jsxs(v,{children:[n.jsx(L,{onClick:()=>o(null),children:"x"}),n.jsx(D,{children:"Confirm Selection"}),n.jsxs(F,{children:[n.jsx("span",{children:"You are about to exchange the following"}),n.jsxs("strong",{children:[n.jsx("img",{loading:"lazy",src:"/assets/icons/aw-shard.svg",alt:""}),(((e==null?void 0:e.required)||1)/10).toLocaleString("en-US")]})]}),n.jsx(R,{children:"These shards will be spent in Alien Worlds"}),n.jsx(A,{children:"You will receive"}),n.jsx("img",{loading:"lazy",src:`/assets/aw-nft-images/${e==null?void 0:e.template_id}.webp`,alt:""}),n.jsxs(E,{isLoading:i,disabled:i,onClick:f,children:["Craft now for ",(((e==null?void 0:e.required)||1)/10).toLocaleString("en-US")," AW shards"]})]})});P.displayName="PointOffersList";Y.displayName="PointOffersSelection";export{P as PointOffersList,Y as PointOffersSelection};

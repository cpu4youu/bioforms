import{s as o,S as v,d as _,R as p,_ as u,u as T,a as S,r as h,j as t,Q}from"./index-168661ec.js";import{u as k,o as A}from"./activequests-query-bdcae572.js";import{s as C}from"./sleep-da79c358.js";import{u as R}from"./use-transaction-1070a51a.js";import{c as z}from"./calculateTImeLeft-b770b02f.js";import{v as E}from"./v4-4a60fe23.js";const q=o("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main main"
  `,gridTemplateRows:"70px 1fr",gridTemplateColumns:"1fr 1fr .5fr",gap:"10px",br:"15px",w:"100%",h:"100%"}),D=o("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),L=o("div",{gridArea:"main",d:"flex",position:"relative",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",padding:"10px",br:"0 15px 15px 15px",bg:"#141423",backgroundImage:"url(/assets/background/bg-quests.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}),I=o("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",position:"absolute",top:"-40px",left:"0px"}),c=o("button",{d:"flex",align:"center",justify:"center",gap:"5px",h:"40px",padding:"10px 15px",color:"#fff",bg:"#141423",fs:"12px",img:{w:"20px",h:"20px",objectFit:"contain"},"&:first-child":{br:"15px 0px 0px 0px"},"&:last-child":{br:"0 15px 0 0"},variants:{isSelected:{true:{bg:"#19192D"}}}}),N=o("div",{d:"flex",align:"center",justify:"center",w:"100%",gap:"10px",maxH:"calc(100vh - 175px)",overflowY:"auto","@md":{flexDirection:"column",gap:"25px"}});o("span",{color:"#fff",fw:"bold",fs:"28px",ff:"$heading"});async function O(a){const{executeTransaction:n}=R(),s=P(a);return!!await n(s)}function P(a){return{actions:[{account:v.questAle,name:"getquests",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{wallet:a.name}}]}}const H=_((a,n)=>({showNewQuestsButton:!0,setShowNewQuestsButton:s=>a({showNewQuestsButton:s}),completeQuests:[],setCompleteQuests:s=>a({completeQuests:s})})),B=p.lazy(()=>u(()=>import("./index-508cfe6c.js"),["assets/index-508cfe6c.js","assets/index-168661ec.js","assets/index-55fec1ff.css","assets/index-0cd78c26.js"])),F=p.lazy(()=>u(()=>import("./index-d70df68f.js"),["assets/index-d70df68f.js","assets/index-168661ec.js","assets/index-55fec1ff.css","assets/index-508cfe6c.js","assets/index-0cd78c26.js","assets/use-transaction-1070a51a.js","assets/toast-options-bf0621b1.js","assets/sleep-da79c358.js","assets/activequests-query-bdcae572.js","assets/useQuery-746a9fbd.js","assets/calculateTImeLeft-b770b02f.js","assets/v4-4a60fe23.js"])),l=p.lazy(()=>u(()=>import("./index-b9317b77.js"),["assets/index-b9317b77.js","assets/index-168661ec.js","assets/index-55fec1ff.css"])),M=()=>{var m,f,g;const a=T(S(e=>e.user)),{completeQuests:n}=H(),{data:s}=k(),[i,b]=h.useState("day"),[d,x]=h.useState(!1);function r(e){b(e)}async function y(){x(!0);try{if(!await O(a)){console.log("Failed to get new quests");return}await C(3e3),await A(),Q.success("New quests generated successfully!")}catch(e){console.log(e)}finally{x(!1)}}const w=(m=s==null?void 0:s.quests)==null?void 0:m.some(e=>{const j=new Date(e.expiry_date);return!!z(j)});return t.jsxs(q,{children:[t.jsx(D,{children:(!s||w)&&t.jsx(B,{isLoading:d,disabled:d,onClick:y,children:"New Quests"})}),t.jsxs(L,{children:[t.jsxs(I,{children:[t.jsxs(c,{isSelected:i==="day",onClick:()=>r("day"),children:["Daily",n.some(e=>e==="day")&&t.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]}),t.jsxs(c,{isSelected:i==="week",onClick:()=>r("week"),children:["Weekly",n.some(e=>e==="week")&&t.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]}),t.jsxs(c,{isSelected:i==="month",onClick:()=>r("month"),children:["Monthly",n.some(e=>e==="month")&&t.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]})]}),t.jsx(N,{children:s?(g=(f=s==null?void 0:s.quests)==null?void 0:f.filter(e=>e.quest_scope===i))==null?void 0:g.map(e=>t.jsx(F,{...e},E())):t.jsxs(t.Fragment,{children:[t.jsx(l,{}),t.jsx(l,{}),t.jsx(l,{})]})})]})]})},U=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{U as i,H as u};

import{e as $,s as o,S as D,d as Q,u as v,R as W,_ as B,r as m,j as n,Q as H}from"./index-94481af7.js";import{a as Y,u as K}from"./inventory-query-3bf66bcc.js";import{s as O}from"./sleep-da79c358.js";import{u as U}from"./use-transaction-1ce53d5a.js";import{u as G}from"./useQuery-8952a2a4.js";import"./atomic-api-6291eda5.js";import"./toast-options-77d0caa9.js";const V=$({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),J=o("div",{d:"grid",gridTemplateAreas:`
    "empty header"
    "main main"
  `,gridTemplateColumns:"3fr 1fr",gap:"10px",br:"15px",w:"100%",h:"100%"}),X=o("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}}}),Z=o("div",{gridArea:"main",d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-center",justifyContent:"flex-center",w:"100%",gap:"10px",minH:"calc(100vh - 175px)",overflowY:"auto",padding:"10px",br:"15px",bg:"#141423","@md":{h:"calc(100vh - 175px)",direction:"column"}}),q=o("div",{d:"flex",direction:"column",w:"100%",maxW:"820px",padding:"24px 30px",h:"calc(100vh - 235px)","@md":{h:"unset"}}),z=o("div",{d:"flex",direction:"column",gap:"10px",w:"100%"}),F=o("span",{d:"flex",direction:"column",w:"100%",color:"#fff",fs:"16px",ff:"$heading"}),E=o("span",{d:"flex",direction:"column",w:"100%",padding:"10px 10px 20px 10px",bg:"#201D2C",color:"#fff",fs:"16px",ff:"$heading"}),N=o("div",{d:"flex",w:"100%",m:"17px 0 60px"}),ee=o("div",{display:"flex",justify:"center",gap:"10px",img:{"&:hover":{transform:"scale(1.05)",zIndex:"4","-webkit-filter":"drop-shadow(0px 0px 8px #00BAFF)",filter:"drop-shadow(0px 0px 5px #00BAFF)"}},variants:{cardSelected:{0:{img:{"&:nth-of-type(2)":{opacity:"0.2"},"&:nth-of-type(3)":{opacity:"0.2"}}},1:{img:{"&:nth-of-type(1)":{opacity:"0.2"},"&:nth-of-type(3)":{opacity:"0.2"}}},2:{img:{"&:nth-of-type(1)":{opacity:"0.2"},"&:nth-of-type(2)":{opacity:"0.2"}}}}}}),u=o("img",{cursor:"pointer",transition:"all 0.2s ease-in-out",w:"85px",h:"116px",zIndex:"2",variants:{isSelected:{true:{filter:"grayscale(100%)"}}},"@sm":{w:"65px",h:"90px"}}),ne=o("div",{d:"flex",gap:"10px",alignContent:"flex-start",flexWrap:"wrap",overflow:"auto",w:"100%",h:"calc(100vh - 235px)","@md":{h:"unset"}}),R=o("div",{w:"85px",h:"116px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${V} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}});async function te({mine_nfts:i,user:r}){const{executeTransaction:d}=U(),a=ae({user:r,mine_nfts:i});return!!await d(a)}function ae({mine_nfts:i,user:r}){return{actions:[{account:D.playersAle,name:"setminenfts",authorization:[{actor:r.name,permission:r.authorization.permission}],data:{wallet:r.name,mine_nfts:i}}]}}const se=i=>G({queryKey:[Q.AssetsIdState,i],queryFn:()=>re(i),staleTime:1e3*60*60,enabled:!!v.getState().user});async function re(i){const{user:r}=v.getState();try{const{getAssets:d}=Y,a={owner:r==null?void 0:r.name,limit:1e3,ids:i.join(",")},p=[];let x=0;do{x++;const g=await d({...a,page:x});p.push(...g)}while(x*1e3===p.length);return p}catch(d){return console.log(d),null}}const oe=W.lazy(()=>B(()=>import("./index-65d4a1e4.js"),["assets/index-65d4a1e4.js","assets/index-94481af7.js","assets/index-55fec1ff.css"])),ue=()=>{var S,_,b,C,T,A,I,L,k;const i=v(({user:e})=>e),{data:r,isLoading:d}=K("tool.worlds",!0),{data:a,isLoading:p}=se(i.mine_nfts),[x,g]=m.useState(!1),[c,f]=m.useState(0),[s,h]=m.useState([void 0,void 0,void 0]);async function M(){try{g(!0);const e=s.filter(t=>!!t).map(t=>+t.asset_id);if(!await te({user:i,mine_nfts:e}))return;await O(2e3),H.success("Mine nft equipped !")}catch(e){console.error(e)}finally{g(!1)}}function j(e){if(!e){const t=s.map((y,P)=>{if(P!==c)return y});f(c+1),h(t);return}if(s.some(t=>(t==null?void 0:t.asset_id)===(e==null?void 0:e.asset_id))){f(-1);return}const l=s.map((t,y)=>y===c?e:t);f(c+1),h(l),c===2&&f(-1)}function w(e){if(e===c){f(-1);return}f(e)}return m.useEffect(()=>{h([(a==null?void 0:a[0])??void 0,(a==null?void 0:a[1])??void 0,(a==null?void 0:a[2])??void 0])},[a]),n.jsxs(J,{children:[n.jsx(X,{children:n.jsx(oe,{isLoading:x,disabled:x,onClick:M,children:"Save Settings"})}),n.jsxs(Z,{children:[n.jsxs(q,{children:[n.jsxs(z,{children:[n.jsx(F,{children:"Mining Tools"}),n.jsx(E,{children:"These tools are used by trainers to mine for instant rewards when playing Taverns, Dungeons or Arenas."})]}),n.jsx(N,{children:n.jsx(ee,{cardSelected:c,children:p?new Array(3).fill(0).map((e,l)=>n.jsx(R,{},l)):n.jsxs(n.Fragment,{children:[n.jsx(u,{onClick:()=>w(0),loading:"lazy",src:s[0]?`/assets/aw-nft-images/${(S=s[0])==null?void 0:S.template.template_id}.webp`:"/assets/default-card.png",alt:(b=(_=s[0])==null?void 0:_.data)==null?void 0:b.name}),n.jsx(u,{onClick:()=>w(1),loading:"lazy",src:s[1]?`/assets/aw-nft-images/${(C=s[1])==null?void 0:C.template.template_id}.webp`:"/assets/default-card.png",alt:(A=(T=s[1])==null?void 0:T.data)==null?void 0:A.name}),n.jsx(u,{onClick:()=>w(2),loading:"lazy",src:s[1]?`/assets/aw-nft-images/${(I=s[1])==null?void 0:I.template.template_id}.webp`:"/assets/default-card.png",alt:(k=(L=s[1])==null?void 0:L.data)==null?void 0:k.name})]})})}),n.jsxs(z,{children:[n.jsx(F,{children:"Landowner Rewards"}),n.jsx(E,{children:"Whenever a player performs a mine on a landowners land, the landowner also gets rewards. Use the slider to select the percentage of TLM / Shard rewards."})]})]}),n.jsx(ne,{children:d?new Array(30).fill(0).map((e,l)=>n.jsx(R,{},l)):n.jsxs(n.Fragment,{children:[n.jsx(u,{onClick:()=>j(void 0),src:"/assets/default-card.png",alt:"default card"}),r==null?void 0:r.map(e=>{var l;return n.jsx(u,{isSelected:s.some(t=>(t==null?void 0:t.asset_id)===(e==null?void 0:e.asset_id)),onClick:()=>j(e),loading:"lazy",src:`/assets/aw-nft-images/${e==null?void 0:e.template.template_id}.webp`,alt:(l=e==null?void 0:e.data)==null?void 0:l.name},e==null?void 0:e.asset_id)})]})})]})]})};export{ue as default};

import{g,S as a,e as f,u as p}from"./index-fa47d130.js";import{u as d}from"./useQuery-bee0c5b2.js";const _=async()=>await g({options:{code:a.shopAle,index_position:1,key_type:"i64",limit:"1000",scope:a.shopAle,table:"shopitems"}}),m=async e=>await g({options:{code:a.shopAle,index_position:2,key_type:"i64",limit:"1000",scope:a.shopAle,table:"cdclaim",lower_bound:e,upper_bound:e}}),A=()=>d({queryKey:[f.ShopState],queryFn:()=>w(),staleTime:1e3*60*60,enabled:!!p.getState().user});async function w(){try{const e=await _(),n=await m(),t=p.getState().user;if(!e)return null;const r=n==null?void 0:n.filter(s=>s.wallet===(t==null?void 0:t.wallet));return b(e,r)}catch(e){return console.log(e),null}}function b(e,n){return e.map(t=>{var l;const r=["wax","gem","dust","action_points","legend_acct_seconds"],s=r.find(o=>{if(o==="wax")return Number(t.cost_wax.replace(" WAX",""))>0;const i=t[`cost_${o}`];return Number(i)>0}),u=r.find(o=>{const i=t[`gain_${o}`];return Number(i)>0});let c="";return n&&(c=((l=n.find(o=>o.item===t.item))==null?void 0:l.cooldown_expired)||""),{...t,cost:Number(t.cost_wax.replace(" WAX",""))||t[`cost_${s}`],gain:t[`gain_${u}`],itemCD:c,imageGain:x(u),imageCost:y(s)}})}function x(e){return e==="action_points"?"energy.png":e==="gem"?"gems.png":e==="dust"?"credits.png":e==="legend_acct_seconds"?"account.svg":""}function y(e){return e==="action_points"?"energy.png":e==="gem"?"gems.png":e==="dust"?"credits.png":e==="wax"?"wax-coin.png":""}export{A as u};

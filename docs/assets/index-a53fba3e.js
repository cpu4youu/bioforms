import{R as D,r as Y,s as z,S as ie,Q as ee,u as ki,g as ne,j as m,_ as J,a as ae}from"./index-52528459.js";import{u as te}from"./use-transaction-0199cffb.js";import{s as re}from"./sleep-da79c358.js";import{u as oe}from"./index-d71fe0b6.js";import{u as le}from"./useQuery-a77f3a69.js";import{g as Ti,a as Yi,l as se,f as ue}from"./constants-1c8f422b.js";import"./toast-options-a79bf299.js";var L=function(i,a){return Number(i.toFixed(a))},de=function(i,a){return typeof i=="number"?i:a},X=function(i,a,e){e&&typeof e=="function"&&e(i,a)},fe=function(i){return-Math.cos(i*Math.PI)/2+.5},pe=function(i){return i},ve=function(i){return i*i},me=function(i){return i*(2-i)},ce=function(i){return i<.5?2*i*i:-1+(4-2*i)*i},he=function(i){return i*i*i},ge=function(i){return--i*i*i+1},we=function(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},Se=function(i){return i*i*i*i},ye=function(i){return 1- --i*i*i*i},be=function(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},Pe=function(i){return i*i*i*i*i},Ce=function(i){return 1+--i*i*i*i*i},Te=function(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i},Ni={easeOut:fe,linear:pe,easeInQuad:ve,easeOutQuad:me,easeInOutQuad:ce,easeInCubic:he,easeOutCubic:ge,easeInOutCubic:we,easeInQuart:Se,easeOutQuart:ye,easeInOutQuart:be,easeInQuint:Pe,easeOutQuint:Ce,easeInOutQuint:Te},Li=function(i){typeof i=="number"&&cancelAnimationFrame(i)},F=function(i){i.mounted&&(Li(i.animation),i.animate=!1,i.animation=null,i.velocity=null)};function Mi(i,a,e,n){if(i.mounted){var t=new Date().getTime(),r=1;F(i),i.animation=function(){if(!i.mounted)return Li(i.animation);var o=new Date().getTime()-t,l=o/e,u=Ni[a],d=u(l);o>=e?(n(r),i.animation=null):i.animation&&(n(d),requestAnimationFrame(i.animation))},requestAnimationFrame(i.animation)}}function Ye(i){var a=i.scale,e=i.positionX,n=i.positionY;return!(Number.isNaN(a)||Number.isNaN(e)||Number.isNaN(n))}function G(i,a,e,n){var t=Ye(a);if(!(!i.mounted||!t)){var r=i.setTransformState,o=i.transformState,l=o.scale,u=o.positionX,d=o.positionY,s=a.scale-l,f=a.positionX-u,p=a.positionY-d;e===0?r(a.scale,a.positionX,a.positionY):Mi(i,n,e,function(v){var h=l+s*v,g=u+f*v,S=d+p*v;r(h,g,S)})}}function Xe(i,a,e){var n=i.offsetWidth,t=i.offsetHeight,r=a.offsetWidth,o=a.offsetHeight,l=r*e,u=o*e,d=n-l,s=t-u;return{wrapperWidth:n,wrapperHeight:t,newContentWidth:l,newDiffWidth:d,newContentHeight:u,newDiffHeight:s}}var _e=function(i,a,e,n,t,r,o){var l=i>a?e*(o?1:.5):0,u=n>t?r*(o?1:.5):0,d=i-a-l,s=l,f=n-t-u,p=u;return{minPositionX:d,maxPositionX:s,minPositionY:f,maxPositionY:p}},wi=function(i,a){var e=i.wrapperComponent,n=i.contentComponent,t=i.setup.centerZoomedOut;if(!e||!n)throw new Error("Components are not mounted");var r=Xe(e,n,a),o=r.wrapperWidth,l=r.wrapperHeight,u=r.newContentWidth,d=r.newDiffWidth,s=r.newContentHeight,f=r.newDiffHeight,p=_e(o,u,d,l,s,f,!!t);return p},mi=function(i,a,e,n){return n?i<a?L(a,2):i>e?L(e,2):L(i,2):L(i,2)},U=function(i,a){var e=wi(i,a);return i.bounds=e,e};function ai(i,a,e,n,t,r,o){var l=e.minPositionX,u=e.minPositionY,d=e.maxPositionX,s=e.maxPositionY,f=0,p=0;o&&(f=t,p=r);var v=mi(i,l-f,d+f,n),h=mi(a,u-p,s+p,n);return{x:v,y:h}}function di(i,a,e,n,t,r){var o=i.transformState,l=o.scale,u=o.positionX,d=o.positionY,s=n-l;if(typeof a!="number"||typeof e!="number")return console.error("Mouse X and Y position were not provided!"),{x:u,y:d};var f=u-a*s,p=d-e*s,v=ai(f,p,t,r,0,0,null);return v}function ti(i,a,e,n,t){var r=t?n:0,o=a-r;return!Number.isNaN(e)&&i>=e?e:!Number.isNaN(a)&&i<=o?o:i}var Xi=function(i,a){var e=i.setup.panning.excluded,n=i.isInitialized,t=i.wrapperComponent,r=a.target,o="shadowRoot"in r&&"composedPath"in a,l=o?a.composedPath().some(function(s){return s instanceof Element?t==null?void 0:t.contains(s):!1}):t==null?void 0:t.contains(r),u=n&&r&&l;if(!u)return!1;var d=fi(r,e);return!d},_i=function(i){var a=i.isInitialized,e=i.isPanning,n=i.setup,t=n.panning.disabled,r=a&&e&&!t;return!!r},Ae=function(i,a){var e=i.transformState,n=e.positionX,t=e.positionY;i.isPanning=!0;var r=a.clientX,o=a.clientY;i.startCoords={x:r-n,y:o-t}},ze=function(i,a){var e=a.touches,n=i.transformState,t=n.positionX,r=n.positionY;i.isPanning=!0;var o=e.length===1;if(o){var l=e[0].clientX,u=e[0].clientY;i.startCoords={x:l-t,y:u-r}}};function xe(i){var a=i.transformState,e=a.positionX,n=a.positionY,t=a.scale,r=i.setup,o=r.disabled,l=r.limitToBounds,u=r.centerZoomedOut,d=i.wrapperComponent;if(!(o||!d||!i.bounds)){var s=i.bounds,f=s.maxPositionX,p=s.minPositionX,v=s.maxPositionY,h=s.minPositionY,g=e>f||e<p,S=n>v||n<h,_=e>f?d.offsetWidth:i.setup.minPositionX||0,w=n>v?d.offsetHeight:i.setup.minPositionY||0,T=di(i,_,w,t,i.bounds,l||u),O=T.x,W=T.y;return{scale:t,positionX:g?O:e,positionY:S?W:n}}}function Zi(i,a,e,n,t){var r=i.setup.limitToBounds,o=i.wrapperComponent,l=i.bounds,u=i.transformState,d=u.scale,s=u.positionX,f=u.positionY;if(!(o===null||l===null||a===s&&e===f)){var p=ai(a,e,l,r,n,t,o),v=p.x,h=p.y;i.setTransformState(d,v,h)}}var Ee=function(i,a,e){var n=i.startCoords,t=i.transformState,r=i.setup.panning,o=r.lockAxisX,l=r.lockAxisY,u=t.positionX,d=t.positionY;if(!n)return{x:u,y:d};var s=a-n.x,f=e-n.y,p=o?u:s,v=l?d:f;return{x:p,y:v}},$=function(i,a){var e=i.setup,n=i.transformState,t=n.scale,r=e.minScale,o=e.disablePadding;return a>0&&t>=r&&!o?a:0},We=function(i){var a=i.mounted,e=i.setup,n=e.disabled,t=e.velocityAnimation,r=i.transformState.scale,o=t.disabled,l=!o||r>1||!n||a;return!!l},De=function(i){var a=i.mounted,e=i.velocity,n=i.bounds,t=i.setup,r=t.disabled,o=t.velocityAnimation,l=i.transformState.scale,u=o.disabled,d=!u||l>1||!r||a;return!(!d||!e||!n)};function je(i,a){var e=i.setup.velocityAnimation,n=e.equalToMove,t=e.animationTime,r=e.sensitivity;return n?t*a*r:t}function Ai(i,a,e,n,t,r,o,l,u,d){if(t){if(a>o&&e>o){var s=o+(i-o)*d;return s>u?u:s<o?o:s}if(a<r&&e<r){var s=r+(i-r)*d;return s<l?l:s>r?r:s}}return n?a:mi(i,r,o,t)}function Oe(i,a){var e=1;return a?Math.min(e,i.offsetWidth/window.innerWidth):e}function Be(i,a){var e=We(i);if(e){var n=i.lastMousePosition,t=i.velocityTime,r=i.setup,o=i.wrapperComponent,l=r.velocityAnimation.equalToMove,u=Date.now();if(n&&t&&o){var d=Oe(o,l),s=a.x-n.x,f=a.y-n.y,p=s/d,v=f/d,h=u-t,g=s*s+f*f,S=Math.sqrt(g)/h;i.velocity={velocityX:p,velocityY:v,total:S}}i.lastMousePosition=a,i.velocityTime=u}}function ke(i){var a=i.velocity,e=i.bounds,n=i.setup,t=i.wrapperComponent,r=De(i);if(!(!r||!a||!e||!t)){var o=a.velocityX,l=a.velocityY,u=a.total,d=e.maxPositionX,s=e.minPositionX,f=e.maxPositionY,p=e.minPositionY,v=n.limitToBounds,h=n.alignmentAnimation,g=n.zoomAnimation,S=n.panning,_=S.lockAxisY,w=S.lockAxisX,T=g.animationType,O=h.sizeX,W=h.sizeY,M=h.velocityAlignmentTime,B=M,Z=je(i,u),V=Math.max(Z,B),A=$(i,O),R=$(i,W),Q=A*t.offsetWidth/100,I=R*t.offsetHeight/100,ei=d+Q,H=s-Q,ii=f+I,c=p-I,b=i.transformState,x=new Date().getTime();Mi(i,T,V,function(j){var y=i.transformState,k=y.scale,E=y.positionX,K=y.positionY,ri=new Date().getTime()-x,oi=ri/B,P=Ni[h.animationType],N=1-P(Math.min(1,oi)),li=1-j,Pi=E+o*li,Ci=K+l*li,Ji=Ai(Pi,b.positionX,E,w,v,s,d,H,ei,N),Ii=Ai(Ci,b.positionY,K,_,v,p,f,c,ii,N);(E!==Pi||K!==Ci)&&i.setTransformState(k,Ji,Ii)})}}function zi(i,a){var e=i.transformState.scale;F(i),U(i,e),window.TouchEvent!==void 0&&a instanceof TouchEvent?ze(i,a):Ae(i,a)}function Si(i,a){var e=i.transformState.scale,n=i.setup,t=n.minScale,r=n.alignmentAnimation,o=r.disabled,l=r.sizeX,u=r.sizeY,d=r.animationTime,s=r.animationType,f=o||e<t||!l&&!u;if(!f){var p=xe(i);p&&G(i,p,a??d,s)}}function xi(i,a,e){var n=i.startCoords,t=i.setup,r=t.alignmentAnimation,o=r.sizeX,l=r.sizeY;if(n){var u=Ee(i,a,e),d=u.x,s=u.y,f=$(i,o),p=$(i,l);Be(i,{x:d,y:s}),Zi(i,d,s,f,p)}}function Ne(i){if(i.isPanning){var a=i.setup.panning.velocityDisabled,e=i.velocity,n=i.wrapperComponent,t=i.contentComponent;i.isPanning=!1,i.animate=!1,i.animation=null;var r=n==null?void 0:n.getBoundingClientRect(),o=t==null?void 0:t.getBoundingClientRect(),l=(r==null?void 0:r.width)||0,u=(r==null?void 0:r.height)||0,d=(o==null?void 0:o.width)||0,s=(o==null?void 0:o.height)||0,f=l<d||u<s,p=!a&&e&&(e==null?void 0:e.total)>.1&&f;p?ke(i):Si(i)}}function yi(i,a,e,n){var t=i.setup,r=t.minScale,o=t.maxScale,l=t.limitToBounds,u=ti(L(a,2),r,o,0,!1),d=U(i,u),s=di(i,e,n,u,d,l),f=s.x,p=s.y;return{scale:u,positionX:f,positionY:p}}function Hi(i,a,e){var n=i.transformState.scale,t=i.wrapperComponent,r=i.setup,o=r.minScale,l=r.limitToBounds,u=r.zoomAnimation,d=u.disabled,s=u.animationTime,f=u.animationType,p=d||n>=o;if((n>=1||l)&&Si(i),!(p||!t||!i.mounted)){var v=a||t.offsetWidth/2,h=e||t.offsetHeight/2,g=yi(i,o,v,h);g&&G(i,g,s,f)}}var q=function(){return q=Object.assign||function(a){for(var e,n=1,t=arguments.length;n<t;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r])}return a},q.apply(this,arguments)};function Ei(i,a,e){if(e||arguments.length===2)for(var n=0,t=a.length,r;n<t;n++)(r||!(n in a))&&(r||(r=Array.prototype.slice.call(a,0,n)),r[n]=a[n]);return i.concat(r||Array.prototype.slice.call(a))}var si={previousScale:1,scale:1,positionX:0,positionY:0},ni={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},ci={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Fi=function(i){var a,e,n,t;return{previousScale:(a=i.initialScale)!==null&&a!==void 0?a:si.scale,scale:(e=i.initialScale)!==null&&e!==void 0?e:si.scale,positionX:(n=i.initialPositionX)!==null&&n!==void 0?n:si.positionX,positionY:(t=i.initialPositionY)!==null&&t!==void 0?t:si.positionY}},Wi=function(i){var a=q({},ni);return Object.keys(i).forEach(function(e){var n=typeof i[e]<"u",t=typeof ni[e]<"u";if(t&&n){var r=Object.prototype.toString.call(ni[e]),o=r==="[object Object]",l=r==="[object Array]";o?a[e]=q(q({},ni[e]),i[e]):l?a[e]=Ei(Ei([],ni[e],!0),i[e],!0):a[e]=i[e]}}),a},Vi=function(i,a,e){var n=i.transformState.scale,t=i.wrapperComponent,r=i.setup,o=r.maxScale,l=r.minScale,u=r.zoomAnimation,d=r.smooth,s=u.size;if(!t)throw new Error("Wrapper is not mounted");var f=d?n*Math.exp(a*e):n+a*e,p=ti(L(f,3),l,o,s,!1);return p};function Ri(i,a,e,n,t){var r=i.wrapperComponent,o=i.transformState,l=o.scale,u=o.positionX,d=o.positionY;if(!r)return console.error("No WrapperComponent found");var s=r.offsetWidth,f=r.offsetHeight,p=(s/2-u)/l,v=(f/2-d)/l,h=Vi(i,a,e),g=yi(i,h,p,v);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");G(i,g,n,t)}function Ki(i,a,e,n){var t=i.setup,r=i.wrapperComponent,o=t.limitToBounds,l=Fi(i.props),u=i.transformState,d=u.scale,s=u.positionX,f=u.positionY;if(r){var p=wi(i,l.scale),v=ai(l.positionX,l.positionY,p,o,0,0,r),h={scale:l.scale,positionX:v.x,positionY:v.y};d===l.scale&&s===l.positionX&&f===l.positionY||(n==null||n(),G(i,h,a,e))}}function Le(i,a,e,n){var t=i.getBoundingClientRect(),r=a.getBoundingClientRect(),o=e.getBoundingClientRect(),l=r.x*n.scale,u=r.y*n.scale;return{x:(t.x-o.x+l)/n.scale,y:(t.y-o.y+u)/n.scale}}function Me(i,a,e){var n=i.wrapperComponent,t=i.contentComponent,r=i.transformState,o=i.setup,l=o.limitToBounds,u=o.minScale,d=o.maxScale;if(!n||!t)return r;var s=n.getBoundingClientRect(),f=a.getBoundingClientRect(),p=Le(a,n,t,r),v=p.x,h=p.y,g=f.width/r.scale,S=f.height/r.scale,_=n.offsetWidth/g,w=n.offsetHeight/S,T=ti(e||Math.min(_,w),u,d,0,!1),O=(s.width-g*T)/2,W=(s.height-S*T)/2,M=(s.left-v)*T+O,B=(s.top-h)*T+W,Z=wi(i,T),V=ai(M,B,Z,l,0,0,n),A=V.x,R=V.y;return{positionX:A,positionY:R,scale:T}}var Ze=function(i){return function(a,e,n){a===void 0&&(a=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Ri(i,1,a,e,n)}},He=function(i){return function(a,e,n){a===void 0&&(a=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Ri(i,-1,a,e,n)}},Fe=function(i){return function(a,e,n,t,r){t===void 0&&(t=300),r===void 0&&(r="easeOut");var o=i.transformState,l=o.positionX,u=o.positionY,d=o.scale,s=i.wrapperComponent,f=i.contentComponent,p=i.setup.disabled;if(!(p||!s||!f)){var v={positionX:Number.isNaN(a)?l:a,positionY:Number.isNaN(e)?u:e,scale:Number.isNaN(n)?d:n};G(i,v,t,r)}}},Ve=function(i){return function(a,e){a===void 0&&(a=200),e===void 0&&(e="easeOut"),Ki(i,a,e)}},Re=function(i){return function(a,e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut");var t=i.transformState,r=i.wrapperComponent,o=i.contentComponent;if(r&&o){var l=Qi(a||t.scale,r,o);G(i,l,e,n)}}},Ke=function(i){return function(a,e,n,t){n===void 0&&(n=600),t===void 0&&(t="easeOut"),F(i);var r=i.wrapperComponent,o=typeof a=="string"?document.getElementById(a):a;if(r&&o&&r.contains(o)){var l=Me(i,o,e);G(i,l,n,t)}}},hi=function(i){return{instance:i,zoomIn:Ze(i),zoomOut:He(i),setTransform:Fe(i),resetTransform:Ve(i),centerView:Re(i),zoomToElement:Ke(i)}},Qe=function(i){return{instance:i,state:i.transformState}},C=function(i){var a={};return Object.assign(a,Qe(i)),Object.assign(a,hi(i)),a},pi=!1;function vi(){try{var i={get passive(){return pi=!0,!1}};return i}catch{return pi=!1,pi}}var ui=".".concat(ci.wrapperClass),fi=function(i,a){return a.some(function(e){return i.matches("".concat(ui," ").concat(e,", ").concat(ui," .").concat(e,", ").concat(ui," ").concat(e," *, ").concat(ui," .").concat(e," *"))})},gi=function(i){i&&clearTimeout(i)},qe=function(i,a,e){return"translate(".concat(i,"px, ").concat(a,"px) scale(").concat(e,")")},Qi=function(i,a,e){var n=e.offsetWidth*i,t=e.offsetHeight*i,r=(a.offsetWidth-n)/2,o=(a.offsetHeight-t)/2;return{scale:i,positionX:r,positionY:o}};function $e(i){return function(a){i.forEach(function(e){typeof e=="function"?e(a):e!=null&&(e.current=a)})}}var Ge=function(i,a){var e=i.setup.wheel,n=e.disabled,t=e.wheelDisabled,r=e.touchPadDisabled,o=e.excluded,l=i.isInitialized,u=i.isPanning,d=a.target,s=l&&!u&&!n&&d;if(!s||t&&!a.ctrlKey||r&&a.ctrlKey)return!1;var f=fi(d,o);return!f},Ue=function(i){return i?i.deltaY<0?1:-1:0};function Je(i,a){var e=Ue(i),n=de(a,e);return n}function qi(i,a,e){var n=a.getBoundingClientRect(),t=0,r=0;if("clientX"in i)t=(i.clientX-n.left)/e,r=(i.clientY-n.top)/e;else{var o=i.touches[0];t=(o.clientX-n.left)/e,r=(o.clientY-n.top)/e}return(Number.isNaN(t)||Number.isNaN(r))&&console.error("No mouse or touch offset found"),{x:t,y:r}}var Ie=function(i,a,e,n,t){var r=i.transformState.scale,o=i.wrapperComponent,l=i.setup,u=l.maxScale,d=l.minScale,s=l.zoomAnimation,f=l.disablePadding,p=s.size,v=s.disabled;if(!o)throw new Error("Wrapper is not mounted");var h=r+a*e;if(t)return h;var g=n?!1:!v,S=ti(L(h,3),d,u,p,g&&!f);return S},en=function(i,a){var e=i.previousWheelEvent,n=i.transformState.scale,t=i.setup,r=t.maxScale,o=t.minScale;return e?n<r||n>o||Math.sign(e.deltaY)!==Math.sign(a.deltaY)||e.deltaY>0&&e.deltaY<a.deltaY||e.deltaY<0&&e.deltaY>a.deltaY||Math.sign(e.deltaY)!==Math.sign(a.deltaY):!1},nn=function(i,a){var e=i.setup.pinch,n=e.disabled,t=e.excluded,r=i.isInitialized,o=a.target,l=r&&!n&&o;if(!l)return!1;var u=fi(o,t);return!u},an=function(i){var a=i.setup.pinch.disabled,e=i.isInitialized,n=i.pinchStartDistance,t=e&&!a&&n;return!!t},tn=function(i,a,e){var n=e.getBoundingClientRect(),t=i.touches,r=L(t[0].clientX-n.left,5),o=L(t[0].clientY-n.top,5),l=L(t[1].clientX-n.left,5),u=L(t[1].clientY-n.top,5);return{x:(r+l)/2/a,y:(o+u)/2/a}},$i=function(i){return Math.sqrt(Math.pow(i.touches[0].pageX-i.touches[1].pageX,2)+Math.pow(i.touches[0].pageY-i.touches[1].pageY,2))},rn=function(i,a){var e=i.pinchStartScale,n=i.pinchStartDistance,t=i.setup,r=t.maxScale,o=t.minScale,l=t.zoomAnimation,u=t.disablePadding,d=l.size,s=l.disabled;if(!e||n===null||!a)throw new Error("Pinch touches distance was not provided");if(a<0)return i.transformState.scale;var f=a/n,p=f*e;return ti(L(p,2),o,r,d,!s&&!u)},on=160,ln=100,sn=function(i,a){var e=i.props,n=e.onWheelStart,t=e.onZoomStart;i.wheelStopEventTimer||(F(i),X(C(i),a,n),X(C(i),a,t))},un=function(i,a){var e=i.props,n=e.onWheel,t=e.onZoom,r=i.contentComponent,o=i.setup,l=i.transformState,u=l.scale,d=o.limitToBounds,s=o.centerZoomedOut,f=o.zoomAnimation,p=o.wheel,v=o.disablePadding,h=o.smooth,g=f.size,S=f.disabled,_=p.step,w=p.smoothStep;if(!r)throw new Error("Component not mounted");a.preventDefault(),a.stopPropagation();var T=Je(a,null),O=h?w*Math.abs(a.deltaY):_,W=Ie(i,T,O,!a.ctrlKey);if(u!==W){var M=U(i,W),B=qi(a,r,u),Z=S||g===0||s||v,V=d&&Z,A=di(i,B.x,B.y,W,M,V),R=A.x,Q=A.y;i.previousWheelEvent=a,i.setTransformState(W,R,Q),X(C(i),a,n),X(C(i),a,t)}},dn=function(i,a){var e=i.props,n=e.onWheelStop,t=e.onZoomStop;gi(i.wheelAnimationTimer),i.wheelAnimationTimer=setTimeout(function(){i.mounted&&(Hi(i,a.x,a.y),i.wheelAnimationTimer=null)},ln);var r=en(i,a);r&&(gi(i.wheelStopEventTimer),i.wheelStopEventTimer=setTimeout(function(){i.mounted&&(i.wheelStopEventTimer=null,X(C(i),a,n),X(C(i),a,t))},on))},Gi=function(i){for(var a=0,e=0,n=0;n<2;n+=1)a+=i.touches[n].clientX,e+=i.touches[n].clientY;var t=a/2,r=e/2;return{x:t,y:r}},fn=function(i,a){var e=$i(a);i.pinchStartDistance=e,i.lastDistance=e,i.pinchStartScale=i.transformState.scale,i.isPanning=!1;var n=Gi(a);i.pinchLastCenterX=n.x,i.pinchLastCenterY=n.y,F(i)},pn=function(i,a){var e=i.contentComponent,n=i.pinchStartDistance,t=i.wrapperComponent,r=i.transformState.scale,o=i.setup,l=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,s=o.alignmentAnimation,f=d.disabled,p=d.size;if(!(n===null||!e)){var v=tn(a,r,e);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var h=$i(a),g=rn(i,h),S=Gi(a),_=S.x-(i.pinchLastCenterX||0),w=S.y-(i.pinchLastCenterY||0);if(!(g===r&&_===0&&w===0)){i.pinchLastCenterX=S.x,i.pinchLastCenterY=S.y;var T=U(i,g),O=f||p===0||u,W=l&&O,M=di(i,v.x,v.y,g,T,W),B=M.x,Z=M.y;i.pinchMidpoint=v,i.lastDistance=h;var V=s.sizeX,A=s.sizeY,R=$(i,V),Q=$(i,A),I=B+_,ei=Z+w,H=ai(I,ei,T,l,R,Q,t),ii=H.x,c=H.y;i.setTransformState(g,ii,c)}}}},vn=function(i){var a=i.pinchMidpoint;i.velocity=null,i.lastDistance=null,i.pinchMidpoint=null,i.pinchStartScale=null,i.pinchStartDistance=null,Hi(i,a==null?void 0:a.x,a==null?void 0:a.y)},Ui=function(i,a){var e=i.props.onZoomStop,n=i.setup.doubleClick.animationTime;gi(i.doubleClickStopEventTimer),i.doubleClickStopEventTimer=setTimeout(function(){i.doubleClickStopEventTimer=null,X(C(i),a,e)},n)},mn=function(i,a){var e=i.props,n=e.onZoomStart,t=e.onZoom,r=i.setup.doubleClick,o=r.animationTime,l=r.animationType;X(C(i),a,n),Ki(i,o,l,function(){return X(C(i),a,t)}),Ui(i,a)};function cn(i,a){return i==="toggle"?a===1?1:-1:i==="zoomOut"?-1:1}function hn(i,a){var e=i.setup,n=i.doubleClickStopEventTimer,t=i.transformState,r=i.contentComponent,o=t.scale,l=i.props,u=l.onZoomStart,d=l.onZoom,s=e.doubleClick,f=s.disabled,p=s.mode,v=s.step,h=s.animationTime,g=s.animationType;if(!f&&!n){if(p==="reset")return mn(i,a);if(!r)return console.error("No ContentComponent found");var S=cn(p,i.transformState.scale),_=Vi(i,S,v);if(o!==_){X(C(i),a,u);var w=qi(a,r,o),T=yi(i,_,w.x,w.y);if(!T)return console.error("Error during zoom event. New transformation state was not calculated.");X(C(i),a,d),G(i,T,h,g),Ui(i,a)}}}var gn=function(i,a){var e=i.isInitialized,n=i.setup,t=i.wrapperComponent,r=n.doubleClick,o=r.disabled,l=r.excluded,u=a.target,d=t==null?void 0:t.contains(u),s=e&&u&&d&&!o;if(!s)return!1;var f=fi(u,l);return!f},wn=function(){function i(a){var e=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){e.initializeWindowEvents()},this.unmount=function(){e.cleanupWindowEvents()},this.update=function(n){e.props=n,U(e,e.transformState.scale),e.setup=Wi(n)},this.initializeWindowEvents=function(){var n,t,r=vi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,l=o==null?void 0:o.defaultView;(t=e.wrapperComponent)===null||t===void 0||t.addEventListener("wheel",e.onWheelPanning,r),l==null||l.addEventListener("mousedown",e.onPanningStart,r),l==null||l.addEventListener("mousemove",e.onPanning,r),l==null||l.addEventListener("mouseup",e.onPanningStop,r),o==null||o.addEventListener("mouseleave",e.clearPanning,r),l==null||l.addEventListener("keyup",e.setKeyUnPressed,r),l==null||l.addEventListener("keydown",e.setKeyPressed,r)},this.cleanupWindowEvents=function(){var n,t,r=vi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,l=o==null?void 0:o.defaultView;l==null||l.removeEventListener("mousedown",e.onPanningStart,r),l==null||l.removeEventListener("mousemove",e.onPanning,r),l==null||l.removeEventListener("mouseup",e.onPanningStop,r),o==null||o.removeEventListener("mouseleave",e.clearPanning,r),l==null||l.removeEventListener("keyup",e.setKeyUnPressed,r),l==null||l.removeEventListener("keydown",e.setKeyPressed,r),document.removeEventListener("mouseleave",e.clearPanning,r),F(e),(t=e.observer)===null||t===void 0||t.disconnect()},this.handleInitializeWrapperEvents=function(n){var t=vi();n.addEventListener("wheel",e.onWheelZoom,t),n.addEventListener("dblclick",e.onDoubleClick,t),n.addEventListener("touchstart",e.onTouchPanningStart,t),n.addEventListener("touchmove",e.onTouchPanning,t),n.addEventListener("touchend",e.onTouchPanningStop,t)},this.handleInitialize=function(n,t){var r=!1,o=e.setup.centerOnInit,l=function(u,d){for(var s=0,f=u;s<f.length;s++){var p=f[s];if(p.target===d)return!0}return!1};e.applyTransformation(),e.onInitCallbacks.forEach(function(u){u(C(e))}),e.observer=new ResizeObserver(function(u){if(l(u,n)||l(u,t))if(o&&!r){var d=t.offsetWidth,s=t.offsetHeight;(d>0||s>0)&&(r=!0,e.setCenter())}else F(e),U(e,e.transformState.scale),Si(e,0)}),e.observer.observe(n),e.observer.observe(t)},this.onWheelZoom=function(n){var t=e.setup.disabled;if(!t){var r=Ge(e,n);if(r){var o=e.isPressingKeys(e.setup.wheel.activationKeys);o&&(sn(e,n),un(e,n),dn(e,n))}}},this.onWheelPanning=function(n){var t=e.setup,r=t.disabled,o=t.wheel,l=t.panning;if(!(!e.wrapperComponent||!e.contentComponent||r||!o.wheelDisabled||l.disabled||!l.wheelPanning||n.ctrlKey)){n.preventDefault(),n.stopPropagation();var u=e.transformState,d=u.positionX,s=u.positionY,f=d-n.deltaX,p=s-n.deltaY,v=l.lockAxisX?d:f,h=l.lockAxisY?s:p,g=e.setup.alignmentAnimation,S=g.sizeX,_=g.sizeY,w=$(e,S),T=$(e,_);v===d&&h===s||Zi(e,v,h,w,T)}},this.onPanningStart=function(n){var t=e.setup.disabled,r=e.props.onPanningStart;if(!t){var o=Xi(e,n);if(o){var l=e.isPressingKeys(e.setup.panning.activationKeys);l&&(n.button===0&&!e.setup.panning.allowLeftClickPan||n.button===1&&!e.setup.panning.allowMiddleClickPan||n.button===2&&!e.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),F(e),zi(e,n),X(C(e),n,r)))}}},this.onPanning=function(n){var t=e.setup.disabled,r=e.props.onPanning;if(!t){var o=_i(e);if(o){var l=e.isPressingKeys(e.setup.panning.activationKeys);l&&(n.preventDefault(),n.stopPropagation(),xi(e,n.clientX,n.clientY),X(C(e),n,r))}}},this.onPanningStop=function(n){var t=e.props.onPanningStop;e.isPanning&&(Ne(e),X(C(e),n,t))},this.onPinchStart=function(n){var t=e.setup.disabled,r=e.props,o=r.onPinchingStart,l=r.onZoomStart;if(!t){var u=nn(e,n);u&&(fn(e,n),F(e),X(C(e),n,o),X(C(e),n,l))}},this.onPinch=function(n){var t=e.setup.disabled,r=e.props,o=r.onPinching,l=r.onZoom;if(!t){var u=an(e);u&&(n.preventDefault(),n.stopPropagation(),pn(e,n),X(C(e),n,o),X(C(e),n,l))}},this.onPinchStop=function(n){var t=e.props,r=t.onPinchingStop,o=t.onZoomStop;e.pinchStartScale&&(vn(e),X(C(e),n,r),X(C(e),n,o))},this.onTouchPanningStart=function(n){var t=e.setup.disabled,r=e.props.onPanningStart;if(!t){var o=Xi(e,n);if(o){var l=e.lastTouch&&+new Date-e.lastTouch<200&&n.touches.length===1;if(!l){e.lastTouch=+new Date,F(e);var u=n.touches,d=u.length===1,s=u.length===2;d&&(F(e),zi(e,n),X(C(e),n,r)),s&&e.onPinchStart(n)}}}},this.onTouchPanning=function(n){var t=e.setup.disabled,r=e.props.onPanning;if(e.isPanning&&n.touches.length===1){if(t)return;var o=_i(e);if(!o)return;n.preventDefault(),n.stopPropagation();var l=n.touches[0];xi(e,l.clientX,l.clientY),X(C(e),n,r)}else n.touches.length>1&&e.onPinch(n)},this.onTouchPanningStop=function(n){e.onPanningStop(n),e.onPinchStop(n)},this.onDoubleClick=function(n){var t=e.setup.disabled;if(!t){var r=gn(e,n);r&&hn(e,n)}},this.clearPanning=function(n){e.isPanning&&e.onPanningStop(n)},this.setKeyPressed=function(n){e.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){e.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(t){return e.pressedKeys[t]}):!0},this.setTransformState=function(n,t,r){var o=e.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(t)&&!Number.isNaN(r)){n!==e.transformState.scale&&(e.transformState.previousScale=e.transformState.scale,e.transformState.scale=n),e.transformState.positionX=t,e.transformState.positionY=r,e.applyTransformation();var l=C(e);e.onChangeCallbacks.forEach(function(u){return u(l)}),X(l,{scale:n,positionX:t,positionY:r},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(e.wrapperComponent&&e.contentComponent){var n=Qi(e.transformState.scale,e.wrapperComponent,e.contentComponent);e.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,t,r){return e.props.customTransform?e.props.customTransform(n,t,r):qe(n,t,r)},this.applyTransformation=function(){if(!(!e.mounted||!e.contentComponent)){var n=e.transformState,t=n.scale,r=n.positionX,o=n.positionY,l=e.handleTransformStyles(r,o,t);e.contentComponent.style.transform=l}},this.getContext=function(){return C(e)},this.onChange=function(n){return e.onChangeCallbacks.has(n)||e.onChangeCallbacks.add(n),function(){e.onChangeCallbacks.delete(n)}},this.onInit=function(n){return e.onInitCallbacks.has(n)||e.onInitCallbacks.add(n),function(){e.onInitCallbacks.delete(n)}},this.init=function(n,t){e.cleanupWindowEvents(),e.wrapperComponent=n,e.contentComponent=t,U(e,e.transformState.scale),e.handleInitializeWrapperEvents(n),e.handleInitialize(n,t),e.initializeWindowEvents(),e.isInitialized=!0;var r=C(e);X(r,void 0,e.props.onInit)},this.props=a,this.setup=Wi(this.props),this.transformState=Fi(this.props)}return i}(),bi=D.createContext(null),Sn=function(i,a){return typeof i=="function"?i(a):i},yn=D.forwardRef(function(i,a){var e=Y.useRef(new wn(i)).current,n=Sn(i.children,hi(e));return Y.useImperativeHandle(a,function(){return hi(e)},[e]),Y.useEffect(function(){e.update(i)},[e,i]),D.createElement(bi.Provider,{value:e},n)});D.forwardRef(function(i,a){var e=Y.useRef(null),n=Y.useContext(bi);return Y.useEffect(function(){return n.onChange(function(t){if(e.current){var r=0,o=0;e.current.style.transform=n.handleTransformStyles(r,o,1/t.instance.transformState.scale)}})},[n]),D.createElement("div",q({},i,{ref:$e([e,a])}))});function bn(i,a){a===void 0&&(a={});var e=a.insertAt;if(!(!i||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e==="top"&&n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i))}}var Pn=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Di={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};bn(Pn);var Cn=function(i){var a=i.children,e=i.wrapperClass,n=e===void 0?"":e,t=i.contentClass,r=t===void 0?"":t,o=i.wrapperStyle,l=i.contentStyle,u=i.wrapperProps,d=u===void 0?{}:u,s=i.contentProps,f=s===void 0?{}:s,p=Y.useContext(bi),v=p.init,h=p.cleanupWindowEvents,g=Y.useRef(null),S=Y.useRef(null);return Y.useEffect(function(){var _=g.current,w=S.current;return _!==null&&w!==null&&v&&(v==null||v(_,w)),function(){h==null||h()}},[]),D.createElement("div",q({},d,{ref:g,className:"".concat(ci.wrapperClass," ").concat(Di.wrapper," ").concat(n),style:o}),D.createElement("div",q({},f,{ref:S,className:"".concat(ci.contentClass," ").concat(Di.content," ").concat(r),style:l}),a))};const Tn=z("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),Yn=z("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"205px",h:"70px",textTransform:"capitalize",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",gap:"5px",justify:"center",color:"#828282"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),Xn=z("div",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",mt:"10px",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%"}),_n=z("div",{d:"grid",gap:"10px",gridTemplateAreas:`
    "filters destination"
    "team team"
  `,px:"20px",pb:"10px",w:"100%","@sm":{}}),An=z("div",{d:"flex",gridArea:"filters",gap:"10px"}),zn=z("div",{d:"flex",align:"center",justify:"flex-end",gridArea:"destination",gap:"2px"}),xn=z("div",{d:"flex",bg:"rgba(255, 225, 225, 0.05)",padding:"2px 3px",img:{w:"40px"},variants:{disabled:{true:{opacity:.7,filter:"grayscale(100%)"}}}});z("div",{d:"block",gridArea:"destination",w:"max-content",ml:"auto",p:{textAlign:"right",fs:"24px",ff:"$heading",color:"#fff",textTransform:"capitalize","&:not(:first-child)":{fs:"14px"}},"@sm":{p:{fs:"14px","&:not(:first-child)":{fs:"10px",color:"#8A8A8A"}}}});z("div",{d:"flex",gridArea:"team",w:"max-content",ml:"auto",">div":{ml:"5px","&:nth-child(3)":{ml:"25px"}},"@sm":{}});z("div",{d:"flex",align:"center",gap:"5px",direction:"column",img:{w:"35px",h:"35px"},span:{fs:"12px",ff:"$heading",color:"#A6A6A6"},"@sm":{}});const En=z("div",{d:"flex",w:"100%",px:"10px",".react-transform-wrapper":{maxH:"calc(100vh - 250px)"},"@sm":{".react-transform-wrapper":{maxH:"calc(100vh - 190px)"}},"@media (max-width: 768px) and (max-height: 500px)":{".react-transform-wrapper":{maxH:"calc(100vh)"}}}),Wn=z("div",{d:"flex",w:"1920px",h:"1080px",position:"relative",img:{w:"1920px",h:"1080px"}}),Dn=z("button",{d:"flex",align:"center",justify:"center",position:"absolute",border:"1px solid rgba(0,0,0,0.6)",zIndex:1,w:"calc(100% / 40)",h:"calc(100% / 20)",svg:{w:"20px",h:"20px"},variants:{isSelected:{true:{bg:"rgba(0, 186, 255, 0.58)"}},type:{miningEvent:{zIndex:2},portal:{zIndex:2}}}});z("div",{d:"flex",align:"center",flexWrap:"wrap",gap:"20px",mt:"10px",pl:"20px",w:"100%"});z("div",{d:"flex",align:"center",justify:"center",gap:"5px",color:"#fff",ff:"$heading",fs:"10px",svg:{w:"17px",h:"17px"},"&:nth-child(1)":{fill:"#80FF00"},"&:nth-child(2)":{fill:"#EB094D"},"&:nth-child(3)":{fill:"#FFB800"}});async function jn(i,a,e){const{executeTransaction:n}=te(),t=On(i,a,e);return!!await n(t)}function On(i,a,e){return{actions:[{account:ie.playersAle,name:"travel",authorization:[{actor:i.name,permission:i.authorization.permission}],data:{wallet:i.name,x:a,y:e}}]}}const Bn=i=>le({queryKey:[ee.playerDataState,i],queryFn:()=>kn(i),staleTime:1e3*60*20,enabled:!!ki.getState().user});async function kn(i){try{const a=await ne(i);return a||null}catch(a){return console.log(a),null}}const Nn=z("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,img:{w:"35px",h:"35px"},span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",textTransform:"capitalize",padding:"2px 5px",bg:"#333333",color:"#fff",ff:"$heading",fs:"10px",br:"5px"}}),Ln=z("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fw:900,ff:"$heading",fs:"16px",br:"5px","-webkit-text-stroke":"1px #000"}});function ji(i,a){switch(a){case"arena":return m.jsxs("svg",{fill:"rgba(235, 9, 77, 0.67)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("circle",{cx:"50",cy:"50",r:"50"}),m.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:i})]});case"dungeon":return m.jsx("div",{children:m.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("rect",{width:"17.6777",height:"17.6777",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 0 12.5)",fill:"rgba(0, 184, 251, 1)"}),m.jsx("rect",{width:"12.8565",height:"12.8565",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 3.37476 12.5)",fill:"#141423"}),m.jsx("rect",{width:"8.03534",height:"8.03534",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 6.83008 12.5)",fill:"rgba(0, 184, 251, 1)"})]})});case"youControl":return m.jsxs("svg",{fill:"rgba(173, 255, 0, 0.65)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("circle",{cx:"50",cy:"50",r:"50"}),m.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:i})]});case"miningEvent":return m.jsxs(Ln,{children:[m.jsx("span",{children:i}),m.jsxs("svg",{fill:"#FFB800",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490 490",children:[m.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:i}),m.jsx("polygon",{points:"245,456.701 490,33.299 0,33.299 "})]})]});case"portal":return m.jsxs(Nn,{children:[m.jsx("span",{children:i}),m.jsx("img",{loading:"lazy",src:"./assets/maps/portal.webp",alt:"portal"})]});case"flag":return m.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999,width:"14px",height:"14px"},children:[m.jsx("circle",{cx:"11",cy:"11",r:"11",fill:"#DB4447"}),m.jsx("circle",{cx:"11",cy:"11",r:"9",fill:"#141423"}),m.jsx("circle",{cx:"11",cy:"11",r:"7",fill:"#DB4447"})]});case"tavern":return m.jsx("div",{children:m.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("rect",{width:"17.6777",height:"17.6777",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 0 12.5)",fill:"#FFB800"}),m.jsx("rect",{width:"12.8565",height:"12.8565",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 3.37476 12.5)",fill:"#141423"}),m.jsx("rect",{width:"8.03534",height:"8.03534",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 6.83008 12.5)",fill:"#FFB800"})]})});default:return null}}const Mn=(i,a)=>{const e=String(i),n=String(a);let t="";for(const r of e)r=="0"?t=t+"a":r=="1"?t=t+"b":r=="2"?t=t+"c":r=="3"?t=t+"d":r=="4"?t=t+"e":r=="5"?t=t+"f":r=="6"?t=t+"g":r=="7"?t=t+"h":r=="8"?t=t+"i":r=="9"&&(t=t+"j");t=t+"x";for(const r of n)r=="0"?t=t+"a":r=="1"?t=t+"b":r=="2"?t=t+"c":r=="3"?t=t+"d":r=="4"?t=t+"e":r=="5"?t=t+"f":r=="6"?t=t+"g":r=="7"?t=t+"h":r=="8"?t=t+"i":r=="9"&&(t=t+"j");return t},Oi=D.lazy(()=>J(()=>import("./index-29423a27.js"),["assets/index-29423a27.js","assets/index-52528459.js","assets/index-55fec1ff.css"])),Bi=D.lazy(()=>J(()=>import("./index-636c88e5.js"),["assets/index-636c88e5.js","assets/index-52528459.js","assets/index-55fec1ff.css","assets/index-04593669.js","assets/iconBase-77550b99.js"])),Zn=D.lazy(()=>J(()=>import("./box-gloves-99d8e57f.js"),["assets/box-gloves-99d8e57f.js","assets/index-52528459.js","assets/index-55fec1ff.css"])),Hn=D.lazy(()=>J(()=>import("./travel-arrow-67e6bbb8.js"),["assets/travel-arrow-67e6bbb8.js","assets/index-52528459.js","assets/index-55fec1ff.css"])),Fn=D.lazy(()=>J(()=>import("./index-05f5933c.js"),["assets/index-05f5933c.js","assets/index-52528459.js","assets/index-55fec1ff.css"])),Vn=D.lazy(()=>J(()=>import("./index-f473c835.js"),["assets/index-f473c835.js","assets/index-52528459.js","assets/index-55fec1ff.css","assets/index-d71fe0b6.js","assets/inventory-query-84e8e847.js","assets/useQuery-a77f3a69.js","assets/atomic-api-a23fb87b.js","assets/toast-options-a79bf299.js","assets/use-transaction-0199cffb.js","assets/sleep-da79c358.js","assets/use-media-5f094bbc.js","assets/fighters-query-bcf492a4.js"])),Rn=D.lazy(()=>J(()=>import("./index-00716133.js").then(i=>i.i),["assets/index-00716133.js","assets/index-52528459.js","assets/index-55fec1ff.css","assets/index-c5457dfc.js","assets/index-9eebd590.js","assets/use-media-5f094bbc.js","assets/index-d71fe0b6.js","assets/sleep-da79c358.js","assets/use-transaction-0199cffb.js","assets/toast-options-a79bf299.js"])),In=({user:i})=>{var ii;const{areaSelected:a,setAreaSelected:e}=oe(),{updatePlayerData:n,updateLandsData:t}=ki(),r=Y.useRef(null),[o,l]=Y.useState([]),[u,d]=Y.useState([]),[s,f]=Y.useState(null),[p,v]=Y.useState(8),[h,g]=Y.useState(0),[S,_]=Y.useState(!1),[w,T]=Y.useState({label:i!=null&&i.planet?i.planet.charAt(0).toUpperCase()+i.planet.slice(1):"",value:(i==null?void 0:i.planet)||""}),[O,W]=Y.useState([]),[M,B]=Y.useState(O),[Z,V]=Y.useState([]),{data:A}=Bn((w==null?void 0:w.value)||""),R=Y.useCallback(()=>{var E,K,ri,oi;if(!i)return null;const c=((E=A==null?void 0:A.filter(P=>!!P.special_effect))==null?void 0:E.map(P=>({x:P.x-1,y:P.y-1,type:"portal",text:P.special_effect.slice(2,1/0)})))||[],b=((K=[...i.active_taverns,i.last_tavern].filter(P=>P.planet===(w==null?void 0:w.value)))==null?void 0:K.map(P=>({x:P.x-1,y:P.y-1,type:"tavern"})))||[],x=((ri=A==null?void 0:A.filter(P=>P.buildings.some(N=>N.building_name==="dungeon")))==null?void 0:ri.map(P=>({x:P.x-1,y:P.y-1,type:"dungeon"})))||[],j=[...c,...b,...x],y=j.reduce((P,N)=>(P.some(({value:li})=>li===N.type)||P.push({label:N.type.charAt(0).toUpperCase()+N.type.slice(1),value:N.type}),P),[]),k=(oi=(A==null?void 0:A.filter(P=>{var N;return!!((N=P.buildings)!=null&&N.length)}))||[])==null?void 0:oi.flatMap(P=>P.buildings);V(k),W(y),B(y),d(j)},[i,A,w]);Y.useEffect(()=>{const x=1920/Ti,j=1080/Yi,y=[];for(let k=0;k<Ti;k++){y[k]=[];for(let E=0;E<Yi;E++)y[k][E]={x:k*x,y:E*j}}l(y),R()},[R]);function Q(c){if(!i)return;if((s==null?void 0:s.x)===c.clientX&&(s==null?void 0:s.y)===c.clientY){f(null);return}if(f({x:c.clientX,y:c.clientY,type:c.type}),i.mapX===c.clientX&&i.mapY===c.clientY){g(0);return}const b=Math.sqrt(Math.pow(i.mapX-c.clientX,2)+Math.pow(i.mapY-c.clientY,2)),x=Math.ceil(b);g(x)}function I(){if(!i)return;const c={x:i.x,y:i.y,type:(H==null?void 0:H.type)||"",landId:Mn(i.x,i.y)};if(c.type==="tavern"){const b=(i==null?void 0:i.active_taverns.find(({x,y:j})=>x===c.x&&j===c.y))||((i==null?void 0:i.last_tavern.x)===c.x&&(i==null?void 0:i.last_tavern.y)===c.y?i==null?void 0:i.last_tavern:{});e({...c,...b});return}e({...c,...a})}async function ei(){try{if(_(!0),!i||!s||!await jn(i,(s==null?void 0:s.x)+1||0,(s==null?void 0:s.y)+1||0))return;await re(2e3),f(null),g(0);const b=await n();await t(),b!=null&&b.planet&&T({label:b.planet.charAt(0).toUpperCase()+b.planet.slice(1),value:b.planet}),ae.success("Travel successful")}catch(c){console.error(c)}finally{_(!1)}}const H=Y.useMemo(()=>u.find(({x:c,y:b})=>(i==null?void 0:i.mapX)===c&&(i==null?void 0:i.mapY)===b),[u,i]);return(a==null?void 0:a.type)==="arena"?m.jsx(Fn,{}):(a==null?void 0:a.type)==="tavern"?m.jsx(Vn,{}):(a==null?void 0:a.type)==="dungeon"?m.jsx(Rn,{}):m.jsxs(Tn,{children:[m.jsxs(Yn,{children:[u.some(({x:c,y:b})=>(i==null?void 0:i.mapX)===c&&(i==null?void 0:i.mapY)===b)&&m.jsx(Oi,{color:"black",onClick:I,icon:Zn,children:`Enter ${H==null?void 0:H.type}`}),m.jsxs(Oi,{isLoading:S,disabled:w.value!==(i==null?void 0:i.planet)||!s||!h||h>(((ii=i==null?void 0:i.activestats)==null?void 0:ii.action_points)||0)||S,color:"black",onClick:ei,icon:Hn,children:["Travel",w.value===(i==null?void 0:i.planet)&&m.jsxs("span",{children:["- ",h,m.jsx("img",{loading:"lazy",src:"/assets/icons/potion.png",alt:""})]})]})]}),m.jsxs(Xn,{ref:r,children:[m.jsxs(_n,{children:[m.jsxs(An,{children:[m.jsx(Bi,{options:se,selected:w,onSelected:c=>T(c)}),m.jsx(Bi,{title:"Select a filter",onMultipleSelected:c=>B(c),isMultipleItems:!0,multiplesSelected:M,options:O})]}),m.jsx(zn,{children:ue.map((c,b)=>m.jsx(xn,{disabled:!(Z!=null&&Z.some(x=>x.building_name===c.name.toLowerCase())),children:m.jsx("img",{loading:"lazy",src:`/assets/buildings/${c.img}.png`,alt:c.name,title:c.name})},b))})]}),(i==null?void 0:i.playerLand)&&m.jsx(En,{children:m.jsx(yn,{disablePadding:!0,initialScale:1,maxScale:2,doubleClick:{step:p},onPanningStop:c=>{c.state.scale!==1?v(-8):v(8)},children:m.jsx(Cn,{children:m.jsxs(Wn,{children:[m.jsx("img",{loading:"lazy",src:`/assets/maps/${w==null?void 0:w.value}.jpg`,alt:""}),o.map((c,b)=>c.map((x,j)=>{var k;const y=(k=u==null?void 0:u.filter(E=>M.some(K=>K.value!=="mixed"?K.value===E.type:!0)))==null?void 0:k.find(E=>E.x===b&&E.y===j);return m.jsxs(Dn,{onClick:()=>Q({clientX:b,clientY:j,type:(y==null?void 0:y.type)||""}),isSelected:(s==null?void 0:s.x)===b&&(s==null?void 0:s.y)===j,type:(y==null?void 0:y.type)||"empty",style:{top:x.y,left:x.x},children:[!!y&&ji((y==null?void 0:y.formattedTimeLeft)||(y==null?void 0:y.number)||(y==null?void 0:y.text)||"",(y==null?void 0:y.type)||""),i.planet===w.value&&i.mapX===b&&i.mapY===j&&ji("","flag")]},x.x+x.y)}))]})})})})]})]})};export{In as default};

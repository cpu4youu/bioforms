import{g as _,S as o,e as n,u as h,w as l,N as d}from"./index-32d28607.js";import{u as p}from"./useQuery-20f20cfd.js";const S=async e=>await _({options:{code:o.battleAle,index_position:2,key_type:"i64",limit:"1000",scope:o.battleAle,table:"fighters",lower_bound:e,upper_bound:e}}),D=e=>p({queryKey:[n.fightersState,e],queryFn:()=>w(e),staleTime:1e3*60*60,enabled:!!h.getState().user});async function P(e){return await l.invalidateQueries([n.fightersState,e])}async function w(e){try{const t=await S(e);return t?T(t):null}catch(t){return console.log(t),null}}function T(e){const t=l.getQueryData(n.BattleConfigState);return e.map(a=>{const i=Math.floor((Date.now()-new Date(a.creation_date).getTime())/864e5);let s=1;t!=null&&t.age_penaly_percent_day&&(s=t==null?void 0:t.age_penaly_percent_day);const u=s/100,c=i*u;["health_max","health_min","damage_max","damage_min"].forEach(r=>{a.stats[r]=a.stats[r]*(Math.pow(1.1,a.stats.level)*c+1)});const y=new Date().getTime(),g=new Date(a.next_payday).getTime(),m=d(a);return{...a,stats:{...a.stats,...m},is_disabled:y>g}})}export{P as o,D as u};

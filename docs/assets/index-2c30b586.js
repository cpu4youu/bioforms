import{s,e as M,r as w,R as L,_ as E,u as B,j as t}from"./index-4034d623.js";import{u as D}from"./fighters-query-a752de7e.js";import{u as R}from"./index-cce2017a.js";import O from"./index-8e185a16.js";import{u as N}from"./use-media-ef909521.js";import{u as Q}from"./inventory-query-f10fa785.js";import{u as U}from"./index-0daa0e1b.js";import{v as H}from"./v4-4a60fe23.js";import"./useQuery-66878643.js";import"./atomic-api-67b3b924.js";import"./toast-options-5544c8ed.js";import"./index-585f9113.js";import"./sleep-da79c358.js";import"./use-transaction-c828b2ca.js";const V=s("div",{display:"flex",direction:"column",w:"100%"}),Y=s("div",{display:"flex",direction:"column",gap:"10px"}),q=s("div",{display:"flex",justify:"start",gap:"15px","@xlg":{justify:"center"},"@xsm":{gap:"5px"}}),G=s("h4",{display:"flex",textTransform:"uppercase",color:"#fff",ff:"$heading","@xlg":{justify:"center"}}),J=s("div",{gridArea:"content",ml:"20px",mt:"20px",img:{"&:hover":{transform:"scale(1.05)",zIndex:"4","-webkit-filter":"drop-shadow(0px 0px 8px #00BAFF)",filter:"drop-shadow(0px 0px 5px #00BAFF)"},"&:nth-of-type(1)":{transform:"translate(5px,20px) rotate(-20deg)",zIndex:"3","&:hover":{transform:"scale(1.05) translate(5px,20px) rotate(-20deg)",zIndex:"4"}},"&:nth-of-type(2)":{transform:"translate(-5px,20px) rotate(20deg)",zIndex:"1","&:hover":{transform:"scale(1.05) translate(-5px,20px) rotate(20deg)",zIndex:"4"}}},variants:{cardSelected:{0:{img:{"&:nth-of-type(1)":{zIndex:"3"},"&:nth-of-type(2)":{opacity:"0.2"}}},1:{img:{"&:nth-of-type(1)":{opacity:"0.2"},"&:nth-of-type(2)":{}}}}},"@xlg":{display:"flex",justify:"center"},"@sm":{mb:"30px"}}),P=s("img",{cursor:"pointer",transition:"all 0.2s ease-in-out",w:"75px",h:"100px",zIndex:"2",variants:{isSelected:{true:{filter:"grayscale(100%)"}}},"@sm":{w:"65px",h:"90px"}}),K=s("div",{gridArea:"inventory",display:"flex",direction:"column",w:"100%",mt:"50px",span:{ff:"$heading",fs:"16px",fw:"bold",color:"#fff",textAlign:"center"},"@sm":{mt:"20px"}});s("div",{d:"flex",align:"center",gap:"20px",mb:"20px","@sm":{m:"0px 0 20px",gap:"10px",flexWrap:"wrap",span:{my:"10px"}}});s("button",{d:"flex",align:"center",justify:"center",fs:"12px",ff:"$heading",fw:"$bold",color:"$white500",variants:{isSelected:{true:{textUnderlineOffset:"0.5em",textDecoration:"underline"}}},"@sm":{fs:"14px"}});const X=s("div",{d:"flex",flexWrap:"wrap",gap:"10px",overflow:"auto",w:"100%",maxH:"calc(100vh - 590px)"}),Z=M({"0%":{backgroundPosition:"0% 0%"},"100%":{backgroundPosition:"-135% 0%"}}),ee=s("div",{w:"75px",h:"100px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${Z} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}}),te=s("div",{display:"flex",direction:"column",mt:"40px"}),ne=s("span",{ff:"$heading",fs:"16px",fw:"bold",color:"#00BAFF",mb:"20px","@xlg":{textAlign:"center"}}),se=s("div",{display:"flex"}),re=s("div",{display:"flex",direction:"column",gap:"10px"}),oe=s("h3",{ff:"$heading",fs:"16px",fw:"bold",color:"#00BAFF"}),ae=s("div",{display:"flex",gap:"5px",mb:"20px",button:{w:"unset",h:"unset",borderWidth:"1px",minW:"unset",padding:"2px 5px",fs:"10px",br:"6px",textTransform:"capitalize"},"@sm":{width:"100%",flexWrap:"wrap"}}),ie=s("div",{display:"flex"}),le=s("div",{display:"flex",flexWrap:"wrap",gap:"10px"}),de=["gem","nature","metal","neutral","fire","air"];function pe(){const{selectedCards:p,setSelectedCards:u,myTeam:g,setMyTeam:v}=U(),[o,F]=w.useState([]),[m,h]=w.useState("fighter"),[y,x]=w.useState(0),[C,j]=w.useState("level.worlds"),[f,l]=w.useState(-1),{data:T,isLoading:b}=Q(C);function A(n){if(l(-1),h("fighter"),n===y){x(-1);return}x(n)}function z(n){if(x(-1),h("nft"),n===f){l(-1);return}l(n),j(n===0?"crew.worlds":n===1?"arms.worlds":"crew.worlds")}function k(n){if(!n){const i=p.map((e,r)=>{if(r!==f)return e}),d=f+1;if(l(d),u(i),j(d===0?"crew.worlds":d===1?"arms.worlds":"crew.worlds"),d>1){l(-1);return}return}if(p.some(i=>(i==null?void 0:i.asset_id)===(n==null?void 0:n.asset_id))){l(-1);return}const a=p.map((i,d)=>d===f?n:i),c=f+1;if(l(c),u(a),j(c===0?"crew.worlds":c===1?"arms.worlds":"crew.worlds"),c>1){l(-1);return}}function S(n){if(o.includes(n)){F(o.filter(a=>a!==n));return}F([...o,n])}function I(n){const a=g.map((i,d)=>d===y?n:i);v(a);const c=y+1;if(c===5){x(-1);return}x(c)}function _(n){return p.some(a=>(a==null?void 0:a.asset_id)!==n.asset_id)}return{selectedCards:p,inventoryPosition:f,filterSelected:o,myTeam:g,fighterPosition:y,itemSelected:m,inventory:T,isInventoryLoading:b,handleFighterPosition:A,handleInventoryPosition:z,handleSelectCard:k,handleSelectFilter:S,handleAddFighter:I,filterInventoryCards:_}}const $=L.lazy(()=>E(()=>import("./index-126d1356.js"),["assets/index-126d1356.js","assets/index-4034d623.js","assets/index-55fec1ff.css","assets/iconBase-ba930d85.js"])),Ie=()=>{var S,I,_,n,a,c,i,d;const{setSelectedFighter:p}=R(),{isSuperLarge:u}=N(),g=B(e=>e.user),{data:v}=D(g==null?void 0:g.name),{selectedCards:o,inventoryPosition:F,filterSelected:m,myTeam:h,fighterPosition:y,inventory:x,isInventoryLoading:C,itemSelected:j,handleAddFighter:f,handleInventoryPosition:l,handleFighterPosition:T,handleSelectCard:b,handleSelectFilter:A,filterInventoryCards:z}=pe(),k=w.useMemo(()=>h.map(e=>({id:H(),...e})),[h]);return t.jsxs(V,{children:[t.jsxs(Y,{children:[t.jsx(G,{children:"YOUR TEAM"}),t.jsx(q,{children:k.map((e,r)=>t.jsx($,{onMouseEnter:()=>u&&e?null:p(e),onMouseLeave:()=>u?null:p(null),onMouseDown:()=>T(r),isSelected:y===r,fighter:e},e==null?void 0:e.id))})]}),t.jsxs(J,{cardSelected:F,children:[t.jsx(P,{onClick:()=>l(0),loading:"lazy",src:o[0]?`/assets/aw-nft-images/${(S=o[0])==null?void 0:S.template.template_id}.webp`:"/assets/default-card.png",alt:(_=(I=o[0])==null?void 0:I.data)==null?void 0:_.name}),t.jsx(P,{onClick:()=>l(1),loading:"lazy",src:o[1]?`/assets/aw-nft-images/${(n=o[1])==null?void 0:n.template.template_id}.webp`:"/assets/default-card.png",alt:(c=(a=o[1])==null?void 0:a.data)==null?void 0:c.name})]}),j==="fighter"?t.jsxs(te,{children:[t.jsx(ne,{children:"Select your Team"}),t.jsxs(se,{children:[t.jsxs(re,{children:[t.jsx(oe,{children:"Filter"}),t.jsx(ae,{children:de.map(e=>t.jsx(O,{color:m.includes(e)?"blue":"black",onClick:()=>A(e),children:e},e))})]}),t.jsx(ie,{})]}),t.jsx(le,{children:(i=v==null?void 0:v.filter(e=>m!=null&&m.length?m.some(r=>e.element===r):!0))==null?void 0:i.map(e=>t.jsx($,{disabled:h.some(r=>e.fighter_id===(r==null?void 0:r.fighter_id)),onMouseEnter:()=>u?null:p(e),onMouseLeave:()=>u?null:p(null),onClick:()=>f(e),fighter:e},e==null?void 0:e.fighter_id))})]}):t.jsx(K,{children:o.length!==0&&F===-1?t.jsx("span",{children:"Select a card"}):t.jsx(X,{children:C?new Array(12).fill(0).map((e,r)=>t.jsx(ee,{},r)):t.jsxs(t.Fragment,{children:[t.jsx(P,{onClick:()=>b(void 0),src:"/assets/default-card.png",alt:"default card"}),(d=x==null?void 0:x.filter(z))==null?void 0:d.map(e=>{var r;return t.jsx(P,{isSelected:o.some(W=>(W==null?void 0:W.asset_id)===(e==null?void 0:e.asset_id)),onClick:()=>b(e),loading:"lazy",src:`/assets/aw-nft-images/${e==null?void 0:e.template.template_id}.webp`,alt:(r=e==null?void 0:e.data)==null?void 0:r.name},e==null?void 0:e.asset_id)})]})})})]})};export{Ie as default};

import{g as x,S as i,e as y,u as f,s as u,R as c,_ as g,j as s,r as h,Q as n}from"./index-2bb4cf2e.js";import{u as b}from"./useQuery-71cb0283.js";import w from"./index-82b65957.js";import{u as S}from"./index-0bfe9c8e.js";import{u as T}from"./use-transaction-842dae15.js";import{v as _}from"./v4-4a60fe23.js";import"./toast-options-8783363e.js";const j=async()=>await x({options:{code:i.usptsWorlds,index_position:1,key_type:"i64",limit:"100",reverse:!0,scope:i.usptsWorlds,table:"pointoffers"}}),v=()=>b({queryKey:[y.PointOffersState],queryFn:()=>O(),staleTime:1e3*60*60,enabled:!!f.getState().user});async function O(){try{return await j()}catch(t){return console.log(t),null}}const P=u("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",padding:"40px 40px",gap:"50px",mt:"10px",bg:"#141423",br:"15px",maxW:"524px",w:"100%",button:{justify:"center",h:"50px",fw:"bold"},img:{h:"233px",w:"150px",objectFit:"contain"},variants:{isHidden:{true:{"@sm":{display:"none"}}}},"@xmd":{maxW:"100%"}}),R=u("div",{d:"flex",fw:"bold",ff:"$heading",fs:"16px",color:"white"}),W=u("button",{display:"none",align:"flex-start",justify:"center",color:"#fff",fs:"30px",w:"50px",h:"50px",top:"0px",right:"0px",position:"absolute","@xmd":{d:"flex"}});async function A(t,o){const{executeTransaction:e}=T(),r=C(t,o);return!!await e(r)}function C(t,o){return{actions:[{account:i.usptsWorlds,name:"redeempntnft",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{user:t.name,offer_id:o}}]}}const E=c.lazy(()=>g(()=>import("./index-98a120e3.js"),["assets/index-98a120e3.js","assets/index-2bb4cf2e.js","assets/index-55fec1ff.css","assets/index-0bfe9c8e.js","assets/index-82b65957.js"])),F=c.memo(()=>{const{data:t}=v();return s.jsx(s.Fragment,{children:t==null?void 0:t.map(o=>s.jsx(E,{...o},_()))})}),L=c.memo(()=>{var p;const{user:t,updatePlayerData:o}=f(),{selectedPointOffer:e,setSelectedPointOffer:r}=S(),[a,l]=h.useState(!1);async function d(){if(!t)return n.error("You need to be logged in to buy items");if(!e)return n.error("You need to select a NFT to buy items");l(!0);try{await A(t,e.template_id)&&(await o(),n.success("Item bought successfully"))}catch{n.error("Error buying item")}finally{l(!1),r(null)}}return s.jsxs(P,{children:[s.jsx(W,{onClick:()=>r(null),children:"x"}),s.jsx(R,{children:"Are you sure you want to spend 192,000 Alien Worlds shards to craft this NFT?"}),s.jsx("img",{loading:"lazy",src:`/assets/aw-nft-images/${e==null?void 0:e.template_id}.webp`,alt:""}),s.jsxs(w,{isLoading:a,disabled:a,onClick:d,color:"blue",children:["Buy now for ",(p=e==null?void 0:e.required)==null?void 0:p.toLocaleString("en-US")," AW shards"]})]})});F.displayName="PointOffersList";L.displayName="PointOffersSelection";export{F as PointOffersList,L as PointOffersSelection};

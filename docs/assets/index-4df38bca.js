import{s as a,g as w,S as c,e as b,u as l,q as j,R as y,_ as h,a as _,r as m,j as t,Q as S}from"./index-37d3433e.js";import{u as T}from"./useQuery-37804139.js";import{s as q}from"./sleep-da79c358.js";import{u as A}from"./use-transaction-36d26d5c.js";import{v as k}from"./v4-4a60fe23.js";const Q=a("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main main"
  `,gridTemplateRows:"70px 1fr",gridTemplateColumns:"1fr 1fr .5fr",gap:"10px",br:"15px",w:"100%",h:"100%"}),C=a("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),R=a("div",{gridArea:"main",d:"flex",position:"relative",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",padding:"10px",br:"0 15px 15px 15px",bg:"#141423",backgroundImage:"url(/assets/background/bg-quests.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}),z=a("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",position:"absolute",top:"-40px",left:"0px"}),r=a("button",{d:"flex",align:"center",justify:"center",gap:"5px",padding:"10px 15px",color:"#fff",bg:"#141423",fs:"12px",img:{w:"20px",h:"20px",objectFit:"contain"},"&:first-child":{br:"15px 0px 0px 0px"},"&:last-child":{br:"0 15px 0 0"},variants:{isSelected:{true:{bg:"#19192D"}}}}),E=a("div",{d:"flex",align:"center",justify:"center",w:"100%",gap:"10px",maxH:"calc(100vh - 175px)",overflowY:"auto","@md":{flexDirection:"column",gap:"25px"}}),I=a("span",{color:"#fff",fw:"bold",fs:"28px",ff:"$heading"}),D=async s=>await w({options:{code:c.questAle,index_position:1,key_type:"i64",limit:"1000",scope:c.questAle,table:"activequests",lower_bound:s,upper_bound:s}}),F=()=>T({queryKey:[b.ActiveQuestsState],queryFn:()=>M(),staleTime:1e3*60*60,enabled:!!l.getState().user});async function H(){return await j.invalidateQueries(b.ActiveQuestsState)}async function M(){const s=l.getState().user;if(!s)return null;try{const e=await D(s.name);return e==null?void 0:e[0]}catch(e){return console.log(e),null}}async function N(s){const{executeTransaction:e}=A(),i=O(s);return!!await e(i)}function O(s){return{actions:[{account:c.questAle,name:"getquests",authorization:[{actor:s.name,permission:s.authorization.permission}],data:{wallet:s.name}}]}}const P=y.lazy(()=>h(()=>import("./index-e8bb5728.js"),["assets/index-e8bb5728.js","assets/index-37d3433e.js","assets/index-55fec1ff.css","assets/index-d54b856c.js"])),L=y.lazy(()=>h(()=>import("./index-1406e355.js"),["assets/index-1406e355.js","assets/index-37d3433e.js","assets/index-55fec1ff.css","assets/index-e8bb5728.js","assets/index-d54b856c.js","assets/use-transaction-36d26d5c.js","assets/toast-options-baa6c4a9.js","assets/sleep-da79c358.js","assets/useQuery-37804139.js","assets/v4-4a60fe23.js"])),W=()=>{var x,g,f;const s=l(_(n=>n.user)),{data:e}=F(),[i,u]=m.useState("day"),[p,d]=m.useState(!1);function o(n){u(n)}async function v(){d(!0);try{if(!await N(s)){console.log("Failed to get new quests");return}await q(3e3),await H(),S.success("New quests generated successfully!")}catch(n){console.log(n)}finally{d(!1)}}return t.jsxs(Q,{children:[t.jsx(C,{children:(((x=e==null?void 0:e.quests)==null?void 0:x.length)??0)<9&&t.jsx(P,{isLoading:p,disabled:p,onClick:v,children:"New Quests"})}),t.jsxs(R,{children:[t.jsxs(z,{children:[t.jsxs(r,{isSelected:i==="day",onClick:()=>o("day"),children:["Daily",t.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]}),t.jsxs(r,{isSelected:i==="week",onClick:()=>o("week"),children:["Weekly",t.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]}),t.jsxs(r,{isSelected:i==="month",onClick:()=>o("month"),children:["Monthly",t.jsx("img",{loading:"lazy",src:"/assets/icons/question.svg",alt:""})]})]}),t.jsx(E,{children:e?(f=(g=e==null?void 0:e.quests)==null?void 0:g.filter(n=>n.quest_scope===i))==null?void 0:f.map(n=>t.jsx(L,{...n},k())):t.jsx(I,{children:"No active quests found"})})]})]})},U=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{U as i,H as o};

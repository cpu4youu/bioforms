import{s as t,g as T,S as g,u as l,e as _,R as u,_ as m,r as o,j as e,Q as C}from"./index-c43343c7.js";import{s as A}from"./shimmer-4d8417d6.js";import{s as I}from"./sleep-da79c358.js";import{c as y,a as E}from"./calculateTImeLeft-7c0113ed.js";import{u as R}from"./useQuery-5d538c17.js";import{u as k}from"./use-transaction-f8785654.js";import"./toast-options-205b7f7e.js";const S=t("div",{d:"grid",gridTemplateAreas:`
    "empty header"
    "main main"
  `,gridTemplateRows:"68px 1fr",gridTemplateColumns:"3fr 1fr",gap:"10px",br:"15px",w:"100%",h:"100%"}),L=t("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{direction:"column",alignItems:"center",justifyContent:"center",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},variants:{isCooldown:{true:{button:{bg:"#272727 !important",border:"1px solid #3E3E3E",pointerEvents:"none"}}}}}),$=t("div",{gridArea:"main",position:"relative",d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-center",justifyContent:"flex-center",w:"100%",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",gap:"10px",padding:"10px",br:"0 15px 15px 15px",bg:"#141423",backgroundImage:"url(/assets/background/bg-leaderboard.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat","@md":{h:"calc(100vh - 175px)",direction:"column"}}),z=t("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-center",justifyContent:"flex-center",br:"15px 15px 0 0",bg:"#141423",position:"absolute",top:"-35px",left:"0"}),f=t("button",{d:"flex",alignItems:"center",justifyContent:"center",gap:"8px",border:"1px solid rgba(0, 0, 0, 0.25)",padding:"10px 20px",color:"#fff",fs:"12px",ff:"$heading",img:{w:"12px",h:"12px"},"&:last-child":{br:"0 15px 0 0"},"&:first-child":{br:" 15px 0 0 0"},variants:{isActive:{true:{bg:"#19192D"}}}});t("div",{d:"flex",direction:"column",w:"100%",padding:"24px 30px",minH:"calc(100vh - 175px)",maxH:"calc(100vh - 175px)",overflowY:"auto","@md":{padding:"14px 0px",h:"unset"}});t("span",{d:"flex",justifyContent:"center",w:"100%",color:"#fff",fs:"16px",ff:"$heading"});t("div",{d:"flex",gap:"5px",flexWrap:"wrap",mt:"20px",w:"100%"});t("div",{d:"flex",alignItems:"center",gap:"3px",w:"100%",span:{d:"flex",alignItems:"center",justifyContent:"center",h:"34px",bg:"rgba(255, 255, 255, 0.03)",color:"#fff",ff:"$heading",fs:"16px",fontWeight:500}});t("div",{d:"grid",gridColumnStart:3,gridTemplateColumns:"32px 72px minmax(200px, .3fr) minmax(200px, 3fr)",alignItems:"center",gap:"3px",w:"100%",">span":{d:"flex",alignItems:"center",h:"34px",bg:"rgba(255, 255, 255, 0.03)",padding:"0 5px 0 5px",color:"#fff",ff:"$heading",fs:"16px",fontWeight:500,"&:first-of-type":{justifyContent:"center"}}});t("div",{h:"72px",d:"flex",alignItems:"center",justifyContent:"center",bg:"rgba(255, 255, 255, 0.06)",color:"#fff",ff:"$heading",fs:"16px"});t("div",{h:"72px",d:"flex",alignItems:"center",justifyContent:"center",bg:"rgba(255, 255, 255, 0.06)",color:"#fff",ff:"$heading",fs:"16px"});t("div",{h:"72px",d:"flex",alignItems:"center",gap:"10px",bg:"rgba(255, 255, 255, 0.06)",padding:"2px 10px 2px 2px",color:"#fff",ff:"$heading",fs:"16px",img:{w:"68px",h:"68px"}});t("div",{h:"72px",d:"flex",alignItems:"center",bg:"rgba(255, 255, 255, 0.06)",color:"#fff",ff:"$heading",fs:"16px",pl:"12px"});t("div",{w:"96px",h:"96px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${A} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}});const P=async a=>await T({options:{code:g.dungeonsAle,index_position:2,key_type:"i64",limit:"1000",reverse:!0,lower_bound:a,upper_bound:a,scope:g.dungeonsAle,table:"cdclaim"}}),H=()=>R({enabled:!!l.getState().user,queryKey:[_.DungeonCdClaimDataState],queryFn:()=>D(),staleTime:1e3*60*20});async function D(){const a=l.getState().user;try{const i=await P(a==null?void 0:a.name);return i!=null&&i[0]?i:null}catch(i){return console.log(i),null}}async function F(a){const{executeTransaction:i}=k(),s=W(a);return!!await i(s)}function W(a){return{actions:[{account:g.dungeonsAle,name:"lbclaim",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{wallet:a.name}}]}}const M=u.lazy(()=>m(()=>import("./index-810fc098.js"),["assets/index-810fc098.js","assets/index-c43343c7.js","assets/index-55fec1ff.css","assets/index-4a789fe5.js"])),O=u.lazy(()=>m(()=>import("./index-c4c46fa8.js"),["assets/index-c4c46fa8.js","assets/index-c43343c7.js","assets/index-55fec1ff.css","assets/shimmer-4d8417d6.js","assets/formaters-88553176.js","assets/useQuery-5d538c17.js"])),Q=u.lazy(()=>m(()=>import("./index-1ae85e3b.js"),["assets/index-1ae85e3b.js","assets/index-c43343c7.js","assets/index-55fec1ff.css","assets/shimmer-4d8417d6.js","assets/formaters-88553176.js","assets/useQuery-5d538c17.js"])),G=()=>{const a=l(({user:r})=>r),i=l(({updatePlayerData:r})=>r),{data:s}=H(),[d,b]=o.useState(!1),[c,p]=o.useState("dungeons"),[x,h]=o.useState("");async function j(){try{if(b(!0),!await F(a))return;await I(3e3),await i(),C.success("Rewards claimed successfully!");return}catch(r){console.error(r)}finally{b(!1)}}const n=o.useMemo(()=>s?s.find(r=>r.item==="lbclaim"):null,[s]),v=o.useCallback(()=>{if(!(n!=null&&n.cooldown_expired))return;const r=y(new Date(n==null?void 0:n.cooldown_expired));console.log(r);const w=E(r,"hours");h(w)},[n]);return o.useEffect(()=>{if(n!=null&&n.cooldown_expired&&!y(new Date(n==null?void 0:n.cooldown_expired))){h("");return}const r=setInterval(()=>{v()},1e3);return()=>{clearInterval(r)}},[v,n==null?void 0:n.cooldown_expired]),e.jsxs(S,{children:[e.jsx(L,{isCooldown:!!x,children:e.jsx(M,{isLoading:d,disabled:d,onClick:j,children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Rewards available in"}),x]}):"Claim daily Rewards"})}),e.jsxs($,{children:[e.jsxs(z,{children:[e.jsxs(f,{isActive:c==="dungeons",onClick:()=>p("dungeons"),children:[e.jsx("span",{children:"Dungeons"}),e.jsx("img",{src:"/assets/icons/dungeons.svg",alt:""})]}),e.jsxs(f,{isActive:c==="arena",onClick:()=>p("arena"),children:[e.jsx("span",{children:"Arena"}),e.jsx("img",{src:"/assets/icons/arena.svg",alt:""})]}),e.jsxs(f,{isActive:c==="tournament",onClick:()=>p("tournament"),children:[e.jsx("span",{children:"Tournament"}),e.jsx("img",{src:"/assets/icons/tournament.svg",alt:""})]})]}),c==="dungeons"&&e.jsx(O,{}),c==="arena"&&e.jsx(Q,{})]})]})};export{G as default};

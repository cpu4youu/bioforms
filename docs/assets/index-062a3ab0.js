import{g as m,S as i,d as x,u as p,s as u,R as y,_ as g,j as s,r as h,Q as n}from"./index-de94dd96.js";import{u as b}from"./useQuery-81239c59.js";import w from"./index-fc00affe.js";import{u as T}from"./index-25cfe113.js";import{u as S}from"./use-transaction-dc9600a1.js";import{v as _}from"./v4-4a60fe23.js";import"./toast-options-4a31c38b.js";const j=async()=>await m({options:{code:i.usptsWorlds,index_position:1,key_type:"i64",limit:"100",reverse:!0,scope:i.usptsWorlds,table:"pointoffers"}}),v=()=>b({queryKey:[x.PointOffersState],queryFn:()=>R(),staleTime:1e3*60*60,enabled:!!p.getState().user});async function R(){try{return await j()}catch(t){return console.log(t),null}}const W=u("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",padding:"40px 40px",gap:"50px",mt:"10px",bg:"#141423",br:"15px",maxW:"524px",w:"100%",button:{justify:"center",h:"50px",fw:"bold"},img:{h:"233px",w:"150px",objectFit:"contain"},variants:{isHidden:{true:{"@sm":{display:"none"}}}},"@xmd":{maxW:"100%"}}),A=u("div",{d:"flex",fw:"bold",ff:"$heading",fs:"16px",color:"white"}),C=u("button",{display:"none",align:"flex-start",justify:"center",color:"#fff",fs:"30px",w:"50px",h:"50px",top:"0px",right:"0px",position:"absolute","@xmd":{d:"flex"}});async function E(t,r){const{executeTransaction:e}=S(),o=F(t,r);return!!await e(o)}function F(t,r){return{actions:[{account:i.usptsWorlds,name:"redeempntnft",authorization:[{actor:t.name,permission:t.authorization.permission}],data:{user:t.name,offer_id:r}}]}}const O=y.lazy(()=>g(()=>import("./index-835c0263.js"),["assets/index-835c0263.js","assets/index-de94dd96.js","assets/index-55fec1ff.css","assets/index-25cfe113.js","assets/index-fc00affe.js"])),k=()=>{const{data:t}=v();return s.jsx(s.Fragment,{children:t==null?void 0:t.map(r=>s.jsx(O,{...r},_()))})},q=()=>{var l;const{user:t,updatePlayerData:r}=p(),{selectedPointOffer:e,setSelectedPointOffer:o}=T(),[a,c]=h.useState(!1);async function d(){if(!t)return n.error("You need to be logged in to buy items");if(!e)return n.error("You need to select a NFT to buy items");c(!0);try{await E(t,e.template_id)&&(await r(),n.success("Item bought successfully"))}catch{n.error("Error buying item")}finally{c(!1),o(null)}}return s.jsxs(W,{children:[s.jsx(C,{onClick:()=>o(null),children:"x"}),s.jsx(A,{children:"Are you sure you want to spend 192,000 Alien Worlds shards to craft this NFT?"}),s.jsx("img",{loading:"lazy",src:`/assets/aw-nft-images/${e==null?void 0:e.template_id}.webp`,alt:""}),s.jsxs(w,{isLoading:a,disabled:a,onClick:d,color:"blue",children:["Buy now for ",(l=e==null?void 0:e.required)==null?void 0:l.toLocaleString("en-US")," AW shards"]})]})};export{k as PointOffersList,q as PointOffersSelection};

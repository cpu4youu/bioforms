import{g as i,S as o,t as h,u as l,e as u,q as g,Q as m}from"./index-93e35201.js";import{u as c}from"./useQuery-ab92d52a.js";import{s as y}from"./sleep-da79c358.js";const q=()=>{const t="abcdefghijklmnopqrstuvwxyz12345";let n="";for(let a=0;a<12;a++){const r=Math.round(Math.random()*12+1);n+=t[r]}return n},b=async t=>await i({options:{code:o.battleAle,index_position:1,limit:"1000",lower_bound:t,upper_bound:t,scope:o.battleAle,table:h.history}}),A=t=>c({enabled:!!l.getState().user,queryKey:[u.HistoryDataState,t],queryFn:()=>f(t),staleTime:1e3*60*20});async function f(t){try{const e=await b(t);if(!e)return null;const n=e==null?void 0:e.find(s=>s.history_id===t);if(!n)return null;const a={...n,team1_fighters:n.team1_fighters.filter(s=>typeof s.fighter_id=="number")},r=d(a.team1_end_fighters);return{...a,highlightedStats:r}}catch(e){return console.log(e),null}}function d(t){const e={};return t.forEach(n=>{Object.entries(n.battlestats).forEach(([a,r])=>{typeof r=="number"&&(!e[a]||r>e[a])&&(e[a]=r)})}),e}async function H(t,e){await y(5e3);const n=await f(t);return n?(g.setQueryData([u.HistoryDataState,t],n),e(t),m.success("Fight Started !"),n):null}const p=async(t,e)=>{const n=await i({options:{code:o.battleAle,index_position:1,limit:"1000",scope:t,table:"weather",lower_bound:e,upper_bound:e}});return(n==null?void 0:n[0])||null},x=(t,e)=>c({enabled:!!l.getState().user,queryKey:[u.WeatherState,t,e],queryFn:()=>S(t,e),staleTime:1e3*60*20});async function S(t,e){try{return await p(t,e)}catch(n){return console.log(n),null}}export{q as a,A as b,H as g,x as u};

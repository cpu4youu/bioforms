import{g as m,S as c,e as x,u as p,s as u,R as l,_ as y,j as r,r as g,Q as a}from"./index-8891f2a7.js";import{u as h}from"./useQuery-597d3db4.js";import b from"./index-cd2df217.js";import{u as w}from"./index-59e118b6.js";import{u as S}from"./use-transaction-d5204d54.js";import{v as T}from"./v4-4a60fe23.js";import"./index-fa3a6fb9.js";import"./toast-options-3ad8520a.js";const _=async()=>await m({options:{code:c.usptsWorlds,index_position:1,key_type:"i64",limit:"100",reverse:!0,scope:c.usptsWorlds,table:"pointoffers"}}),j=()=>h({queryKey:[x.PointOffersState],queryFn:()=>v(),staleTime:1e3*60*60,enabled:!!p.getState().user});async function v(){try{return await _()}catch(e){return console.log(e),null}}const D=u("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",padding:"40px 40px",gap:"50px",mt:"10px",bg:"#141423",br:"15px",maxW:"524px",w:"100%",button:{justify:"center",h:"50px",fw:"bold"},img:{h:"233px",w:"150px",objectFit:"contain"},variants:{isHidden:{true:{"@sm":{display:"none"}}}},"@xmd":{maxW:"100%"}}),R=u("div",{d:"flex",fw:"bold",ff:"$heading",fs:"16px",color:"white"}),W=u("button",{display:"none",align:"flex-start",justify:"center",color:"#fff",fs:"30px",w:"50px",h:"50px",top:"0px",right:"0px",position:"absolute","@xmd":{d:"flex"}});async function A(e,s){const{executeTransaction:t}=S(),n=C(e,s);return!!await t(n)}function C(e,s){return{actions:[{account:c.usptsWorlds,name:"redeempntnft",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{user:e.name,offer_id:s}}]}}const E=l.lazy(()=>y(()=>import("./index-a35e5f29.js"),["assets/index-a35e5f29.js","assets/index-8891f2a7.js","assets/index-55fec1ff.css","assets/index-59e118b6.js","assets/useQuery-597d3db4.js","assets/index-cd2df217.js","assets/index-fa3a6fb9.js"])),F=l.memo(()=>{var s;const{data:e}=j();return r.jsx(r.Fragment,{children:(s=e==null?void 0:e.filter(t=>{const n=new Date;return new Date(t.end).getTime()-n.getTime()>0}))==null?void 0:s.map(t=>r.jsx(E,{...t},T()))})}),L=l.memo(()=>{const{user:e,updatePlayerData:s}=p(),{selectedPointOffer:t,setSelectedPointOffer:n}=w(),[o,i]=g.useState(!1);async function f(){if(!e)return a.error("You need to be logged in to buy items");if(!t)return a.error("You need to select a NFT to buy items");i(!0);try{await A(e,t.template_id)&&(await s(),a.success("Item bought successfully"))}catch{a.error("Error buying item")}finally{i(!1),n(null)}}return r.jsxs(D,{children:[r.jsx(W,{onClick:()=>n(null),children:"x"}),r.jsxs(R,{children:["Are you sure you want to spend"," ",(((t==null?void 0:t.required)||1)/10).toLocaleString("en-US")," Alien Worlds shards to craft this NFT?"]}),r.jsx("img",{loading:"lazy",src:`/assets/aw-nft-images/${t==null?void 0:t.template_id}.webp`,alt:""}),r.jsxs(b,{isLoading:o,disabled:o,onClick:f,color:"blue",children:["Buy now for ",(((t==null?void 0:t.required)||1)/10).toLocaleString("en-US")," AW shards"]})]})});F.displayName="PointOffersList";L.displayName="PointOffersSelection";export{F as PointOffersList,L as PointOffersSelection};

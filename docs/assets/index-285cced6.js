import{s as r,d as S,g as h,S as g,e as _,u as y,R as f,_ as m,r as b,j as t}from"./index-37d3433e.js";import{u as j}from"./useQuery-37804139.js";const v=r("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main side"
  `,gridTemplateRows:"68px 1fr",gap:"10px",br:"15px",w:"100%",h:"100%",variants:{isPackSelected:{true:{"@xmd":{gridTemplateAreas:`
            "header header header"
            "side side side"
          `}},false:{"@xmd":{gridTemplateAreas:`
              "header header header"
              "main main main"
            `}}}},"@lg":{gridTemplateColumns:"1fr 1fr 2fr"},"@xmd":{gap:"8px"},"@sm":{}}),P=r("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),w=r("div",{gridArea:"main",d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",position:"relative",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",padding:"10px",br:"0 15px 15px 15px",bg:"#141423",variants:{isPackSelected:{true:{"@xmd":{display:"none"}}}}}),T=r("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",gap:"10px",flexWrap:"wrap",maxH:"calc(100vh - 175px)",overflowY:"auto"}),k=r("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",position:"absolute",top:"-40px",left:"0px"}),x=r("button",{d:"flex",align:"center",justify:"center",gap:"5px",padding:"10px 15px",color:"#fff",bg:"#141423",fs:"12px",img:{w:"20px",h:"20px",objectFit:"contain"},"&:first-child":{br:"15px 0px 0px 0px"},"&:last-child":{br:"0 15px 0 0"},variants:{isSelected:{true:{bg:"#19192D"}}}}),C=r("div",{w:"100%",h:"45px",bg:"#201D2C",padding:"10px 20px",fontSize:"16px",fontWeight:"bold",ff:"$heading",color:"#C9C9C9","@sm":{h:"initial",fontSize:"14px"}}),A=r("div",{display:"flex",flexDirection:"column",gridArea:"side",padding:"0px 18px",br:"15px",bg:"#141423",overflowY:"auto",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",minW:"500px",variants:{isPackSelected:{false:{"@xmd":{display:"none"}}}},"@lg":{minW:"initial"},"@sm":{mt:"5px"}}),O=r("h4",{d:"flex",alignItems:"center",justifyContent:"center",w:"100%",h:"100%",color:"#FFFFFF",ff:"$heading",fs:"24px",fw:"normal"}),E=S((e,a)=>({selectedPack:null,setSelectedPack:s=>e({selectedPack:s}),selectedPointOffer:null,setSelectedPointOffer:s=>e({selectedPointOffer:s})})),z=async()=>await h({options:{code:g.shopAle,index_position:1,key_type:"i64",limit:"1000",scope:g.shopAle,table:"shopitems"}}),F=async e=>await h({options:{code:g.shopAle,index_position:2,key_type:"i64",limit:"1000",scope:g.shopAle,table:"cdclaim",lower_bound:e,upper_bound:e}}),R=()=>j({queryKey:[_.ShopState],queryFn:()=>D(),staleTime:1e3*60*60,enabled:!!y.getState().user});async function D(){try{const e=await z(),a=await F(),s=y.getState().user;if(!e)return null;const d=a==null?void 0:a.filter(i=>i.wallet===(s==null?void 0:s.wallet));return W(e,d)}catch(e){return console.log(e),null}}function W(e,a){return e.map(s=>{var c;const d=["wax","gem","dust","action_points"],i=d.find(o=>{const l=s[`cost_${o}`];return Number(l)>0}),n=d.find(o=>{const l=s[`gain_${o}`];return Number(l)>0});let p="";return a&&(p=((c=a.find(o=>o.item===s.item))==null?void 0:c.cooldown_expired)||""),{...s,cost:Number(s.cost_wax.replace(" WAX",""))||s[`cost_${i}`],gain:s[`gain_${n}`],itemCD:p,imageGain:n?n==="action_points"?"energy":n==="gem"?"gems":n==="dust"?"credits":"":"",imageCost:i==="action_points"?"energy":i==="gem"?"gems":i==="dust"?"credits":"wax-coin"}})}const u=f.lazy(()=>m(()=>import("./index-f02b1408.js"),["assets/index-f02b1408.js","assets/index-37d3433e.js","assets/index-55fec1ff.css","assets/index-e8bb5728.js","assets/index-d54b856c.js","assets/useQuery-37804139.js","assets/use-transaction-36d26d5c.js","assets/toast-options-baa6c4a9.js","assets/sleep-da79c358.js","assets/v4-4a60fe23.js"]).then(e=>({default:e.GemList}))),H=f.lazy(()=>m(()=>import("./index-f02b1408.js"),["assets/index-f02b1408.js","assets/index-37d3433e.js","assets/index-55fec1ff.css","assets/index-e8bb5728.js","assets/index-d54b856c.js","assets/useQuery-37804139.js","assets/use-transaction-36d26d5c.js","assets/toast-options-baa6c4a9.js","assets/sleep-da79c358.js","assets/v4-4a60fe23.js"]).then(e=>({default:e.GemSelection}))),G=f.lazy(()=>m(()=>import("./index-7172afc8.js"),["assets/index-7172afc8.js","assets/index-37d3433e.js","assets/index-55fec1ff.css","assets/useQuery-37804139.js","assets/index-e8bb5728.js","assets/index-d54b856c.js","assets/use-transaction-36d26d5c.js","assets/toast-options-baa6c4a9.js","assets/v4-4a60fe23.js"]).then(e=>({default:e.PointOffersList}))),I=f.lazy(()=>m(()=>import("./index-7172afc8.js"),["assets/index-7172afc8.js","assets/index-37d3433e.js","assets/index-55fec1ff.css","assets/useQuery-37804139.js","assets/index-e8bb5728.js","assets/index-d54b856c.js","assets/use-transaction-36d26d5c.js","assets/toast-options-baa6c4a9.js","assets/v4-4a60fe23.js"]).then(e=>({default:e.PointOffersSelection}))),$=()=>{const{selectedPack:e,selectedPointOffer:a,setSelectedPointOffer:s,setSelectedPack:d}=E(),{data:i}=R(),[n,p]=b.useState("gems");function c(l){p(l),d(null),s(null)}const o=!!e||!!a;return t.jsxs(v,{isPackSelected:o,children:[t.jsx(P,{}),t.jsxs(w,{isPackSelected:o,children:[t.jsxs(k,{children:[t.jsxs(x,{isSelected:n==="gems",onClick:()=>c("gems"),children:["Gems",t.jsx("img",{loading:"lazy",src:"/assets/icons/gems.png",alt:""})]}),t.jsxs(x,{isSelected:n==="credits",onClick:()=>c("credits"),children:["Credits",t.jsx("img",{loading:"lazy",src:"/assets/icons/credits.png",alt:""})]}),t.jsxs(x,{isSelected:n==="energy",onClick:()=>c("energy"),children:["Energy",t.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]}),t.jsxs(x,{isSelected:n==="outpost",onClick:()=>c("outpost"),children:["Alien Worlds Outpost",t.jsx("img",{loading:"lazy",src:"/assets/icons/outposts.png",alt:""})]})]}),t.jsxs(T,{children:[n==="gems"&&t.jsx(u,{list:i==null?void 0:i.filter(l=>l.category==="gems")}),n==="credits"&&t.jsx(u,{list:i==null?void 0:i.filter(l=>l.category==="credits")}),n==="energy"&&t.jsx(u,{list:i==null?void 0:i.filter(l=>l.category==="flasks")}),n==="outpost"&&t.jsx(G,{})]})]}),t.jsxs(A,{isPackSelected:o,children:[!!e&&t.jsx(H,{}),!!a&&t.jsx(I,{}),!e&&!a&&t.jsxs(t.Fragment,{children:[t.jsx(C,{children:"Select a Pack"}),t.jsx(O,{children:"Select a Pack"})]})]})]})},V=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{V as i,E as u};

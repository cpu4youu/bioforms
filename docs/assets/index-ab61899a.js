import{s as g,d as z,r as b,S as D,R as p,_ as f,u as L,a as O,b as M,j as r,Q as T}from"./index-002d79b3.js";import{s as W}from"./fightersSort-5e9a6d34.js";import{u as V}from"./index-5ffe76d0.js";import{u as H}from"./use-transaction-1c225a1e.js";import{s as k}from"./sleep-da79c358.js";import{g as B}from"./generateRandomWaxName-ee0d1ff2.js";const N=g("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main side"
  `,gridTemplateRows:"65px 1fr",gridTemplateColumns:"1fr 1fr 500px",gap:"10px",overflowY:"hidden",br:"15px",w:"100%",h:"100%",variants:{isFighterSelected:{true:{"@lg":{gridTemplateAreas:`
            "header header header"
            "side side side"
          `}},false:{"@lgxxx":{gridTemplateAreas:`
              "header header header"
              "main main main"
            `}}}},"@lgxxx":{gridTemplateColumns:"1fr 1fr 2fr"},"@xmd":{gap:"8px"},"@sm":{}}),$=g("div",{gridArea:"header",d:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",minHeight:"65px",button:{padding:"20px",height:"65px",w:"100%",maxW:"100%",img:{objectFit:"contain",w:"34px"},div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@lgxxx":{gridColumnStart:2,w:"100%",gridTemplateColumns:"1fr 1fr"},"@md":{gridColumnStart:1,gridTemplateColumns:"1fr 1fr"},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),Y=g("div",{display:"flex",flexDirection:"column",gridArea:"side",br:"15px",bg:"#141423",overflowY:"auto",minW:"500px",maxW:"500px",maxH:"calc(100vh - 160px)",minH:"calc(100vh - 160px)",variants:{isFighterSelected:{false:{"@lgxxx":{display:"none"}}}},"@lgxxx":{minW:"initial"},"@sm":{mt:"5px"}}),G=g("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",padding:"0px 15px ",bg:"#141423",br:"15px",w:"100%",overflowY:"auto",position:"relative",">img":{position:"absolute",top:0,left:0,w:"100%",h:"100%",objectFit:"cover"},gridArea:"main",h:"calc(100vh - 235px)",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",variants:{isFighterSelected:{true:{"@lg":{display:"none"},"@xmd":{display:"none"}}}},"@md":{minH:"calc(100vh - 185px)",mt:"30px"}}),Q=g("div",{d:"flex",align:"center",justify:"center",w:"100%",maxW:"350px",padding:"15px 10px",zIndex:"2",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",bg:"#1D1B20",color:"#E9E9E9",ff:"$heading",fs:"14px",fw:"bold"}),q=g("div",{d:"flex",justify:"space-between",gridTemplateColumns:"1fr 2fr",gap:"10px",mt:"48px",px:"20px",pb:"10px",w:"100%",zIndex:"2",">span":{ff:"$heading",fs:"20px",fw:"bold",color:"#fff"},"@lg":{flexWrap:"wrap",justify:"center",">span":{my:"10px",order:"-1"}}}),J=g("div",{w:"100%",h:"100%"}),K=g("h4",{d:"flex",alignItems:"center",justifyContent:"center",w:"100%",h:"100%",color:"#FFFFFF",ff:"$heading",fs:"24px",fw:"normal"}),R=z((e,d)=>({arenaSelected:null,setArenaSelected:t=>e({arenaSelected:t}),myTeam:[null,null,null,null,null],setMyTeam:t=>e({myTeam:t}),selectedCards:[void 0,void 0],setSelectedCards:t=>e({selectedCards:t}),selectedFighterClassname:{label:"All",value:""},setSelectedFighterClassname:t=>e({selectedFighterClassname:t}),selectedSort:W[0],setSelectedSort:t=>e({selectedSort:t}),selectedElement:[],setSelectedElement:t=>e({selectedElement:t}),selectedMarkers:[],setSelectedMarkers:t=>e({selectedMarkers:t})}));function U(){const{selectedCards:e,setSelectedCards:d,myTeam:t,setMyTeam:h}=R(),[y,w]=b.useState("fighter"),[m,l]=b.useState(0),[F,v]=b.useState("level.worlds"),[x,s]=b.useState(-1);function j(n){if(s(-1),w("fighter"),n===m){l(-1);return}l(n)}function A(n){if(l(-1),w("nft"),n===x){s(-1);return}s(n),v(n===0?"crew.worlds":n===1?"arms.worlds":"crew.worlds")}function S(n){if(!n){const a=e.map((_,P)=>{if(P!==x)return _}),o=x+1;if(s(o),d(a),v(o===0?"crew.worlds":o===1?"arms.worlds":"crew.worlds"),o>1){s(-1);return}return}if(e.some(a=>(a==null?void 0:a.asset_id)===(n==null?void 0:n.asset_id))){s(-1);return}const c=e.map((a,o)=>o===x?n:a),i=x+1;if(s(i),d(c),v(i===0?"crew.worlds":i===1?"arms.worlds":"crew.worlds"),i>1){s(-1);return}}function u(n){const c=t.map((a,o)=>o===m?n:a);h(c);const i=m+1;if(i===5){l(-1);return}l(i)}function C(n){return e.some(c=>(c==null?void 0:c.asset_id)!==n.asset_id)}return{inventoryPosition:x,fighterPosition:m,itemSelected:y,handleFighterPosition:j,handleInventoryPosition:A,handleSelectCard:S,handleAddFighter:u,filterInventoryCards:C,setFighterPosition:l,inventoryFilter:F}}async function X(e,d){const{executeTransaction:t}=H(),h=Z(e,d);return!!await t(h)}function Z(e,{planet:d,land_id:t,crew_asset_id:h,weapon_asset_id:y,fighter_ids:w,history_id:m,x:l,y:F}){return{actions:[{account:D.arenaAle,name:"playarena",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,planet:d,land_id:t,crew_asset_id:h,weapon_asset_id:y,fighter_ids:w,history_id:m,x:l,y:F}}]}}const I=p.lazy(()=>f(()=>import("./index-0ed9ea60.js"),["assets/index-0ed9ea60.js","assets/index-002d79b3.js","assets/index-55fec1ff.css"])),ee=p.lazy(()=>f(()=>import("./box-gloves-d2291d6f.js"),["assets/box-gloves-d2291d6f.js","assets/index-002d79b3.js","assets/index-55fec1ff.css"])),te=p.lazy(()=>f(()=>import("./travel-arrow-4b85fecc.js"),["assets/travel-arrow-4b85fecc.js","assets/index-002d79b3.js","assets/index-55fec1ff.css"])),re=p.lazy(()=>f(()=>import("./index-808b7a8a.js").then(e=>e.i),["assets/index-808b7a8a.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/useQuery-2039e484.js","assets/classtemps-query-b2910289.js"])),ne=p.lazy(()=>f(()=>import("./index-5c215280.js"),["assets/index-5c215280.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/use-media-f50452b3.js","assets/index-5ffe76d0.js","assets/fightersSort-5e9a6d34.js","assets/use-transaction-1c225a1e.js","assets/toast-options-488e77ba.js","assets/sleep-da79c358.js","assets/generateRandomWaxName-ee0d1ff2.js"])),se=p.lazy(()=>f(()=>import("./index-0151d200.js"),["assets/index-0151d200.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/use-media-f50452b3.js","assets/index-5ffe76d0.js","assets/useQuery-2039e484.js"])),ie=p.lazy(()=>f(()=>import("./index-123633fc.js"),["assets/index-123633fc.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/index-5ffe76d0.js","assets/use-media-f50452b3.js","assets/fighterFilters-e6065055.js","assets/fighters-query-9923abf4.js","assets/useQuery-2039e484.js","assets/fightersSort-5e9a6d34.js","assets/use-transaction-1c225a1e.js","assets/toast-options-488e77ba.js","assets/sleep-da79c358.js","assets/generateRandomWaxName-ee0d1ff2.js"])),ae=p.lazy(()=>f(()=>import("./index-152cc99f.js"),["assets/index-152cc99f.js","assets/index-002d79b3.js","assets/index-55fec1ff.css","assets/inventory-query-a2dba62a.js","assets/useQuery-2039e484.js","assets/adapters-cca835df.js","assets/atomic-api-89bd3048.js","assets/toast-options-488e77ba.js","assets/fightersSort-5e9a6d34.js","assets/index-5ffe76d0.js","assets/use-transaction-1c225a1e.js","assets/sleep-da79c358.js","assets/generateRandomWaxName-ee0d1ff2.js"])),oe=()=>{const{inventoryPosition:e,handleInventoryPosition:d,fighterPosition:t,inventoryFilter:h,itemSelected:y,handleAddFighter:w,handleFighterPosition:m,handleSelectCard:l,filterInventoryCards:F}=U(),v=L(O(i=>i.user)),{selectedMap:x,areaSelected:s}=M(),{setArenaSelected:j,myTeam:A,selectedCards:S}=R(),{selectedFighter:u,setSelectedFighter:C}=V();async function n(){var a,o;if(j(null),!s){T.error("Error on getting area selected.");return}if(!((a=S[0])!=null&&a.asset_id)){T.error("Please select a Crew card to start the fight.");return}if(!((o=S[1])!=null&&o.asset_id)){T.error("Please select a Weapon card to start the fight.");return}const i=A.filter(_=>_!==null);if(i.length<1){T.error("Please select a Fighter to start the fight.");return}try{const _={planet:x.value,land_id:s.landId,crew_asset_id:Number(S[0].asset_id),weapon_asset_id:Number(S[1].asset_id),fighter_ids:i.map(E=>E==null?void 0:E.fighter_id),history_id:B(),x:s.x,y:s.y};await X(v,_)&&(await k(2e3),T.success("Fight started successfully!"))}catch(_){console.error("Error starting fight:",_)}}function c(){j(null)}return r.jsxs(N,{isFighterSelected:!!u,children:[r.jsxs($,{children:[r.jsx(I,{color:"black",onClick:c,icon:ee,children:"Leave Arena"}),r.jsxs(I,{color:"black",onClick:n,icon:te,children:["Fight",r.jsxs("span",{children:["-15 %",r.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]})]})]}),r.jsxs(G,{isFighterSelected:!!u,children:[r.jsx(Q,{children:"+20% Gem Damage"}),r.jsxs(q,{children:[r.jsx(ne,{inventoryPosition:e,handleInventoryPosition:d,fighterPosition:t,handleFighterPosition:m}),r.jsx("span",{children:"VS"}),r.jsx(se,{})]}),r.jsx(J,{children:y==="fighter"?r.jsx(ie,{handleAddFighter:w}):r.jsx(ae,{inventoryPosition:e,inventoryFilter:h,handleSelectCard:l,filterInventoryCards:F})}),r.jsx("img",{src:"/assets/background/bg-arena.png",alt:""})]}),r.jsx(Y,{isFighterSelected:!!u,children:u?r.jsx(re,{selectedFighter:{...u,...u.stats},onCloseFighterDetail:C}):r.jsx(r.Fragment,{children:r.jsx(K,{children:"Select a Fighter"})})})]})},le=p.memo(oe),ge=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{ge as i,R as u};

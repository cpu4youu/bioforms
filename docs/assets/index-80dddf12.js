import{s as r,S as A,R as C,_ as L,u as j,a as y,r as F,j as t,Q as P}from"./index-c43343c7.js";import W from"./index-810fc098.js";import{u as D}from"./use-transaction-f8785654.js";import{s as $}from"./sleep-da79c358.js";import"./index-4a789fe5.js";import"./toast-options-205b7f7e.js";const S=r("div",{d:"flex",justify:"center",align:"center",direction:"column",w:"100%",my:"auto",padding:"20px",">img":{height:235,width:235,objectFit:"contain"}});r("div",{d:"flex",justify:"center",align:"center",gap:"20px",">span":{fontSize:"16px",fontWeight:"bold",ff:"$heading",color:"#fff"}});const _=r("div",{textAlign:"center",textTransform:"uppercase",position:"absolute",top:"150px",w:"100%",fontSize:"250px",fontWeight:"bold",ff:"$heading",color:"rgba(255, 109, 141, 0.31)",variants:{isVictory:{true:{color:"rgba(225, 202, 255, 0.31)"}}},"@lgxx":{fontSize:"150px"},"@xmd":{fontSize:"70px"}}),b=r("div",{d:"flex",align:"center",justify:"center",gap:"5px",mt:"30px",w:"100%","@sm":{d:"grid",mt:"88px",mb:"40px",h:"420px",gridTemplateColumns:"repeat(3, 1fr)"}}),B=r("div",{d:"flex",justify:"center",align:"center",direction:"column",zIndex:"2",w:"100%",maxW:"550px"}),T=r("div",{d:"flex",justify:"center",align:"center",w:"90%",h:"30px",position:"relative",padding:"0 20px",bg:"#1D1B20",border:"1px solid #C3C3C3",span:{fontSize:"14px",fontWeight:"bold",ff:"$heading",color:"#FFFFFF",textTransform:"uppercase",zIndex:"2","-webkit-text-stroke":"1px rgba(20, 20, 35, 0.4)","&:last-child":{position:"absolute",right:"-50px"},"@sm":{fontSize:"10px","&:last-child":{right:"-30px"}}}}),I=r("div",{opacity:"0.6",position:"absolute",top:"0",left:"0",bg:"linear-gradient(90deg, #CE73E0 0%, #ED92FF 100%)",h:"100%"}),V=r("div",{opacity:"0.6",position:"absolute",top:"0",left:"0",bg:"linear-gradient(90deg, #E1AE2C 0%, #FFFE32 100%)",h:"100%"}),k=r(W,{d:"flex",justify:"center",align:"center",w:"90%",h:"55px",padding:"0 20px",my:"20px",bg:"#6750A4 !important",border:"1px solid #C3C3C3",fontSize:"14px",fontWeight:"bold",ff:"$heading",color:"#FFFFFF",textTransform:"uppercase"}),O=r("span",{d:"flex",justify:"center",align:"center",w:"100%",maxW:"375px",textAlign:"center",color:"#FFFFFF",ff:"$heading",fontSize:"12px",fontWeight:"bold"});async function q(e,i,s){const{executeTransaction:l}=D(),o=N(e,i,s);return!!await l(o)}function N(e,i,s){return{actions:i.map(o=>({account:A.poolsAle,name:"claimpreward",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,pool:o,history_id:s}}))}}const M=C.lazy(()=>L(()=>import("./index-520f6160.js"),["assets/index-520f6160.js","assets/index-c43343c7.js","assets/index-55fec1ff.css"])),Q=({data:e,historyId:i})=>{var x,u,h,g;const s=j(y(n=>n.user)),l=j(y(n=>n.updatePlayerData)),[o,c]=F.useState(!1),[p,a]=F.useState(!1);async function E(){c(!0);try{const n=(e==null?void 0:e.reward_power_added.reduce((m,w)=>(w.power>0&&m.push(w.pool),m),[]))||[];if(!await q(s,n,i)){console.error("Failed to mine reward");return}await $(3e3),await l(),P.success("Successfully mined reward!"),a(!0)}catch(n){console.error("Error mining reward:",n)}finally{a(!1),c(!1)}}const R=e==null?void 0:e.log.includes("Team 1"),v=((x=e==null?void 0:e.reward_power_added.find(n=>n.type==="tlm"))==null?void 0:x.power)||0,z=((u=e==null?void 0:e.reward_power_added.find(n=>n.type==="shards"))==null?void 0:u.power)||0,d=((h=e==null?void 0:e.reward_power_total.find(n=>n.pool==="tlmdung"))==null?void 0:h.power)||0,f=((g=e==null?void 0:e.reward_power_total.find(n=>n.pool==="shrddung"))==null?void 0:g.power)||0;return R?t.jsxs(S,{children:[t.jsx(_,{isVictory:!0,children:"VICTORY"}),t.jsx(b,{children:e==null?void 0:e.team1_end_fighters.map(n=>t.jsx(M,{fighter:n,highlights:e.highlightedStats},n.fighter_id))}),t.jsxs(B,{children:[t.jsxs(T,{children:[t.jsxs("span",{children:[d.toLocaleString()," TLM Minepower"]}),t.jsx(V,{style:{width:`${d*100/1e4}%`}}),t.jsxs("span",{children:["+ ",v.toLocaleString()]})]}),t.jsxs(T,{children:[t.jsxs("span",{children:[f.toLocaleString()," Shard Minepower"]}),t.jsx(I,{style:{width:`${f*100/1e4}%`}}),t.jsxs("span",{children:["+ ",z.toLocaleString()]})]}),t.jsx(k,{isLoading:o,disabled:o||p,onClick:E,children:p?"Mined":"Mine"}),t.jsx(O,{children:"Equip better tools for higher Minepower Rewards Mine once you have reached at least 10,000 Minepower"})]})]}):t.jsxs(S,{children:[t.jsx(_,{children:"DEFEAT"}),t.jsx(b,{children:e==null?void 0:e.team1_end_fighters.map(n=>t.jsx(M,{fighter:n,highlights:e.highlightedStats},n.fighter_id))})]})},Z=C.memo(Q);export{Z as default};

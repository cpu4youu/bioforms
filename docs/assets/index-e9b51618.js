import{s as c,d as S,g as _,S as u,e as b,u as y,R as f,_ as m,r as h,j as t}from"./index-20d8da76.js";import{u as j}from"./useQuery-90eb73c7.js";const v=c("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main side"
  `,gridTemplateRows:"68px 1fr",gridTemplateColumns:"1fr 1fr 500px",gap:"10px",br:"15px",w:"100%",h:"100%",variants:{isPackSelected:{true:{"@xmd":{gridTemplateAreas:`
            "header header header"
            "side side side"
          `}},false:{"@xmd":{gridTemplateAreas:`
              "header header header"
              "main main main"
            `}}}},"@lg":{gridTemplateColumns:"1fr 1fr 2fr"},"@xmd":{gap:"8px"},"@sm":{}}),w=c("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),P=c("div",{gridArea:"main",d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",position:"relative",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",padding:"10px",br:"0 15px 15px 15px",bg:"#141423",backgroundImage:"url(/assets/background/bg-shop.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",variants:{isPackSelected:{true:{"@xmd":{display:"none"}}}}}),k=c("div",{d:"flex",justify:"center",gap:"10px",flexWrap:"wrap",h:"100%",w:"100%",padding:"40px",maxH:"calc(100vh - 175px)",overflowY:"auto"}),T=c("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",position:"absolute",top:"-40px",left:"0px"}),p=c("button",{d:"flex",align:"center",justify:"center",gap:"5px",padding:"10px 15px",color:"#fff",bg:"#141423",fs:"12px",img:{w:"20px",h:"20px",objectFit:"contain"},"&:first-child":{br:"15px 0px 0px 0px"},"&:last-child":{br:"0 15px 0 0"},variants:{isSelected:{true:{bg:"#19192D"}}}}),C=c("div",{w:"100%",h:"45px",bg:"#201D2C",padding:"10px 20px",fontSize:"16px",fontWeight:"bold",ff:"$heading",color:"#C9C9C9","@sm":{h:"initial",fontSize:"14px"}}),A=c("div",{display:"flex",flexDirection:"column",gridArea:"side",padding:"0px 18px",br:"15px",bg:"#141423",overflowY:"auto",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",minW:"500px",variants:{isPackSelected:{false:{"@xmd":{display:"none"}}}},"@lg":{minW:"initial"},"@sm":{mt:"5px"}}),O=c("h4",{d:"flex",alignItems:"center",justifyContent:"center",w:"100%",h:"100%",color:"#FFFFFF",ff:"$heading",fs:"24px",fw:"normal"}),E=S((e,r)=>({selectedPack:null,setSelectedPack:n=>e({selectedPack:n}),selectedPointOffer:null,setSelectedPointOffer:n=>e({selectedPointOffer:n})})),z=async()=>await _({options:{code:u.shopAle,index_position:1,key_type:"i64",limit:"1000",scope:u.shopAle,table:"shopitems"}}),R=async e=>await _({options:{code:u.shopAle,index_position:2,key_type:"i64",limit:"1000",scope:u.shopAle,table:"cdclaim",lower_bound:e,upper_bound:e}}),F=()=>j({queryKey:[b.ShopState],queryFn:()=>D(),staleTime:1e3*60*60,enabled:!!y.getState().user});async function D(){try{const e=await z(),r=await R(),n=y.getState().user;if(!e)return null;const d=r==null?void 0:r.filter(s=>s.wallet===(n==null?void 0:n.wallet));return W(e,d)}catch(e){return console.log(e),null}}function W(e,r){return e.map(n=>{var l;const d=["wax","gem","dust","action_points","legend_acct_seconds"],s=d.find(o=>{if(o==="wax")return Number(n.cost_wax.replace(" WAX",""))>0;const i=n[`cost_${o}`];return Number(i)>0}),a=d.find(o=>{const i=n[`gain_${o}`];return Number(i)>0});let g="";return r&&(g=((l=r.find(o=>o.item===n.item))==null?void 0:l.cooldown_expired)||""),{...n,cost:Number(n.cost_wax.replace(" WAX",""))||n[`cost_${s}`],gain:n[`gain_${a}`],itemCD:g,imageGain:G(a),imageCost:H(s)}})}function G(e){return e==="action_points"?"energy.png":e==="gem"?"gems.png":e==="dust"?"credits.png":e==="legend_acct_seconds"?"account.svg":""}function H(e){return e==="action_points"?"energy.png":e==="gem"?"gems.png":e==="dust"?"credits.png":e==="wax"?"wax-coin.png":""}const x=f.lazy(()=>m(()=>import("./index-552d16c8.js"),["assets/index-552d16c8.js","assets/index-20d8da76.js","assets/index-55fec1ff.css","assets/index-d7ff8747.js","assets/index-b5298baa.js","assets/useQuery-90eb73c7.js","assets/use-transaction-780d0b02.js","assets/toast-options-1e019bbe.js","assets/sleep-da79c358.js","assets/calculateTImeLeft-3fbd33a3.js","assets/v4-4a60fe23.js"]).then(e=>({default:e.GemList}))),I=f.lazy(()=>m(()=>import("./index-552d16c8.js"),["assets/index-552d16c8.js","assets/index-20d8da76.js","assets/index-55fec1ff.css","assets/index-d7ff8747.js","assets/index-b5298baa.js","assets/useQuery-90eb73c7.js","assets/use-transaction-780d0b02.js","assets/toast-options-1e019bbe.js","assets/sleep-da79c358.js","assets/calculateTImeLeft-3fbd33a3.js","assets/v4-4a60fe23.js"]).then(e=>({default:e.GemSelection}))),$=f.lazy(()=>m(()=>import("./index-d8b6d073.js"),["assets/index-d8b6d073.js","assets/index-20d8da76.js","assets/index-55fec1ff.css","assets/useQuery-90eb73c7.js","assets/index-d7ff8747.js","assets/index-b5298baa.js","assets/use-transaction-780d0b02.js","assets/toast-options-1e019bbe.js","assets/v4-4a60fe23.js"]).then(e=>({default:e.PointOffersList}))),N=f.lazy(()=>m(()=>import("./index-d8b6d073.js"),["assets/index-d8b6d073.js","assets/index-20d8da76.js","assets/index-55fec1ff.css","assets/useQuery-90eb73c7.js","assets/index-d7ff8747.js","assets/index-b5298baa.js","assets/use-transaction-780d0b02.js","assets/toast-options-1e019bbe.js","assets/v4-4a60fe23.js"]).then(e=>({default:e.PointOffersSelection}))),M=()=>{const{selectedPack:e,selectedPointOffer:r,setSelectedPointOffer:n,setSelectedPack:d}=E(),{data:s}=F(),[a,g]=h.useState("gems");function l(i){g(i),d(null),n(null)}h.useEffect(()=>()=>{d(null),n(null)},[]);const o=!!e||!!r;return t.jsxs(v,{isPackSelected:o,children:[t.jsx(w,{}),t.jsxs(P,{isPackSelected:o,children:[t.jsxs(T,{children:[t.jsxs(p,{isSelected:a==="gems",onClick:()=>l("gems"),children:["Gems",t.jsx("img",{loading:"lazy",src:"/assets/icons/gems.png",alt:""})]}),t.jsxs(p,{isSelected:a==="credits",onClick:()=>l("credits"),children:["Credits",t.jsx("img",{loading:"lazy",src:"/assets/icons/credits.png",alt:""})]}),t.jsxs(p,{isSelected:a==="energy",onClick:()=>l("energy"),children:["Energy",t.jsx("img",{loading:"lazy",src:"/assets/icons/energy.png",alt:""})]}),t.jsxs(p,{isSelected:a==="account",onClick:()=>l("account"),children:["Account Upgrade",t.jsx("img",{loading:"lazy",src:"/assets/icons/account.svg",alt:""})]}),t.jsxs(p,{isSelected:a==="outpost",onClick:()=>l("outpost"),children:["Alien Worlds Outpost",t.jsx("img",{loading:"lazy",src:"/assets/icons/outposts.png",alt:""})]})]}),t.jsxs(k,{children:[a==="gems"&&t.jsx(x,{list:s==null?void 0:s.filter(i=>i.category==="gems")}),a==="credits"&&t.jsx(x,{list:s==null?void 0:s.filter(i=>i.category==="credits")}),a==="energy"&&t.jsx(x,{list:s==null?void 0:s.filter(i=>i.category==="flasks")}),a==="account"&&t.jsx(x,{list:s==null?void 0:s.filter(i=>i.category==="account")}),a==="outpost"&&t.jsx($,{})]})]}),t.jsxs(A,{isPackSelected:o,children:[!!e&&t.jsx(I,{}),!!r&&t.jsx(N,{}),!e&&!r&&t.jsxs(t.Fragment,{children:[t.jsx(C,{children:"Select a Pack"}),t.jsx(O,{children:"Select a Pack"})]})]})]})},q=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{q as i,E as u};

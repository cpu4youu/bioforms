import{s as o,g as T,S as u,d as w,u as _,R as F,_ as b,r as v,j as t,Q as A}from"./index-f6a72f5b.js";import{u as L,o as E}from"./fighters-query-4a52b009.js";import{u as R}from"./index-537dc71c.js";import{F as U}from"./index-81d412cc.js";import{u as z}from"./useQuery-15c564dc.js";import{s as P}from"./sleep-da79c358.js";import{u as D}from"./use-transaction-847cb45e.js";const H=o("div",{d:"grid",gridTemplateAreas:`
    "empty empty header"
    "main main side"
  `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"2.5fr 1fr",gap:"10px",br:"15px",w:"100%",h:"100%",variants:{isFighterSelected:{true:{"@xmd":{gridTemplateAreas:`
            "header header header"
            "side side side"
          `}},false:{"@xmd":{gridTemplateAreas:`
              "header header header"
              "main main main"
            `}}}},"@lg":{gridTemplateColumns:"1fr 1fr 2fr"},"@xmd":{gap:"8px"},"@sm":{}}),M=o("div",{gridArea:"header",d:"flex",justifyContent:"flex-end",gap:"10px",minHeight:"65px",button:{padding:"20px",w:"100%",maxW:"100%",div:{d:"flex",alignItems:"center",gap:"5px",color:"#828282",img:{objectFit:"contain",w:"24px"}}},"@sm":{gap:"5px",button:{fs:"12px",padding:"10px",div:{img:{w:"20px"}}}},"@xsm":{button:{gap:"3px",justify:"space-between",padding:"9px 0px 9px 3px",fs:"10px"}}}),O=o("div",{gridArea:"main",d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",gap:"10px",flexWrap:"wrap",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",overflowY:"auto",padding:"10px",br:"15px",bg:"#141423",variants:{isFighterSelected:{true:{"@xmd":{display:"none"}}}}});o("div",{w:"100%",h:"45px",bg:"#201D2C",padding:"10px 20px",fontSize:"16px",fontWeight:"bold",ff:"$heading",color:"#C9C9C9","@sm":{h:"initial",fontSize:"14px"}});const Q=o("div",{display:"flex",flexDirection:"column",gridArea:"side",padding:"0px 18px",br:"15px",bg:"#141423",overflowY:"auto",minH:"calc(100vh - 160px)",maxH:"calc(100vh - 160px)",variants:{isFighterSelected:{false:{"@sm":{display:"none"}}}},"@lg":{minW:"initial"},"@sm":{mt:"5px"}}),W=o("h4",{d:"flex",alignItems:"center",justifyContent:"center",w:"100%",h:"100%",color:"#FFFFFF",ff:"$heading",fs:"24px",fw:"normal"}),Y=async()=>await T({options:{code:u.battleAle,index_position:2,key_type:"i64",limit:"1000",scope:u.battleAle,table:"levels"}}),k=()=>z({queryKey:[w.levelsState],queryFn:()=>q(),staleTime:1e3*60*60,enabled:!!_.getState().user});async function q(){try{return await Y()}catch(a){return console.log(a),null}}async function I(a,e){const{executeTransaction:n}=D(),r=K(a,e);return!!await n(r)}function K(a,{cost_credits:e,cost_gems:n,fighter_ids:r}){return{actions:[{account:u.landsAle,name:"build",authorization:[{actor:a.name,permission:a.authorization.permission}],data:{wallet:a.name,fighter_ids:r,cost_gems:n,cost_credits:e}}]}}const y=F.lazy(()=>b(()=>import("./index-dff7103a.js"),["assets/index-dff7103a.js","assets/index-f6a72f5b.js","assets/index-55fec1ff.css"])),V=F.lazy(()=>b(()=>import("./index-357eea1f.js"),["assets/index-357eea1f.js","assets/index-f6a72f5b.js","assets/index-55fec1ff.css","assets/index-537dc71c.js","assets/index-81d412cc.js","assets/sleep-da79c358.js","assets/fighters-query-4a52b009.js","assets/useQuery-15c564dc.js","assets/use-transaction-847cb45e.js","assets/toast-options-9e7621e9.js"])),$=()=>{const a=_(s=>s.user),{data:e}=L(a.name),{data:n}=k(),{selectedFighter:r,setSelectedFighter:l}=R(),[x,m]=v.useState(!1),j=e==null?void 0:e.some(s=>s.stats.experience>=s.stats.required_experience),g=(e==null?void 0:e.reduce((s,d)=>{var i;const c=(i=n==null?void 0:n.find(p=>p.level===d.stats.level))==null?void 0:i.unlock_cost_gem;return c?s+=c:s},0))||0;async function S(){try{m(!0);const s=(e==null?void 0:e.filter(i=>i.stats.experience>=i.stats.required_experience).map(i=>i.fighter_id))||[],d=(e==null?void 0:e.reduce((i,p)=>{var h;const f=(h=n==null?void 0:n.find(C=>C.level===p.stats.level))==null?void 0:h.unlock_cost_credits;return f?i+=f:i},0))||0;if(!await I(a,{cost_credits:d,cost_gems:g,fighter_ids:s}))return;await P(2e3),E(a.name),A.success("Fighter leveled up!")}catch(s){console.error(s)}finally{m(!1)}}return v.useEffect(()=>()=>l(null),[]),t.jsxs(H,{isFighterSelected:!!r,children:[t.jsxs(M,{children:[t.jsxs(y,{isLoading:x,disabled:x||!j,onClick:S,children:["Level All"," ",t.jsxs("div",{children:[g,t.jsx("img",{src:"/assets/icons/potion.png",alt:"Potion"})," "]})]}),t.jsxs(y,{children:["Payday",t.jsxs("div",{children:["-32",t.jsx("img",{src:"/assets/icons/potion.png",alt:"Potion"})]})]})]}),t.jsx(O,{isFighterSelected:!!r,children:e?e==null?void 0:e.map(s=>t.jsx(V,{fighter:{...s,...s.stats}},s.fighter_id)):t.jsx(t.Fragment,{children:t.jsx(W,{children:"You don't have Fighters"})})}),t.jsx(Q,{isFighterSelected:!!r,children:r?t.jsx(U,{selectedFighter:r,onCloseFighterDetail:l}):t.jsx(t.Fragment,{})})]})},te=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{I as e,te as i,k as u};

import{R as O,r as T,s as z,S as Ii,c as ie,Q as ee,u as Bi,g as ne,_ as q,j as c,a as te}from"./index-f6906664.js";import{u as re}from"./use-transaction-a1c6f80f.js";import{s as ae}from"./sleep-da79c358.js";import{u as oe}from"./useQuery-ddc74530.js";import{g as Ti,a as Yi,l as se,f as le}from"./constants-2bbfa292.js";var N=function(i,t){return Number(i.toFixed(t))},ue=function(i,t){return typeof i=="number"?i:t},X=function(i,t,e){e&&typeof e=="function"&&e(i,t)},de=function(i){return-Math.cos(i*Math.PI)/2+.5},pe=function(i){return i},fe=function(i){return i*i},ve=function(i){return i*(2-i)},me=function(i){return i<.5?2*i*i:-1+(4-2*i)*i},ce=function(i){return i*i*i},he=function(i){return--i*i*i+1},ge=function(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},Se=function(i){return i*i*i*i},ye=function(i){return 1- --i*i*i*i},we=function(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},be=function(i){return i*i*i*i*i},Pe=function(i){return 1+--i*i*i*i*i},Ce=function(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i},ki={easeOut:de,linear:pe,easeInQuad:fe,easeOutQuad:ve,easeInOutQuad:me,easeInCubic:ce,easeOutCubic:he,easeInOutCubic:ge,easeInQuart:Se,easeOutQuart:ye,easeInOutQuart:we,easeInQuint:be,easeOutQuint:Pe,easeInOutQuint:Ce},Ni=function(i){typeof i=="number"&&cancelAnimationFrame(i)},Z=function(i){i.mounted&&(Ni(i.animation),i.animate=!1,i.animation=null,i.velocity=null)};function Mi(i,t,e,n){if(i.mounted){var r=new Date().getTime(),a=1;Z(i),i.animation=function(){if(!i.mounted)return Ni(i.animation);var o=new Date().getTime()-r,s=o/e,l=ki[t],d=l(s);o>=e?(n(a),i.animation=null):i.animation&&(n(d),requestAnimationFrame(i.animation))},requestAnimationFrame(i.animation)}}function Te(i){var t=i.scale,e=i.positionX,n=i.positionY;return!(Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(n))}function G(i,t,e,n){var r=Te(t);if(!(!i.mounted||!r)){var a=i.setTransformState,o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY,u=t.scale-s,p=t.positionX-l,f=t.positionY-d;e===0?a(t.scale,t.positionX,t.positionY):Mi(i,n,e,function(v){var h=s+u*v,g=l+p*v,w=d+f*v;a(h,g,w)})}}function Ye(i,t,e){var n=i.offsetWidth,r=i.offsetHeight,a=t.offsetWidth,o=t.offsetHeight,s=a*e,l=o*e,d=n-s,u=r-l;return{wrapperWidth:n,wrapperHeight:r,newContentWidth:s,newDiffWidth:d,newContentHeight:l,newDiffHeight:u}}var Xe=function(i,t,e,n,r,a,o){var s=i>t?e*(o?1:.5):0,l=n>r?a*(o?1:.5):0,d=i-t-s,u=s,p=n-r-l,f=l;return{minPositionX:d,maxPositionX:u,minPositionY:p,maxPositionY:f}},gi=function(i,t){var e=i.wrapperComponent,n=i.contentComponent,r=i.setup.centerZoomedOut;if(!e||!n)throw new Error("Components are not mounted");var a=Ye(e,n,t),o=a.wrapperWidth,s=a.wrapperHeight,l=a.newContentWidth,d=a.newDiffWidth,u=a.newContentHeight,p=a.newDiffHeight,f=Xe(o,l,d,s,u,p,!!r);return f},vi=function(i,t,e,n){return n?i<t?N(t,2):i>e?N(e,2):N(i,2):N(i,2)},J=function(i,t){var e=gi(i,t);return i.bounds=e,e};function ri(i,t,e,n,r,a,o){var s=e.minPositionX,l=e.minPositionY,d=e.maxPositionX,u=e.maxPositionY,p=0,f=0;o&&(p=r,f=a);var v=vi(i,s-p,d+p,n),h=vi(t,l-f,u+f,n);return{x:v,y:h}}function ui(i,t,e,n,r,a){var o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY,u=n-s;if(typeof t!="number"||typeof e!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:d};var p=l-t*u,f=d-e*u,v=ri(p,f,r,a,0,0,null);return v}function ai(i,t,e,n,r){var a=r?n:0,o=t-a;return!Number.isNaN(e)&&i>=e?e:!Number.isNaN(t)&&i<=o?o:i}var Xi=function(i,t){var e=i.setup.panning.excluded,n=i.isInitialized,r=i.wrapperComponent,a=t.target,o="shadowRoot"in a&&"composedPath"in t,s=o?t.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(a),l=n&&a&&s;if(!l)return!1;var d=di(a,e);return!d},_i=function(i){var t=i.isInitialized,e=i.isPanning,n=i.setup,r=n.panning.disabled,a=t&&e&&!r;return!!a},_e=function(i,t){var e=i.transformState,n=e.positionX,r=e.positionY;i.isPanning=!0;var a=t.clientX,o=t.clientY;i.startCoords={x:a-n,y:o-r}},Ae=function(i,t){var e=t.touches,n=i.transformState,r=n.positionX,a=n.positionY;i.isPanning=!0;var o=e.length===1;if(o){var s=e[0].clientX,l=e[0].clientY;i.startCoords={x:s-r,y:l-a}}};function Ee(i){var t=i.transformState,e=t.positionX,n=t.positionY,r=t.scale,a=i.setup,o=a.disabled,s=a.limitToBounds,l=a.centerZoomedOut,d=i.wrapperComponent;if(!(o||!d||!i.bounds)){var u=i.bounds,p=u.maxPositionX,f=u.minPositionX,v=u.maxPositionY,h=u.minPositionY,g=e>p||e<f,w=n>v||n<h,_=e>p?d.offsetWidth:i.setup.minPositionX||0,S=n>v?d.offsetHeight:i.setup.minPositionY||0,Y=ui(i,_,S,r,i.bounds,s||l),B=Y.x,j=Y.y;return{scale:r,positionX:g?B:e,positionY:w?j:n}}}function Li(i,t,e,n,r){var a=i.setup.limitToBounds,o=i.wrapperComponent,s=i.bounds,l=i.transformState,d=l.scale,u=l.positionX,p=l.positionY;if(!(o===null||s===null||t===u&&e===p)){var f=ri(t,e,s,a,n,r,o),v=f.x,h=f.y;i.setTransformState(d,v,h)}}var ze=function(i,t,e){var n=i.startCoords,r=i.transformState,a=i.setup.panning,o=a.lockAxisX,s=a.lockAxisY,l=r.positionX,d=r.positionY;if(!n)return{x:l,y:d};var u=t-n.x,p=e-n.y,f=o?l:u,v=s?d:p;return{x:f,y:v}},$=function(i,t){var e=i.setup,n=i.transformState,r=n.scale,a=e.minScale,o=e.disablePadding;return t>0&&r>=a&&!o?t:0},xe=function(i){var t=i.mounted,e=i.setup,n=e.disabled,r=e.velocityAnimation,a=i.transformState.scale,o=r.disabled,s=!o||a>1||!n||t;return!!s},De=function(i){var t=i.mounted,e=i.velocity,n=i.bounds,r=i.setup,a=r.disabled,o=r.velocityAnimation,s=i.transformState.scale,l=o.disabled,d=!l||s>1||!a||t;return!(!d||!e||!n)};function We(i,t){var e=i.setup.velocityAnimation,n=e.equalToMove,r=e.animationTime,a=e.sensitivity;return n?r*t*a:r}function Ai(i,t,e,n,r,a,o,s,l,d){if(r){if(t>o&&e>o){var u=o+(i-o)*d;return u>l?l:u<o?o:u}if(t<a&&e<a){var u=a+(i-a)*d;return u<s?s:u>a?a:u}}return n?t:vi(i,a,o,r)}function Oe(i,t){var e=1;return t?Math.min(e,i.offsetWidth/window.innerWidth):e}function je(i,t){var e=xe(i);if(e){var n=i.lastMousePosition,r=i.velocityTime,a=i.setup,o=i.wrapperComponent,s=a.velocityAnimation.equalToMove,l=Date.now();if(n&&r&&o){var d=Oe(o,s),u=t.x-n.x,p=t.y-n.y,f=u/d,v=p/d,h=l-r,g=u*u+p*p,w=Math.sqrt(g)/h;i.velocity={velocityX:f,velocityY:v,total:w}}i.lastMousePosition=t,i.velocityTime=l}}function Be(i){var t=i.velocity,e=i.bounds,n=i.setup,r=i.wrapperComponent,a=De(i);if(!(!a||!t||!e||!r)){var o=t.velocityX,s=t.velocityY,l=t.total,d=e.maxPositionX,u=e.minPositionX,p=e.maxPositionY,f=e.minPositionY,v=n.limitToBounds,h=n.alignmentAnimation,g=n.zoomAnimation,w=n.panning,_=w.lockAxisY,S=w.lockAxisX,Y=g.animationType,B=h.sizeX,j=h.sizeY,M=h.velocityAlignmentTime,k=M,L=We(i,l),H=Math.max(L,k),x=$(i,B),F=$(i,j),R=x*r.offsetWidth/100,I=F*r.offsetHeight/100,ni=d+R,ii=u-R,V=p+I,ei=f-I,m=i.transformState,b=new Date().getTime();Mi(i,Y,H,function(E){var y=i.transformState,P=y.scale,W=y.positionX,D=y.positionY,U=new Date().getTime()-b,A=U/k,K=ki[h.animationType],oi=1-K(Math.min(1,A)),bi=1-E,Pi=W+o*bi,Ci=D+s*bi,Ui=Ai(Pi,m.positionX,W,S,v,u,d,ii,ni,oi),Ji=Ai(Ci,m.positionY,D,_,v,f,p,ei,V,oi);(W!==Pi||D!==Ci)&&i.setTransformState(P,Ui,Ji)})}}function Ei(i,t){var e=i.transformState.scale;Z(i),J(i,e),window.TouchEvent!==void 0&&t instanceof TouchEvent?Ae(i,t):_e(i,t)}function Si(i,t){var e=i.transformState.scale,n=i.setup,r=n.minScale,a=n.alignmentAnimation,o=a.disabled,s=a.sizeX,l=a.sizeY,d=a.animationTime,u=a.animationType,p=o||e<r||!s&&!l;if(!p){var f=Ee(i);f&&G(i,f,t??d,u)}}function zi(i,t,e){var n=i.startCoords,r=i.setup,a=r.alignmentAnimation,o=a.sizeX,s=a.sizeY;if(n){var l=ze(i,t,e),d=l.x,u=l.y,p=$(i,o),f=$(i,s);je(i,{x:d,y:u}),Li(i,d,u,p,f)}}function ke(i){if(i.isPanning){var t=i.setup.panning.velocityDisabled,e=i.velocity,n=i.wrapperComponent,r=i.contentComponent;i.isPanning=!1,i.animate=!1,i.animation=null;var a=n==null?void 0:n.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),s=(a==null?void 0:a.width)||0,l=(a==null?void 0:a.height)||0,d=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,p=s<d||l<u,f=!t&&e&&(e==null?void 0:e.total)>.1&&p;f?Be(i):Si(i)}}function yi(i,t,e,n){var r=i.setup,a=r.minScale,o=r.maxScale,s=r.limitToBounds,l=ai(N(t,2),a,o,0,!1),d=J(i,l),u=ui(i,e,n,l,d,s),p=u.x,f=u.y;return{scale:l,positionX:p,positionY:f}}function Zi(i,t,e){var n=i.transformState.scale,r=i.wrapperComponent,a=i.setup,o=a.minScale,s=a.limitToBounds,l=a.zoomAnimation,d=l.disabled,u=l.animationTime,p=l.animationType,f=d||n>=o;if((n>=1||s)&&Si(i),!(f||!r||!i.mounted)){var v=t||r.offsetWidth/2,h=e||r.offsetHeight/2,g=yi(i,o,v,h);g&&G(i,g,u,p)}}var Q=function(){return Q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Q.apply(this,arguments)};function xi(i,t,e){if(e||arguments.length===2)for(var n=0,r=t.length,a;n<r;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return i.concat(a||Array.prototype.slice.call(t))}var si={previousScale:1,scale:1,positionX:0,positionY:0},ti={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},mi={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Hi=function(i){var t,e,n,r;return{previousScale:(t=i.initialScale)!==null&&t!==void 0?t:si.scale,scale:(e=i.initialScale)!==null&&e!==void 0?e:si.scale,positionX:(n=i.initialPositionX)!==null&&n!==void 0?n:si.positionX,positionY:(r=i.initialPositionY)!==null&&r!==void 0?r:si.positionY}},Di=function(i){var t=Q({},ti);return Object.keys(i).forEach(function(e){var n=typeof i[e]<"u",r=typeof ti[e]<"u";if(r&&n){var a=Object.prototype.toString.call(ti[e]),o=a==="[object Object]",s=a==="[object Array]";o?t[e]=Q(Q({},ti[e]),i[e]):s?t[e]=xi(xi([],ti[e],!0),i[e],!0):t[e]=i[e]}}),t},Fi=function(i,t,e){var n=i.transformState.scale,r=i.wrapperComponent,a=i.setup,o=a.maxScale,s=a.minScale,l=a.zoomAnimation,d=a.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var p=d?n*Math.exp(t*e):n+t*e,f=ai(N(p,3),s,o,u,!1);return f};function Vi(i,t,e,n,r){var a=i.wrapperComponent,o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY;if(!a)return console.error("No WrapperComponent found");var u=a.offsetWidth,p=a.offsetHeight,f=(u/2-l)/s,v=(p/2-d)/s,h=Fi(i,t,e),g=yi(i,h,f,v);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");G(i,g,n,r)}function Ri(i,t,e,n){var r=i.setup,a=i.wrapperComponent,o=r.limitToBounds,s=Hi(i.props),l=i.transformState,d=l.scale,u=l.positionX,p=l.positionY;if(a){var f=gi(i,s.scale),v=ri(s.positionX,s.positionY,f,o,0,0,a),h={scale:s.scale,positionX:v.x,positionY:v.y};d===s.scale&&u===s.positionX&&p===s.positionY||(n==null||n(),G(i,h,t,e))}}function Ne(i,t,e,n){var r=i.getBoundingClientRect(),a=t.getBoundingClientRect(),o=e.getBoundingClientRect(),s=a.x*n.scale,l=a.y*n.scale;return{x:(r.x-o.x+s)/n.scale,y:(r.y-o.y+l)/n.scale}}function Me(i,t,e){var n=i.wrapperComponent,r=i.contentComponent,a=i.transformState,o=i.setup,s=o.limitToBounds,l=o.minScale,d=o.maxScale;if(!n||!r)return a;var u=n.getBoundingClientRect(),p=t.getBoundingClientRect(),f=Ne(t,n,r,a),v=f.x,h=f.y,g=p.width/a.scale,w=p.height/a.scale,_=n.offsetWidth/g,S=n.offsetHeight/w,Y=ai(e||Math.min(_,S),l,d,0,!1),B=(u.width-g*Y)/2,j=(u.height-w*Y)/2,M=(u.left-v)*Y+B,k=(u.top-h)*Y+j,L=gi(i,Y),H=ri(M,k,L,s,0,0,n),x=H.x,F=H.y;return{positionX:x,positionY:F,scale:Y}}var Le=function(i){return function(t,e,n){t===void 0&&(t=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Vi(i,1,t,e,n)}},Ze=function(i){return function(t,e,n){t===void 0&&(t=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Vi(i,-1,t,e,n)}},He=function(i){return function(t,e,n,r,a){r===void 0&&(r=300),a===void 0&&(a="easeOut");var o=i.transformState,s=o.positionX,l=o.positionY,d=o.scale,u=i.wrapperComponent,p=i.contentComponent,f=i.setup.disabled;if(!(f||!u||!p)){var v={positionX:Number.isNaN(t)?s:t,positionY:Number.isNaN(e)?l:e,scale:Number.isNaN(n)?d:n};G(i,v,r,a)}}},Fe=function(i){return function(t,e){t===void 0&&(t=200),e===void 0&&(e="easeOut"),Ri(i,t,e)}},Ve=function(i){return function(t,e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut");var r=i.transformState,a=i.wrapperComponent,o=i.contentComponent;if(a&&o){var s=Ki(t||r.scale,a,o);G(i,s,e,n)}}},Re=function(i){return function(t,e,n,r){n===void 0&&(n=600),r===void 0&&(r="easeOut"),Z(i);var a=i.wrapperComponent,o=typeof t=="string"?document.getElementById(t):t;if(a&&o&&a.contains(o)){var s=Me(i,o,e);G(i,s,n,r)}}},ci=function(i){return{instance:i,zoomIn:Le(i),zoomOut:Ze(i),setTransform:He(i),resetTransform:Fe(i),centerView:Ve(i),zoomToElement:Re(i)}},Ke=function(i){return{instance:i,state:i.transformState}},C=function(i){var t={};return Object.assign(t,Ke(i)),Object.assign(t,ci(i)),t},pi=!1;function fi(){try{var i={get passive(){return pi=!0,!1}};return i}catch{return pi=!1,pi}}var li=".".concat(mi.wrapperClass),di=function(i,t){return t.some(function(e){return i.matches("".concat(li," ").concat(e,", ").concat(li," .").concat(e,", ").concat(li," ").concat(e," *, ").concat(li," .").concat(e," *"))})},hi=function(i){i&&clearTimeout(i)},Qe=function(i,t,e){return"translate(".concat(i,"px, ").concat(t,"px) scale(").concat(e,")")},Ki=function(i,t,e){var n=e.offsetWidth*i,r=e.offsetHeight*i,a=(t.offsetWidth-n)/2,o=(t.offsetHeight-r)/2;return{scale:i,positionX:a,positionY:o}};function $e(i){return function(t){i.forEach(function(e){typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var qe=function(i,t){var e=i.setup.wheel,n=e.disabled,r=e.wheelDisabled,a=e.touchPadDisabled,o=e.excluded,s=i.isInitialized,l=i.isPanning,d=t.target,u=s&&!l&&!n&&d;if(!u||r&&!t.ctrlKey||a&&t.ctrlKey)return!1;var p=di(d,o);return!p},Ge=function(i){return i?i.deltaY<0?1:-1:0};function Ue(i,t){var e=Ge(i),n=ue(t,e);return n}function Qi(i,t,e){var n=t.getBoundingClientRect(),r=0,a=0;if("clientX"in i)r=(i.clientX-n.left)/e,a=(i.clientY-n.top)/e;else{var o=i.touches[0];r=(o.clientX-n.left)/e,a=(o.clientY-n.top)/e}return(Number.isNaN(r)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:r,y:a}}var Je=function(i,t,e,n,r){var a=i.transformState.scale,o=i.wrapperComponent,s=i.setup,l=s.maxScale,d=s.minScale,u=s.zoomAnimation,p=s.disablePadding,f=u.size,v=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var h=a+t*e;if(r)return h;var g=n?!1:!v,w=ai(N(h,3),d,l,f,g&&!p);return w},Ie=function(i,t){var e=i.previousWheelEvent,n=i.transformState.scale,r=i.setup,a=r.maxScale,o=r.minScale;return e?n<a||n>o||Math.sign(e.deltaY)!==Math.sign(t.deltaY)||e.deltaY>0&&e.deltaY<t.deltaY||e.deltaY<0&&e.deltaY>t.deltaY||Math.sign(e.deltaY)!==Math.sign(t.deltaY):!1},en=function(i,t){var e=i.setup.pinch,n=e.disabled,r=e.excluded,a=i.isInitialized,o=t.target,s=a&&!n&&o;if(!s)return!1;var l=di(o,r);return!l},nn=function(i){var t=i.setup.pinch.disabled,e=i.isInitialized,n=i.pinchStartDistance,r=e&&!t&&n;return!!r},tn=function(i,t,e){var n=e.getBoundingClientRect(),r=i.touches,a=N(r[0].clientX-n.left,5),o=N(r[0].clientY-n.top,5),s=N(r[1].clientX-n.left,5),l=N(r[1].clientY-n.top,5);return{x:(a+s)/2/t,y:(o+l)/2/t}},$i=function(i){return Math.sqrt(Math.pow(i.touches[0].pageX-i.touches[1].pageX,2)+Math.pow(i.touches[0].pageY-i.touches[1].pageY,2))},rn=function(i,t){var e=i.pinchStartScale,n=i.pinchStartDistance,r=i.setup,a=r.maxScale,o=r.minScale,s=r.zoomAnimation,l=r.disablePadding,d=s.size,u=s.disabled;if(!e||n===null||!t)throw new Error("Pinch touches distance was not provided");if(t<0)return i.transformState.scale;var p=t/n,f=p*e;return ai(N(f,2),o,a,d,!u&&!l)},an=160,on=100,sn=function(i,t){var e=i.props,n=e.onWheelStart,r=e.onZoomStart;i.wheelStopEventTimer||(Z(i),X(C(i),t,n),X(C(i),t,r))},ln=function(i,t){var e=i.props,n=e.onWheel,r=e.onZoom,a=i.contentComponent,o=i.setup,s=i.transformState,l=s.scale,d=o.limitToBounds,u=o.centerZoomedOut,p=o.zoomAnimation,f=o.wheel,v=o.disablePadding,h=o.smooth,g=p.size,w=p.disabled,_=f.step,S=f.smoothStep;if(!a)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var Y=Ue(t,null),B=h?S*Math.abs(t.deltaY):_,j=Je(i,Y,B,!t.ctrlKey);if(l!==j){var M=J(i,j),k=Qi(t,a,l),L=w||g===0||u||v,H=d&&L,x=ui(i,k.x,k.y,j,M,H),F=x.x,R=x.y;i.previousWheelEvent=t,i.setTransformState(j,F,R),X(C(i),t,n),X(C(i),t,r)}},un=function(i,t){var e=i.props,n=e.onWheelStop,r=e.onZoomStop;hi(i.wheelAnimationTimer),i.wheelAnimationTimer=setTimeout(function(){i.mounted&&(Zi(i,t.x,t.y),i.wheelAnimationTimer=null)},on);var a=Ie(i,t);a&&(hi(i.wheelStopEventTimer),i.wheelStopEventTimer=setTimeout(function(){i.mounted&&(i.wheelStopEventTimer=null,X(C(i),t,n),X(C(i),t,r))},an))},qi=function(i){for(var t=0,e=0,n=0;n<2;n+=1)t+=i.touches[n].clientX,e+=i.touches[n].clientY;var r=t/2,a=e/2;return{x:r,y:a}},dn=function(i,t){var e=$i(t);i.pinchStartDistance=e,i.lastDistance=e,i.pinchStartScale=i.transformState.scale,i.isPanning=!1;var n=qi(t);i.pinchLastCenterX=n.x,i.pinchLastCenterY=n.y,Z(i)},pn=function(i,t){var e=i.contentComponent,n=i.pinchStartDistance,r=i.wrapperComponent,a=i.transformState.scale,o=i.setup,s=o.limitToBounds,l=o.centerZoomedOut,d=o.zoomAnimation,u=o.alignmentAnimation,p=d.disabled,f=d.size;if(!(n===null||!e)){var v=tn(t,a,e);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var h=$i(t),g=rn(i,h),w=qi(t),_=w.x-(i.pinchLastCenterX||0),S=w.y-(i.pinchLastCenterY||0);if(!(g===a&&_===0&&S===0)){i.pinchLastCenterX=w.x,i.pinchLastCenterY=w.y;var Y=J(i,g),B=p||f===0||l,j=s&&B,M=ui(i,v.x,v.y,g,Y,j),k=M.x,L=M.y;i.pinchMidpoint=v,i.lastDistance=h;var H=u.sizeX,x=u.sizeY,F=$(i,H),R=$(i,x),I=k+_,ni=L+S,ii=ri(I,ni,Y,s,F,R,r),V=ii.x,ei=ii.y;i.setTransformState(g,V,ei)}}}},fn=function(i){var t=i.pinchMidpoint;i.velocity=null,i.lastDistance=null,i.pinchMidpoint=null,i.pinchStartScale=null,i.pinchStartDistance=null,Zi(i,t==null?void 0:t.x,t==null?void 0:t.y)},Gi=function(i,t){var e=i.props.onZoomStop,n=i.setup.doubleClick.animationTime;hi(i.doubleClickStopEventTimer),i.doubleClickStopEventTimer=setTimeout(function(){i.doubleClickStopEventTimer=null,X(C(i),t,e)},n)},vn=function(i,t){var e=i.props,n=e.onZoomStart,r=e.onZoom,a=i.setup.doubleClick,o=a.animationTime,s=a.animationType;X(C(i),t,n),Ri(i,o,s,function(){return X(C(i),t,r)}),Gi(i,t)};function mn(i,t){return i==="toggle"?t===1?1:-1:i==="zoomOut"?-1:1}function cn(i,t){var e=i.setup,n=i.doubleClickStopEventTimer,r=i.transformState,a=i.contentComponent,o=r.scale,s=i.props,l=s.onZoomStart,d=s.onZoom,u=e.doubleClick,p=u.disabled,f=u.mode,v=u.step,h=u.animationTime,g=u.animationType;if(!p&&!n){if(f==="reset")return vn(i,t);if(!a)return console.error("No ContentComponent found");var w=mn(f,i.transformState.scale),_=Fi(i,w,v);if(o!==_){X(C(i),t,l);var S=Qi(t,a,o),Y=yi(i,_,S.x,S.y);if(!Y)return console.error("Error during zoom event. New transformation state was not calculated.");X(C(i),t,d),G(i,Y,h,g),Gi(i,t)}}}var hn=function(i,t){var e=i.isInitialized,n=i.setup,r=i.wrapperComponent,a=n.doubleClick,o=a.disabled,s=a.excluded,l=t.target,d=r==null?void 0:r.contains(l),u=e&&l&&d&&!o;if(!u)return!1;var p=di(l,s);return!p},gn=function(){function i(t){var e=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){e.initializeWindowEvents()},this.unmount=function(){e.cleanupWindowEvents()},this.update=function(n){e.props=n,J(e,e.transformState.scale),e.setup=Di(n)},this.initializeWindowEvents=function(){var n,r,a=fi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;(r=e.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",e.onWheelPanning,a),s==null||s.addEventListener("mousedown",e.onPanningStart,a),s==null||s.addEventListener("mousemove",e.onPanning,a),s==null||s.addEventListener("mouseup",e.onPanningStop,a),o==null||o.addEventListener("mouseleave",e.clearPanning,a),s==null||s.addEventListener("keyup",e.setKeyUnPressed,a),s==null||s.addEventListener("keydown",e.setKeyPressed,a)},this.cleanupWindowEvents=function(){var n,r,a=fi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;s==null||s.removeEventListener("mousedown",e.onPanningStart,a),s==null||s.removeEventListener("mousemove",e.onPanning,a),s==null||s.removeEventListener("mouseup",e.onPanningStop,a),o==null||o.removeEventListener("mouseleave",e.clearPanning,a),s==null||s.removeEventListener("keyup",e.setKeyUnPressed,a),s==null||s.removeEventListener("keydown",e.setKeyPressed,a),document.removeEventListener("mouseleave",e.clearPanning,a),Z(e),(r=e.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(n){var r=fi();n.addEventListener("wheel",e.onWheelZoom,r),n.addEventListener("dblclick",e.onDoubleClick,r),n.addEventListener("touchstart",e.onTouchPanningStart,r),n.addEventListener("touchmove",e.onTouchPanning,r),n.addEventListener("touchend",e.onTouchPanningStop,r)},this.handleInitialize=function(n,r){var a=!1,o=e.setup.centerOnInit,s=function(l,d){for(var u=0,p=l;u<p.length;u++){var f=p[u];if(f.target===d)return!0}return!1};e.applyTransformation(),e.onInitCallbacks.forEach(function(l){l(C(e))}),e.observer=new ResizeObserver(function(l){if(s(l,n)||s(l,r))if(o&&!a){var d=r.offsetWidth,u=r.offsetHeight;(d>0||u>0)&&(a=!0,e.setCenter())}else Z(e),J(e,e.transformState.scale),Si(e,0)}),e.observer.observe(n),e.observer.observe(r)},this.onWheelZoom=function(n){var r=e.setup.disabled;if(!r){var a=qe(e,n);if(a){var o=e.isPressingKeys(e.setup.wheel.activationKeys);o&&(sn(e,n),ln(e,n),un(e,n))}}},this.onWheelPanning=function(n){var r=e.setup,a=r.disabled,o=r.wheel,s=r.panning;if(!(!e.wrapperComponent||!e.contentComponent||a||!o.wheelDisabled||s.disabled||!s.wheelPanning||n.ctrlKey)){n.preventDefault(),n.stopPropagation();var l=e.transformState,d=l.positionX,u=l.positionY,p=d-n.deltaX,f=u-n.deltaY,v=s.lockAxisX?d:p,h=s.lockAxisY?u:f,g=e.setup.alignmentAnimation,w=g.sizeX,_=g.sizeY,S=$(e,w),Y=$(e,_);v===d&&h===u||Li(e,v,h,S,Y)}},this.onPanningStart=function(n){var r=e.setup.disabled,a=e.props.onPanningStart;if(!r){var o=Xi(e,n);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.button===0&&!e.setup.panning.allowLeftClickPan||n.button===1&&!e.setup.panning.allowMiddleClickPan||n.button===2&&!e.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),Z(e),Ei(e,n),X(C(e),n,a)))}}},this.onPanning=function(n){var r=e.setup.disabled,a=e.props.onPanning;if(!r){var o=_i(e);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.preventDefault(),n.stopPropagation(),zi(e,n.clientX,n.clientY),X(C(e),n,a))}}},this.onPanningStop=function(n){var r=e.props.onPanningStop;e.isPanning&&(ke(e),X(C(e),n,r))},this.onPinchStart=function(n){var r=e.setup.disabled,a=e.props,o=a.onPinchingStart,s=a.onZoomStart;if(!r){var l=en(e,n);l&&(dn(e,n),Z(e),X(C(e),n,o),X(C(e),n,s))}},this.onPinch=function(n){var r=e.setup.disabled,a=e.props,o=a.onPinching,s=a.onZoom;if(!r){var l=nn(e);l&&(n.preventDefault(),n.stopPropagation(),pn(e,n),X(C(e),n,o),X(C(e),n,s))}},this.onPinchStop=function(n){var r=e.props,a=r.onPinchingStop,o=r.onZoomStop;e.pinchStartScale&&(fn(e),X(C(e),n,a),X(C(e),n,o))},this.onTouchPanningStart=function(n){var r=e.setup.disabled,a=e.props.onPanningStart;if(!r){var o=Xi(e,n);if(o){var s=e.lastTouch&&+new Date-e.lastTouch<200&&n.touches.length===1;if(!s){e.lastTouch=+new Date,Z(e);var l=n.touches,d=l.length===1,u=l.length===2;d&&(Z(e),Ei(e,n),X(C(e),n,a)),u&&e.onPinchStart(n)}}}},this.onTouchPanning=function(n){var r=e.setup.disabled,a=e.props.onPanning;if(e.isPanning&&n.touches.length===1){if(r)return;var o=_i(e);if(!o)return;n.preventDefault(),n.stopPropagation();var s=n.touches[0];zi(e,s.clientX,s.clientY),X(C(e),n,a)}else n.touches.length>1&&e.onPinch(n)},this.onTouchPanningStop=function(n){e.onPanningStop(n),e.onPinchStop(n)},this.onDoubleClick=function(n){var r=e.setup.disabled;if(!r){var a=hn(e,n);a&&cn(e,n)}},this.clearPanning=function(n){e.isPanning&&e.onPanningStop(n)},this.setKeyPressed=function(n){e.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){e.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(r){return e.pressedKeys[r]}):!0},this.setTransformState=function(n,r,a){var o=e.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(r)&&!Number.isNaN(a)){n!==e.transformState.scale&&(e.transformState.previousScale=e.transformState.scale,e.transformState.scale=n),e.transformState.positionX=r,e.transformState.positionY=a,e.applyTransformation();var s=C(e);e.onChangeCallbacks.forEach(function(l){return l(s)}),X(s,{scale:n,positionX:r,positionY:a},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(e.wrapperComponent&&e.contentComponent){var n=Ki(e.transformState.scale,e.wrapperComponent,e.contentComponent);e.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,r,a){return e.props.customTransform?e.props.customTransform(n,r,a):Qe(n,r,a)},this.applyTransformation=function(){if(!(!e.mounted||!e.contentComponent)){var n=e.transformState,r=n.scale,a=n.positionX,o=n.positionY,s=e.handleTransformStyles(a,o,r);e.contentComponent.style.transform=s}},this.getContext=function(){return C(e)},this.onChange=function(n){return e.onChangeCallbacks.has(n)||e.onChangeCallbacks.add(n),function(){e.onChangeCallbacks.delete(n)}},this.onInit=function(n){return e.onInitCallbacks.has(n)||e.onInitCallbacks.add(n),function(){e.onInitCallbacks.delete(n)}},this.init=function(n,r){e.cleanupWindowEvents(),e.wrapperComponent=n,e.contentComponent=r,J(e,e.transformState.scale),e.handleInitializeWrapperEvents(n),e.handleInitialize(n,r),e.initializeWindowEvents(),e.isInitialized=!0;var a=C(e);X(a,void 0,e.props.onInit)},this.props=t,this.setup=Di(this.props),this.transformState=Hi(this.props)}return i}(),wi=O.createContext(null),Sn=function(i,t){return typeof i=="function"?i(t):i},yn=O.forwardRef(function(i,t){var e=T.useRef(new gn(i)).current,n=Sn(i.children,ci(e));return T.useImperativeHandle(t,function(){return ci(e)},[e]),T.useEffect(function(){e.update(i)},[e,i]),O.createElement(wi.Provider,{value:e},n)});O.forwardRef(function(i,t){var e=T.useRef(null),n=T.useContext(wi);return T.useEffect(function(){return n.onChange(function(r){if(e.current){var a=0,o=0;e.current.style.transform=n.handleTransformStyles(a,o,1/r.instance.transformState.scale)}})},[n]),O.createElement("div",Q({},i,{ref:$e([e,t])}))});function wn(i,t){t===void 0&&(t={});var e=t.insertAt;if(!(!i||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var bn=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Wi={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};wn(bn);var Pn=function(i){var t=i.children,e=i.wrapperClass,n=e===void 0?"":e,r=i.contentClass,a=r===void 0?"":r,o=i.wrapperStyle,s=i.contentStyle,l=i.wrapperProps,d=l===void 0?{}:l,u=i.contentProps,p=u===void 0?{}:u,f=T.useContext(wi),v=f.init,h=f.cleanupWindowEvents,g=T.useRef(null),w=T.useRef(null);return T.useEffect(function(){var _=g.current,S=w.current;return _!==null&&S!==null&&v&&(v==null||v(_,S)),function(){h==null||h()}},[]),O.createElement("div",Q({},d,{ref:g,className:"".concat(mi.wrapperClass," ").concat(Wi.wrapper," ").concat(n),style:o}),O.createElement("div",Q({},p,{ref:w,className:"".concat(mi.contentClass," ").concat(Wi.content," ").concat(a),style:s}),t))};const Cn=z("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),Tn=z("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"205px",h:"70px",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",gap:"5px",justify:"center",color:"#828282"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),Yn=z("div",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",mt:"10px",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%"}),Xn=z("div",{d:"grid",gap:"10px",gridTemplateAreas:`
    "filters destination"
    "team team"
  `,px:"20px",pb:"10px",w:"100%","@sm":{}}),_n=z("div",{d:"flex",gridArea:"filters",gap:"10px"}),An=z("div",{d:"flex",align:"center",justify:"flex-end",gridArea:"destination",gap:"2px"}),En=z("div",{d:"flex",bg:"rgba(255, 225, 225, 0.05)",padding:"2px 3px",img:{w:"40px"},variants:{disabled:{true:{opacity:.7,filter:"grayscale(100%)"}}}});z("div",{d:"block",gridArea:"destination",w:"max-content",ml:"auto",p:{textAlign:"right",fs:"24px",ff:"$heading",color:"#fff",textTransform:"capitalize","&:not(:first-child)":{fs:"14px"}},"@sm":{p:{fs:"14px","&:not(:first-child)":{fs:"10px",color:"#8A8A8A"}}}});z("div",{d:"flex",gridArea:"team",w:"max-content",ml:"auto",">div":{ml:"5px","&:nth-child(3)":{ml:"25px"}},"@sm":{}});z("div",{d:"flex",align:"center",gap:"5px",direction:"column",img:{w:"35px",h:"35px"},span:{fs:"12px",ff:"$heading",color:"#A6A6A6"},"@sm":{}});const zn=z("div",{d:"flex",w:"100%",px:"10px",".react-transform-wrapper":{maxH:"calc(100vh - 250px)"},"@sm":{".react-transform-wrapper":{maxH:"calc(100vh - 190px)"}},"@media (max-width: 768px) and (max-height: 500px)":{".react-transform-wrapper":{maxH:"calc(100vh)"}}}),xn=z("div",{d:"flex",w:"1920px",h:"1080px",position:"relative",img:{w:"1920px",h:"1080px"}}),Dn=z("button",{d:"flex",align:"center",justify:"center",position:"absolute",border:"1px solid rgba(0,0,0,0.6)",zIndex:1,w:"calc(100% / 40)",h:"calc(100% / 20)",svg:{w:"20px",h:"20px"},variants:{isSelected:{true:{bg:"rgba(0, 186, 255, 0.58)"}},type:{miningEvent:{zIndex:2},portal:{zIndex:2}}}});z("div",{d:"flex",align:"center",flexWrap:"wrap",gap:"20px",mt:"10px",pl:"20px",w:"100%"});z("div",{d:"flex",align:"center",justify:"center",gap:"5px",color:"#fff",ff:"$heading",fs:"10px",svg:{w:"17px",h:"17px"},"&:nth-child(1)":{fill:"#80FF00"},"&:nth-child(2)":{fill:"#EB094D"},"&:nth-child(3)":{fill:"#FFB800"}});const Wn=z("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,img:{w:"35px",h:"35px"},span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",textTransform:"capitalize",padding:"2px 5px",bg:"#333333",color:"#fff",ff:"$heading",fs:"10px",br:"5px"}}),On=z("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fw:900,ff:"$heading",fs:"16px",br:"5px","-webkit-text-stroke":"1px #000"}}),jn=i=>{const t=new Date(new Date().toUTCString().substring(0,25)),e=+i-+t;let n={days:0,hours:0,minutes:0,seconds:0};return e>0&&(n={days:Math.floor(e/(1e3*60*60)/24),hours:Math.floor(e/(1e3*60*60)%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}),{...n,difference:e}},Bn=i=>{if(i&&((i==null?void 0:i.seconds)>0||(i==null?void 0:i.minutes)>0||(i==null?void 0:i.hours)>0)){const t=i.hours>0?`${i.hours>9?`${i.hours}:`:`0${i.hours}:`}`:"",e=i.minutes>0?`${i.minutes>9?i.minutes:`0${i.minutes}`}`:"00",n=i.seconds>9?i.seconds:`0${i.seconds}`;return`${t}${e}:${n}`}return"MINE"};async function kn(i,t,e){const{executeTransaction:n}=re(),r=Nn(i,t,e);return!!await n(r)}function Nn(i,t,e){return{actions:[{account:Ii.playersAle,name:"travel",authorization:[{actor:i.name,permission:i.authorization.permission}],data:{wallet:i.name,x:t,y:e}}]}}const Mn=ie((i,t)=>({areaSelected:null,setAreaSelected:e=>i({areaSelected:e})})),Ln=i=>oe({queryKey:[ee.playerDataState,i],queryFn:()=>Zn(i),staleTime:1e3*60*20,enabled:!!Bi.getState().user});async function Zn(i){try{const t=await ne(i);return t||null}catch(t){return console.log(t),null}}const Oi=O.lazy(()=>q(()=>import("./index-eee5c489.js"),["assets/index-eee5c489.js","assets/index-f6906664.js","assets/index-55fec1ff.css"])),ji=O.lazy(()=>q(()=>import("./index-c567dca5.js"),["assets/index-c567dca5.js","assets/index-f6906664.js","assets/index-55fec1ff.css","assets/index-4263a2e3.js","assets/iconBase-5b9ba73e.js"])),Hn=O.lazy(()=>q(()=>import("./box-gloves-c6457274.js"),["assets/box-gloves-c6457274.js","assets/index-f6906664.js","assets/index-55fec1ff.css"])),Fn=O.lazy(()=>q(()=>import("./travel-arrow-9295e728.js"),["assets/travel-arrow-9295e728.js","assets/index-f6906664.js","assets/index-55fec1ff.css"]));O.lazy(()=>q(()=>import("./portal-d6f34076.js"),["assets/portal-d6f34076.js","assets/index-f6906664.js","assets/index-55fec1ff.css"]));const Vn=O.lazy(()=>q(()=>import("./index-d970c262.js"),["assets/index-d970c262.js","assets/index-f6906664.js","assets/index-55fec1ff.css"])),Rn=O.lazy(()=>q(()=>import("./index-df0481eb.js"),["assets/index-df0481eb.js","assets/index-f6906664.js","assets/index-55fec1ff.css","assets/inventory-query-88942d31.js","assets/useQuery-ddc74530.js","assets/atomic-api-9c9b7193.js","assets/toast-options-057d1e9b.js","assets/use-transaction-a1c6f80f.js","assets/sleep-da79c358.js","assets/index-f2c8e2f4.js","assets/use-media-f9d9944a.js","assets/constants-2bbfa292.js"])),Kn=O.lazy(()=>q(()=>import("./index-04525a6a.js"),["assets/index-04525a6a.js","assets/index-f6906664.js","assets/index-55fec1ff.css","assets/index-bc0ae3a6.js","assets/index-f2c8e2f4.js","assets/use-media-f9d9944a.js"])),Qn=()=>{var ei;const{areaSelected:i,setAreaSelected:t}=Mn(),{user:e,updatePlayerData:n,updateLandsData:r}=Bi(),a=T.useRef(null),[o,s]=T.useState([]),[l,d]=T.useState([]),[u,p]=T.useState(null),[f,v]=T.useState(8),[h,g]=T.useState(0),[w,_]=T.useState(!1),[S,Y]=T.useState({label:e!=null&&e.planet?e.planet.charAt(0).toUpperCase()+e.planet.slice(1):"",value:(e==null?void 0:e.planet)||""}),[B,j]=T.useState([]),[M,k]=T.useState(B),[L,H]=T.useState([]),{data:x}=Ln((S==null?void 0:S.value)||""),F=T.useCallback(()=>{var W,D,U;if(!e)return null;const m=((W=x==null?void 0:x.filter(A=>!!A.special_effect))==null?void 0:W.map(A=>({x:A.x-1,y:A.y-1,type:"portal",text:A.special_effect.slice(2,1/0)})))||[],b=((D=[...e.active_taverns,e.last_tavern].filter(A=>A.planet===(S==null?void 0:S.value)))==null?void 0:D.map(A=>({x:A.x-1,y:A.y-1,type:"tavern"})))||[],E=[...m,...b],y=E.reduce((A,K)=>(A.some(({value:oi})=>oi===K.type)||A.push({label:K.type.charAt(0).toUpperCase()+K.type.slice(1),value:K.type}),A),[]),P=(U=(x==null?void 0:x.filter(A=>{var K;return!!((K=A.buildings)!=null&&K.length)}))||[])==null?void 0:U.flatMap(A=>A.buildings);H(P),j(y),k(y),d(E)},[e,x,S]);T.useEffect(()=>{const E=1920/Ti,y=1080/Yi,P=[];for(let W=0;W<Ti;W++){P[W]=[];for(let D=0;D<Yi;D++)P[W][D]={x:W*E,y:D*y}}s(P),F()},[F]);function R(m,b){switch(b){case"arena":return c.jsxs("svg",{fill:"rgba(235, 9, 77, 0.67)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"youControl":return c.jsxs("svg",{fill:"rgba(173, 255, 0, 0.65)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"miningEvent":return c.jsxs(On,{children:[c.jsx("span",{children:m}),c.jsxs("svg",{fill:"#FFB800",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490 490",children:[c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m}),c.jsx("polygon",{points:"245,456.701 490,33.299 0,33.299 "})]})]});case"portal":return c.jsxs(Wn,{children:[c.jsx("span",{children:m}),c.jsx("img",{loading:"lazy",src:"./assets/maps/portal.webp",alt:"portal"})]});case"flag":return c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999,width:"14px",height:"14px"},children:[c.jsx("circle",{cx:"11",cy:"11",r:"11",fill:"#DB4447"}),c.jsx("circle",{cx:"11",cy:"11",r:"9",fill:"#141423"}),c.jsx("circle",{cx:"11",cy:"11",r:"7",fill:"#DB4447"})]});case"tavern":return c.jsx("div",{children:c.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{width:"17.6777",height:"17.6777",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 0 12.5)",fill:"#FFB800"}),c.jsx("rect",{width:"12.8565",height:"12.8565",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 3.37476 12.5)",fill:"#141423"}),c.jsx("rect",{width:"8.03534",height:"8.03534",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 6.83008 12.5)",fill:"#FFB800"})]})});default:return null}}function I(m){if(!e)return;if((u==null?void 0:u.x)===m.clientX&&(u==null?void 0:u.y)===m.clientY){p(null);return}if(p({x:m.clientX,y:m.clientY,type:m.type}),e.mapX===m.clientX&&e.mapY===m.clientY){g(0);return}const b=Math.sqrt(Math.pow(e.mapX-m.clientX,2)+Math.pow(e.mapY-m.clientY,2)),E=Math.ceil(b);g(E)}function ni(){if(!e)return;const m={x:e.x,y:e.y,type:(V==null?void 0:V.type)||""};if(m.type==="tavern"){const b=(e==null?void 0:e.active_taverns.find(({x:E,y})=>E===m.x&&y===m.y))||((e==null?void 0:e.last_tavern.x)===m.x&&(e==null?void 0:e.last_tavern.y)===m.y?e==null?void 0:e.last_tavern:{});t({...m,...b})}}async function ii(){try{if(_(!0),!e||!u||!await kn(e,(u==null?void 0:u.x)+1||0,(u==null?void 0:u.y)+1||0))return;await ae(2e3),p(null),g(0);const b=await n();await r(),b!=null&&b.planet&&Y({label:b.planet.charAt(0).toUpperCase()+b.planet.slice(1),value:b.planet}),te.success("Travel successful")}catch(m){console.error(m)}finally{_(!1)}}const V=T.useMemo(()=>l.find(({x:m,y:b})=>(e==null?void 0:e.mapX)===m&&(e==null?void 0:e.mapY)===b),[l,e]);return T.useEffect(()=>{const m=setInterval(()=>{var E;const b=(E=l==null?void 0:l.filter(y=>(y==null?void 0:y.formattedTimeLeft)!=="MINE"))==null?void 0:E.map(y=>{if(y.type==="miningEvent"&&(y==null?void 0:y.formattedTimeLeft)!=="MINE"&&(y!=null&&y.expirationDate)){const P=jn(y==null?void 0:y.expirationDate);return{...y,formattedTimeLeft:Bn(P),mineTime:P}}return y});d(b)},1e3);return()=>clearInterval(m)},[l]),(i==null?void 0:i.type)==="arena"?c.jsx(Vn,{}):(i==null?void 0:i.type)==="tavern"?c.jsx(Rn,{}):(i==null?void 0:i.type)==="dungeon"?c.jsx(Kn,{}):c.jsxs(Cn,{children:[c.jsxs(Tn,{children:[l.some(({x:m,y:b})=>(e==null?void 0:e.mapX)===m&&(e==null?void 0:e.mapY)===b)&&c.jsx(Oi,{color:"black",onClick:ni,icon:Hn,children:(V==null?void 0:V.type)==="tavern"?"Enter Tavern":"Enter Arena"}),c.jsxs(Oi,{isLoading:w,disabled:S.value!==(e==null?void 0:e.planet)||!u||!h||h>(((ei=e==null?void 0:e.activestats)==null?void 0:ei.action_points)||0)||w,color:"black",onClick:ii,icon:Fn,children:["Travel",S.value===(e==null?void 0:e.planet)&&c.jsxs("span",{children:["- ",h,c.jsx("img",{loading:"lazy",src:"/assets/icons/potion.png",alt:""})]})]})]}),c.jsxs(Yn,{ref:a,children:[c.jsxs(Xn,{children:[c.jsxs(_n,{children:[c.jsx(ji,{options:se,selected:S,onSelected:m=>Y(m)}),c.jsx(ji,{title:"Select a filter",onMultipleSelected:m=>k(m),isMultipleItems:!0,multiplesSelected:M,options:B})]}),c.jsx(An,{children:le.map((m,b)=>c.jsx(En,{disabled:!(L!=null&&L.some(E=>E.building_name===m.name.toLowerCase())),children:c.jsx("img",{loading:"lazy",src:`/assets/buildings/${m.img}.png`,alt:m.name,title:m.name})},b))})]}),(e==null?void 0:e.playerLand)&&c.jsx(zn,{children:c.jsx(yn,{disablePadding:!0,initialScale:1,maxScale:2,doubleClick:{step:f},onPanningStop:m=>{m.state.scale!==1?v(-8):v(8)},children:c.jsx(Pn,{children:c.jsxs(xn,{children:[c.jsx("img",{loading:"lazy",src:`/assets/maps/${S==null?void 0:S.value}.jpg`,alt:""}),o.map((m,b)=>m.map((E,y)=>{var W;const P=(W=l==null?void 0:l.filter(D=>M.some(U=>U.value!=="mixed"?U.value===D.type:!0)))==null?void 0:W.find(D=>D.x===b&&D.y===y);return c.jsxs(Dn,{onClick:()=>I({clientX:b,clientY:y,type:(P==null?void 0:P.type)||""}),isSelected:(u==null?void 0:u.x)===b&&(u==null?void 0:u.y)===y,type:(P==null?void 0:P.type)||"empty",style:{top:E.y,left:E.x},children:[!!P&&R((P==null?void 0:P.formattedTimeLeft)||(P==null?void 0:P.number)||(P==null?void 0:P.text)||"",(P==null?void 0:P.type)||""),e.planet===S.value&&e.mapX===b&&e.mapY===y&&R("","flag")]},E.x+E.y)}))]})})})})]})]})},In=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));export{In as i,Mn as u};

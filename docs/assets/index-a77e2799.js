import{s as _,S as D,R as r,_ as p,u as w,r as d,j as i,Q as I}from"./index-dd1a4b84.js";import{u as P}from"./use-transaction-3af351c4.js";import{s as C}from"./sleep-da79c358.js";import{u as O}from"./index-ca58326e.js";import"./toast-options-15114344.js";const S=_("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),V=_("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"205px",h:"70px",textTransform:"capitalize",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",gap:"5px",justify:"center",color:"#828282"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),M=_("div",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",mt:"10px",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%"});async function k(n,e,l){const{executeTransaction:s}=P(),t=B(n,e,l);return!!await s(t)}function B(n,e,l){return{actions:[{account:D.playersAle,name:"travel",authorization:[{actor:n.name,permission:n.authorization.permission}],data:{wallet:n.name,x:e,y:l}}]}}const F=(n,e)=>{const l=String(n),s=String(e);let t="";for(const a of l)a=="0"?t=t+"a":a=="1"?t=t+"b":a=="2"?t=t+"c":a=="3"?t=t+"d":a=="4"?t=t+"e":a=="5"?t=t+"f":a=="6"?t=t+"g":a=="7"?t=t+"h":a=="8"?t=t+"i":a=="9"&&(t=t+"j");t=t+"x";for(const a of s)a=="0"?t=t+"a":a=="1"?t=t+"b":a=="2"?t=t+"c":a=="3"?t=t+"d":a=="4"?t=t+"e":a=="5"?t=t+"f":a=="6"?t=t+"g":a=="7"?t=t+"h":a=="8"?t=t+"i":a=="9"&&(t=t+"j");return t},g=r.lazy(()=>p(()=>import("./index-f53f7042.js"),["assets/index-f53f7042.js","assets/index-dd1a4b84.js","assets/index-55fec1ff.css"])),W=r.lazy(()=>p(()=>import("./index-6d0caa1e.js"),["assets/index-6d0caa1e.js","assets/index-dd1a4b84.js","assets/index-55fec1ff.css","assets/index-ca58326e.js","assets/constants-1566b5f3.js"])),$=r.lazy(()=>p(()=>import("./index-ed212512.js"),["assets/index-ed212512.js","assets/index-dd1a4b84.js","assets/index-55fec1ff.css","assets/useQuery-db67cfbd.js","assets/constants-1566b5f3.js","assets/index-ca58326e.js"])),H=r.lazy(()=>p(()=>import("./box-gloves-f40b4968.js"),["assets/box-gloves-f40b4968.js","assets/index-dd1a4b84.js","assets/index-55fec1ff.css"])),G=r.lazy(()=>p(()=>import("./travel-arrow-3c21597e.js"),["assets/travel-arrow-3c21597e.js","assets/index-dd1a4b84.js","assets/index-55fec1ff.css"])),N=r.lazy(()=>p(()=>import("./index-0b3b12cd.js"),["assets/index-0b3b12cd.js","assets/index-dd1a4b84.js","assets/index-55fec1ff.css"])),Q=r.lazy(()=>p(()=>import("./index-3ed07ca2.js"),["assets/index-3ed07ca2.js","assets/index-dd1a4b84.js","assets/index-55fec1ff.css","assets/index-ca58326e.js","assets/inventory-query-8b9b978c.js","assets/useQuery-db67cfbd.js","assets/atomic-api-fbb127ae.js","assets/toast-options-15114344.js","assets/use-transaction-3af351c4.js","assets/sleep-da79c358.js","assets/use-media-438538f3.js","assets/fighters-query-523c64b7.js"])),X=r.lazy(()=>p(()=>import("./index-9d5e73a7.js").then(n=>n.i),["assets/index-9d5e73a7.js","assets/index-dd1a4b84.js","assets/index-55fec1ff.css","assets/index-ba90a64f.js","assets/index-11210792.js","assets/use-media-438538f3.js","assets/index-ca58326e.js","assets/sleep-da79c358.js","assets/use-transaction-3af351c4.js","assets/toast-options-15114344.js"])),U=({user:n})=>{var y;const{areaSelected:e,allAreas:l,moveCost:s,selectedMap:t,selectedCoordinates:a,setSelectedCoordinates:T,setAreaSelected:x,setMoveCost:j,setSelectedMap:h}=O(),{updatePlayerData:E,updateLandsData:u}=w(),A=d.useRef(null),[v,m]=d.useState(!1);function R(){if(!n)return;const o={x:n.x,y:n.y,type:(f==null?void 0:f.type)||"",landId:F(n.x,n.y)};if(o.type==="tavern"){const c=(n==null?void 0:n.active_taverns.find(({x:z,y:b})=>z===o.x&&b===o.y))||((n==null?void 0:n.last_tavern.x)===o.x&&(n==null?void 0:n.last_tavern.y)===o.y?n==null?void 0:n.last_tavern:{});x({...o,...c});return}x({...o,...e})}async function L(){try{if(m(!0),!n||!a||!await k(n,(a==null?void 0:a.x)+1||0,(a==null?void 0:a.y)+1||0))return;await C(2e3),T(null),j(0);const c=await E();await u(),c!=null&&c.planet&&h({label:c.planet.charAt(0).toUpperCase()+c.planet.slice(1),value:c.planet}),I.success("Travel successful")}catch(o){console.error(o)}finally{m(!1)}}const f=d.useMemo(()=>l[`${n.mapX},${n.mapY}`],[l,n]);return(e==null?void 0:e.type)==="arena"?i.jsx(N,{}):(e==null?void 0:e.type)==="tavern"?i.jsx(Q,{}):(e==null?void 0:e.type)==="dungeon"?i.jsx(X,{}):i.jsxs(S,{children:[i.jsxs(V,{children:[!!f&&i.jsx(g,{color:"black",onClick:R,icon:H,children:`Enter ${f==null?void 0:f.type}`}),i.jsxs(g,{isLoading:v,disabled:t.value!==(n==null?void 0:n.planet)||!a||!s||s>(((y=n==null?void 0:n.activestats)==null?void 0:y.action_points)||0)||v,color:"black",onClick:L,icon:G,children:["Travel",t.value===(n==null?void 0:n.planet)&&i.jsxs("span",{children:["- ",s,i.jsx("img",{loading:"lazy",src:"/assets/icons/potion.png",alt:""})]})]})]}),i.jsxs(M,{ref:A,children:[i.jsx(W,{}),i.jsx($,{})]})]})};export{U as default};

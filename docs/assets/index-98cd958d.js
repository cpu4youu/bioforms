import{s as a,g as j,S as d,q as S,e as y,u as _,r as h,j as n,y as D,O as E}from"./index-38df100d.js";import{u as w}from"./useQuery-f1937479.js";const k=a("img",{w:"100%",maxW:"500px",br:"15px",h:"100%",overflowY:"auto"}),B=a("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",gap:"10px",w:"100%",maxW:"465px",mt:"10px",mx:"auto",bg:"#141423",br:"15px",h:"100%",overflowY:"auto",variants:{isHidden:{true:{"@sm":{display:"none"}}}}}),P=a("div",{d:"flex",align:"center",justify:"center",gap:"3px",w:"100%",h:"180px",position:"relative"}),R=a("img",{zIndex:"1",w:"100%",h:"180px",objectFit:"contain"}),q=a("img",{position:"absolute",top:"0",left:"0",w:"100%",h:"180px",objectFit:"cover",objectPosition:"center bottom",br:"15px 15px 0 0"}),L=a("button",{d:"flex",align:"flex-start",justify:"center",zIndex:"2",textShadow:"0 0 5px rgba(0,0,0)",color:"#fff",fs:"30px",w:"50px",top:"0px",right:"0px",position:"absolute"}),W=a("div",{d:"flex",align:"center",justify:"center",direction:"column",padding:"0 40px 0 40px",w:"100%"}),I=a("div",{d:"flex",align:"center",justify:"center",gap:"10px",mb:"5px",color:"#787878",fw:"bold",ff:"$heading",fs:"12px"}),N=a("h3",{color:"#fff",textTransform:"capitalize",textAlign:"center",fs:"20px",w:"100%"}),O=a("span",{color:"#C7C7C7",textTransform:"capitalize",textAlign:"center",ff:"$heading",fs:"15px",w:"100%","@lgxx":{fs:"12px"}}),b=a("div",{d:"flex",align:"center",justify:"space-between",w:"100%",color:"#fff",textTransform:"capitalize",textAlign:"center",ff:"$heading",fs:"15px",span:{"&:first-child":{fw:"bold",color:"#fff"},"&:last-child":{color:"#B8B8B8"}},"@lgxx":{fs:"12px"}}),Q=a("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"10px",padding:"20px 40px 40px",w:"100%"}),Y=a("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"5px",padding:"20px",w:"100%",bg:"rgba(192, 192, 192, 0.15)",br:"10px"}),K=a("div",{d:"flex",align:"center",justify:"space-between",w:"100%",strong:{color:"#fff",ff:"$heading",fs:"15px",textAlign:"center",textTransform:"capitalize"},span:{d:"flex",align:"center",gap:"5px",color:"#fff",ff:"$heading",fs:"15px",textAlign:"center",textTransform:"capitalize","span:nth-child(2)":{color:"#339DFF"}},"@lgxx":{span:{fs:"12px"}}}),H=a("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"5px",w:"100%"}),V=a("div",{d:"flex",align:"center",justify:"center",gap:"5px",w:"100%"}),U=a("div",{d:"flex",align:"center",justify:"center",direction:"column",gap:"7px",padding:"10px 0",w:"100%",bg:"rgba(192, 192, 192, 0.15)",br:"10px",strong:{w:"100%",color:"#fff",ff:"$heading",fs:"13px",textAlign:"center",textTransform:"capitalize"},span:{w:"100%",color:"#D5D5D5",ff:"$heading",fs:"12px",textAlign:"center",textTransform:"capitalize"},"@lgxx":{span:{fs:"12px"}}}),G=a("div",{d:"flex",direction:"column",gap:"10px",w:"100%",h3:{w:"100%",color:"#fff",textTransform:"capitalize",ff:"$heading",fs:"15px"},p:{w:"100%",color:"#fff",ff:"$heading",fs:"15px"}}),J=async()=>{const e=await j({options:{code:d.battleAle,index_position:1,limit:"1000",scope:d.battleAle,table:S.config}});return(e==null?void 0:e[0])||null},X=()=>w({queryKey:[y.BattleConfigState],queryFn:()=>Z(),staleTime:1e3*60*60,enabled:!!_.getState().user});async function Z(){try{return await J()}catch(e){return console.log(e),null}}const F=async()=>await j({options:{code:d.battleAle,index_position:1,limit:"1000",scope:d.battleAle,table:"classtemps"}})||[],ee=()=>w({queryKey:[y.ClasstempsState],queryFn:()=>ne(),staleTime:1e3*60*60,enabled:!!_.getState().user});async function ne(){try{return await F()}catch(e){return console.log(e),null}}const te=({selectedFighter:e,onCloseFighterDetail:v,isHidden:$})=>{const{data:u}=X(),{data:c}=ee(),g=e,T=h.useMemo(()=>{if(e.agePenalty)return e.agePenalty;let t=0;e.creation_date&&(t=Math.floor((Date.now()-new Date(e.creation_date).getTime())/(1e3*60*60*24)));const o=((u==null?void 0:u.age_penaly_percent_day)??0)/100||0;return Math.floor(t*o)},[e,u]),A=h.useCallback((t,o)=>{const r=c==null?void 0:c.find(M=>M.classname===e.classname);if(!r)return;const s=r.total_min_max_stats,p=(s==null?void 0:s[`${t}_min_min`])??0,x=(s==null?void 0:s[`${t}_max_min`])??0,f=(s==null?void 0:s[`${t}_min_max`])??0,m=(s==null?void 0:s[`${t}_max_max`])??0,i=o*10,C=(p+x)/2,l=(f+m)/2-C;return t==="attackspeed "||t==="initiative"?i<=l*.05?"gold-up":i<=l*.2?"green-duble-up":i<=l*.4?"green-up":i<=l*.6?"middle":i<=l*.95?"red-down":"red-duble-down":i<=l*.2?"red-duble-down":i<=l*.4?"red-down":i<=l*.6?"middle":i<=l*.8?"green-up":i<=l*.95?"green-duble-up":"gold-up"},[c,e]),z=h.useCallback((t,o)=>{const r=c==null?void 0:c.find(m=>m.classname===e.classname);if(!r)return;const s=r.total_min_max_stats,p=(s==null?void 0:s[`${t}_max`])??0,x=o*10,f=x/p*100;return x<=p*.2?{img:"red-duble-down",percentage:Math.floor(f)}:x<=p*.4?{img:"red-down",percentage:Math.floor(f)}:x<=p*.6?{img:"middle",percentage:Math.floor(f)}:x<=p*.8?{img:"green-up",percentage:Math.floor(f)}:x<=p*.95?{img:"green-duble-up",percentage:Math.floor(f)}:{img:"gold-up",percentage:Math.floor(f)}},[c,e]);return e.classname?n.jsxs(B,{isHidden:$,children:[n.jsxs(P,{children:[n.jsx(L,{onClick:()=>v(null),children:"x"}),n.jsx(R,{src:`/assets/fighter/classes/avatar_${e.classname}_${e.racename}.png`,alt:`${e.classname}_${e.racename}`,title:`${e.classname}_${e.racename}`,loading:"lazy"}),n.jsx(q,{src:`/assets/fighter/classes/backgrounds/avatar/avatar_background_${e.element}.jpeg`,alt:"",loading:"lazy"})]}),n.jsxs(W,{children:[n.jsxs(N,{children:[e.racename," ",e.classname]}),n.jsxs(I,{children:["(Level ",e.level||e.stats.level,")"]}),n.jsxs(O,{children:["Element: ",e==null?void 0:e.element]})]}),n.jsxs(Q,{children:[n.jsxs(b,{children:[n.jsx("span",{children:"BASE STATS "}),n.jsxs("span",{children:["Age Penalty: - ",T,"%"]})]}),n.jsx(Y,{children:D.map(t=>{const o=(g==null?void 0:g[`${t}_min`])??0,r=(g==null?void 0:g[`${t}_max`])??0;return n.jsxs(K,{children:[n.jsxs("strong",{children:[t,":"]}),n.jsxs("span",{children:[n.jsx("span",{children:Math.floor((o+r)/2)}),n.jsxs("span",{children:["(+-",Math.floor(Math.abs(r-o)/2),")"]}),n.jsx("img",{src:`/assets/icons/arrows/${A(t,Math.floor((o+r)/2))}.png`,alt:"arrow-up",loading:"lazy"})]})]},t)})}),n.jsxs(H,{children:[n.jsxs(b,{children:[n.jsx("span",{children:"RESISTANCES"}),n.jsx("span",{})]}),n.jsx(V,{children:E.map(t=>{const o=g[t.value],r=z(t.value,Number(o));return n.jsxs(U,{children:[n.jsx("strong",{children:t.displayname}),n.jsxs("span",{children:[r==null?void 0:r.percentage,"%"]}),n.jsx("img",{src:`/assets/icons/arrows/${r==null?void 0:r.img}.png`,alt:"arrow-up",loading:"lazy"})]},t.value)})})]}),n.jsxs(G,{children:[n.jsx("h3",{children:"CLASS"}),n.jsx("p",{children:"Very high Taunt, Medium health, and Above average Damage and initiative. They draw attention away from the rest of the team and seek glory, but are often the first unit hit."})]})]})]}):n.jsx(k,{src:"/assets/fighter/unknown-fighter.jpeg",alt:"",loading:"lazy"})},oe=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{te as F,ee as a,oe as i,X as u};

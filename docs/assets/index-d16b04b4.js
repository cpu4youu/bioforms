import{g as m,S as c,e as x,u as p,s as u,R as l,_ as y,j as n,r as g,Q as a}from"./index-78dc7b1e.js";import{u as h}from"./useQuery-0b74c68b.js";import b from"./index-392c3423.js";import{u as w}from"./index-658335f7.js";import{u as S}from"./use-transaction-7fcf6795.js";import{v as T}from"./v4-4a60fe23.js";import"./toast-options-251f3299.js";const _=async()=>await m({options:{code:c.usptsWorlds,index_position:1,key_type:"i64",limit:"100",reverse:!0,scope:c.usptsWorlds,table:"pointoffers"}}),j=()=>h({queryKey:[x.PointOffersState],queryFn:()=>v(),staleTime:1e3*60*60,enabled:!!p.getState().user});async function v(){try{return await _()}catch(e){return console.log(e),null}}const D=u("div",{d:"flex",align:"center",justify:"flex-start",direction:"column",position:"relative",padding:"40px 40px",gap:"50px",mt:"10px",bg:"#141423",br:"15px",maxW:"524px",w:"100%",button:{justify:"center",h:"50px",fw:"bold"},img:{h:"233px",w:"150px",objectFit:"contain"},variants:{isHidden:{true:{"@sm":{display:"none"}}}},"@xmd":{maxW:"100%"}}),R=u("div",{d:"flex",fw:"bold",ff:"$heading",fs:"16px",color:"white"}),W=u("button",{display:"none",align:"flex-start",justify:"center",color:"#fff",fs:"30px",w:"50px",h:"50px",top:"0px",right:"0px",position:"absolute","@xmd":{d:"flex"}});async function A(e,s){const{executeTransaction:t}=S(),r=C(e,s);return!!await t(r)}function C(e,s){return{actions:[{account:c.usptsWorlds,name:"redeempntnft",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{user:e.name,offer_id:s}}]}}const E=l.lazy(()=>y(()=>import("./index-6a53c4c8.js"),["assets/index-6a53c4c8.js","assets/index-78dc7b1e.js","assets/index-55fec1ff.css","assets/index-658335f7.js","assets/useQuery-0b74c68b.js","assets/index-392c3423.js"])),F=l.memo(()=>{var s;const{data:e}=j();return n.jsx(n.Fragment,{children:(s=e==null?void 0:e.filter(t=>{const r=new Date;return new Date(t.end).getTime()-r.getTime()>0}))==null?void 0:s.map(t=>n.jsx(E,{...t},T()))})}),L=l.memo(()=>{const{user:e,updatePlayerData:s}=p(),{selectedPointOffer:t,setSelectedPointOffer:r}=w(),[o,i]=g.useState(!1);async function f(){if(!e)return a.error("You need to be logged in to buy items");if(!t)return a.error("You need to select a NFT to buy items");i(!0);try{await A(e,t.template_id)&&(await s(),a.success("Item bought successfully"))}catch{a.error("Error buying item")}finally{i(!1),r(null)}}return n.jsxs(D,{children:[n.jsx(W,{onClick:()=>r(null),children:"x"}),n.jsxs(R,{children:["Are you sure you want to spend"," ",(((t==null?void 0:t.required)||1)/10).toLocaleString("en-US")," Alien Worlds shards to craft this NFT?"]}),n.jsx("img",{loading:"lazy",src:`/assets/aw-nft-images/${t==null?void 0:t.template_id}.webp`,alt:""}),n.jsxs(b,{isLoading:o,disabled:o,onClick:f,color:"blue",children:["Buy now for ",(((t==null?void 0:t.required)||1)/10).toLocaleString("en-US")," AW shards"]})]})});F.displayName="PointOffersList";L.displayName="PointOffersSelection";export{F as PointOffersList,L as PointOffersSelection};

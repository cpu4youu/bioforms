import{R as W,r as Y,s as x,S as Ii,c as ie,Q as ee,u as Bi,g as ne,_ as q,j as c,a as te}from"./index-3ef2c8a4.js";import{u as re}from"./use-transaction-05983c75.js";import{s as ae}from"./sleep-da79c358.js";import{u as oe}from"./useQuery-47f5a8b1.js";import{g as Ti,a as Yi,l as se,f as le}from"./constants-1c8f422b.js";var L=function(i,t){return Number(i.toFixed(t))},ue=function(i,t){return typeof i=="number"?i:t},_=function(i,t,e){e&&typeof e=="function"&&e(i,t)},de=function(i){return-Math.cos(i*Math.PI)/2+.5},pe=function(i){return i},fe=function(i){return i*i},ve=function(i){return i*(2-i)},me=function(i){return i<.5?2*i*i:-1+(4-2*i)*i},ce=function(i){return i*i*i},he=function(i){return--i*i*i+1},ge=function(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},Se=function(i){return i*i*i*i},we=function(i){return 1- --i*i*i*i},ye=function(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},be=function(i){return i*i*i*i*i},Pe=function(i){return 1+--i*i*i*i*i},Ce=function(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i},ki={easeOut:de,linear:pe,easeInQuad:fe,easeOutQuad:ve,easeInOutQuad:me,easeInCubic:ce,easeOutCubic:he,easeInOutCubic:ge,easeInQuart:Se,easeOutQuart:we,easeInOutQuart:ye,easeInQuint:be,easeOutQuint:Pe,easeInOutQuint:Ce},Ni=function(i){typeof i=="number"&&cancelAnimationFrame(i)},F=function(i){i.mounted&&(Ni(i.animation),i.animate=!1,i.animation=null,i.velocity=null)};function Mi(i,t,e,n){if(i.mounted){var r=new Date().getTime(),a=1;F(i),i.animation=function(){if(!i.mounted)return Ni(i.animation);var o=new Date().getTime()-r,s=o/e,l=ki[t],d=l(s);o>=e?(n(a),i.animation=null):i.animation&&(n(d),requestAnimationFrame(i.animation))},requestAnimationFrame(i.animation)}}function Te(i){var t=i.scale,e=i.positionX,n=i.positionY;return!(Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(n))}function G(i,t,e,n){var r=Te(t);if(!(!i.mounted||!r)){var a=i.setTransformState,o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY,u=t.scale-s,p=t.positionX-l,f=t.positionY-d;e===0?a(t.scale,t.positionX,t.positionY):Mi(i,n,e,function(v){var h=s+u*v,g=l+p*v,b=d+f*v;a(h,g,b)})}}function Ye(i,t,e){var n=i.offsetWidth,r=i.offsetHeight,a=t.offsetWidth,o=t.offsetHeight,s=a*e,l=o*e,d=n-s,u=r-l;return{wrapperWidth:n,wrapperHeight:r,newContentWidth:s,newDiffWidth:d,newContentHeight:l,newDiffHeight:u}}var Xe=function(i,t,e,n,r,a,o){var s=i>t?e*(o?1:.5):0,l=n>r?a*(o?1:.5):0,d=i-t-s,u=s,p=n-r-l,f=l;return{minPositionX:d,maxPositionX:u,minPositionY:p,maxPositionY:f}},wi=function(i,t){var e=i.wrapperComponent,n=i.contentComponent,r=i.setup.centerZoomedOut;if(!e||!n)throw new Error("Components are not mounted");var a=Ye(e,n,t),o=a.wrapperWidth,s=a.wrapperHeight,l=a.newContentWidth,d=a.newDiffWidth,u=a.newContentHeight,p=a.newDiffHeight,f=Xe(o,l,d,s,u,p,!!r);return f},ci=function(i,t,e,n){return n?i<t?L(t,2):i>e?L(e,2):L(i,2):L(i,2)},J=function(i,t){var e=wi(i,t);return i.bounds=e,e};function ri(i,t,e,n,r,a,o){var s=e.minPositionX,l=e.minPositionY,d=e.maxPositionX,u=e.maxPositionY,p=0,f=0;o&&(p=r,f=a);var v=ci(i,s-p,d+p,n),h=ci(t,l-f,u+f,n);return{x:v,y:h}}function pi(i,t,e,n,r,a){var o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY,u=n-s;if(typeof t!="number"||typeof e!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:d};var p=l-t*u,f=d-e*u,v=ri(p,f,r,a,0,0,null);return v}function ai(i,t,e,n,r){var a=r?n:0,o=t-a;return!Number.isNaN(e)&&i>=e?e:!Number.isNaN(t)&&i<=o?o:i}var Xi=function(i,t){var e=i.setup.panning.excluded,n=i.isInitialized,r=i.wrapperComponent,a=t.target,o="shadowRoot"in a&&"composedPath"in t,s=o?t.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(a),l=n&&a&&s;if(!l)return!1;var d=fi(a,e);return!d},_i=function(i){var t=i.isInitialized,e=i.isPanning,n=i.setup,r=n.panning.disabled,a=t&&e&&!r;return!!a},_e=function(i,t){var e=i.transformState,n=e.positionX,r=e.positionY;i.isPanning=!0;var a=t.clientX,o=t.clientY;i.startCoords={x:a-n,y:o-r}},ze=function(i,t){var e=t.touches,n=i.transformState,r=n.positionX,a=n.positionY;i.isPanning=!0;var o=e.length===1;if(o){var s=e[0].clientX,l=e[0].clientY;i.startCoords={x:s-r,y:l-a}}};function Ee(i){var t=i.transformState,e=t.positionX,n=t.positionY,r=t.scale,a=i.setup,o=a.disabled,s=a.limitToBounds,l=a.centerZoomedOut,d=i.wrapperComponent;if(!(o||!d||!i.bounds)){var u=i.bounds,p=u.maxPositionX,f=u.minPositionX,v=u.maxPositionY,h=u.minPositionY,g=e>p||e<f,b=n>v||n<h,z=e>p?d.offsetWidth:i.setup.minPositionX||0,S=n>v?d.offsetHeight:i.setup.minPositionY||0,X=pi(i,z,S,r,i.bounds,s||l),k=X.x,j=X.y;return{scale:r,positionX:g?k:e,positionY:b?j:n}}}function Li(i,t,e,n,r){var a=i.setup.limitToBounds,o=i.wrapperComponent,s=i.bounds,l=i.transformState,d=l.scale,u=l.positionX,p=l.positionY;if(!(o===null||s===null||t===u&&e===p)){var f=ri(t,e,s,a,n,r,o),v=f.x,h=f.y;i.setTransformState(d,v,h)}}var Ae=function(i,t,e){var n=i.startCoords,r=i.transformState,a=i.setup.panning,o=a.lockAxisX,s=a.lockAxisY,l=r.positionX,d=r.positionY;if(!n)return{x:l,y:d};var u=t-n.x,p=e-n.y,f=o?l:u,v=s?d:p;return{x:f,y:v}},$=function(i,t){var e=i.setup,n=i.transformState,r=n.scale,a=e.minScale,o=e.disablePadding;return t>0&&r>=a&&!o?t:0},xe=function(i){var t=i.mounted,e=i.setup,n=e.disabled,r=e.velocityAnimation,a=i.transformState.scale,o=r.disabled,s=!o||a>1||!n||t;return!!s},De=function(i){var t=i.mounted,e=i.velocity,n=i.bounds,r=i.setup,a=r.disabled,o=r.velocityAnimation,s=i.transformState.scale,l=o.disabled,d=!l||s>1||!a||t;return!(!d||!e||!n)};function We(i,t){var e=i.setup.velocityAnimation,n=e.equalToMove,r=e.animationTime,a=e.sensitivity;return n?r*t*a:r}function zi(i,t,e,n,r,a,o,s,l,d){if(r){if(t>o&&e>o){var u=o+(i-o)*d;return u>l?l:u<o?o:u}if(t<a&&e<a){var u=a+(i-a)*d;return u<s?s:u>a?a:u}}return n?t:ci(i,a,o,r)}function je(i,t){var e=1;return t?Math.min(e,i.offsetWidth/window.innerWidth):e}function Oe(i,t){var e=xe(i);if(e){var n=i.lastMousePosition,r=i.velocityTime,a=i.setup,o=i.wrapperComponent,s=a.velocityAnimation.equalToMove,l=Date.now();if(n&&r&&o){var d=je(o,s),u=t.x-n.x,p=t.y-n.y,f=u/d,v=p/d,h=l-r,g=u*u+p*p,b=Math.sqrt(g)/h;i.velocity={velocityX:f,velocityY:v,total:b}}i.lastMousePosition=t,i.velocityTime=l}}function Be(i){var t=i.velocity,e=i.bounds,n=i.setup,r=i.wrapperComponent,a=De(i);if(!(!a||!t||!e||!r)){var o=t.velocityX,s=t.velocityY,l=t.total,d=e.maxPositionX,u=e.minPositionX,p=e.maxPositionY,f=e.minPositionY,v=n.limitToBounds,h=n.alignmentAnimation,g=n.zoomAnimation,b=n.panning,z=b.lockAxisY,S=b.lockAxisX,X=g.animationType,k=h.sizeX,j=h.sizeY,Z=h.velocityAlignmentTime,N=Z,H=We(i,l),V=Math.max(H,N),E=$(i,k),R=$(i,j),K=E*r.offsetWidth/100,I=R*r.offsetHeight/100,ni=d+K,ii=u-K,B=p+I,ei=f-I,m=i.transformState,P=new Date().getTime();Mi(i,X,V,function(A){var w=i.transformState,y=w.scale,O=w.positionX,D=w.positionY,U=new Date().getTime()-P,oi=U/N,si=ki[h.animationType],C=1-si(Math.min(1,oi)),M=1-A,li=O+o*M,Ci=D+s*M,Ui=zi(li,m.positionX,O,S,v,u,d,ii,ni,C),Ji=zi(Ci,m.positionY,D,z,v,f,p,ei,B,C);(O!==li||D!==Ci)&&i.setTransformState(y,Ui,Ji)})}}function Ei(i,t){var e=i.transformState.scale;F(i),J(i,e),window.TouchEvent!==void 0&&t instanceof TouchEvent?ze(i,t):_e(i,t)}function yi(i,t){var e=i.transformState.scale,n=i.setup,r=n.minScale,a=n.alignmentAnimation,o=a.disabled,s=a.sizeX,l=a.sizeY,d=a.animationTime,u=a.animationType,p=o||e<r||!s&&!l;if(!p){var f=Ee(i);f&&G(i,f,t??d,u)}}function Ai(i,t,e){var n=i.startCoords,r=i.setup,a=r.alignmentAnimation,o=a.sizeX,s=a.sizeY;if(n){var l=Ae(i,t,e),d=l.x,u=l.y,p=$(i,o),f=$(i,s);Oe(i,{x:d,y:u}),Li(i,d,u,p,f)}}function ke(i){if(i.isPanning){var t=i.setup.panning.velocityDisabled,e=i.velocity,n=i.wrapperComponent,r=i.contentComponent;i.isPanning=!1,i.animate=!1,i.animation=null;var a=n==null?void 0:n.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),s=(a==null?void 0:a.width)||0,l=(a==null?void 0:a.height)||0,d=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,p=s<d||l<u,f=!t&&e&&(e==null?void 0:e.total)>.1&&p;f?Be(i):yi(i)}}function bi(i,t,e,n){var r=i.setup,a=r.minScale,o=r.maxScale,s=r.limitToBounds,l=ai(L(t,2),a,o,0,!1),d=J(i,l),u=pi(i,e,n,l,d,s),p=u.x,f=u.y;return{scale:l,positionX:p,positionY:f}}function Zi(i,t,e){var n=i.transformState.scale,r=i.wrapperComponent,a=i.setup,o=a.minScale,s=a.limitToBounds,l=a.zoomAnimation,d=l.disabled,u=l.animationTime,p=l.animationType,f=d||n>=o;if((n>=1||s)&&yi(i),!(f||!r||!i.mounted)){var v=t||r.offsetWidth/2,h=e||r.offsetHeight/2,g=bi(i,o,v,h);g&&G(i,g,u,p)}}var Q=function(){return Q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Q.apply(this,arguments)};function xi(i,t,e){if(e||arguments.length===2)for(var n=0,r=t.length,a;n<r;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return i.concat(a||Array.prototype.slice.call(t))}var ui={previousScale:1,scale:1,positionX:0,positionY:0},ti={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},hi={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Hi=function(i){var t,e,n,r;return{previousScale:(t=i.initialScale)!==null&&t!==void 0?t:ui.scale,scale:(e=i.initialScale)!==null&&e!==void 0?e:ui.scale,positionX:(n=i.initialPositionX)!==null&&n!==void 0?n:ui.positionX,positionY:(r=i.initialPositionY)!==null&&r!==void 0?r:ui.positionY}},Di=function(i){var t=Q({},ti);return Object.keys(i).forEach(function(e){var n=typeof i[e]<"u",r=typeof ti[e]<"u";if(r&&n){var a=Object.prototype.toString.call(ti[e]),o=a==="[object Object]",s=a==="[object Array]";o?t[e]=Q(Q({},ti[e]),i[e]):s?t[e]=xi(xi([],ti[e],!0),i[e],!0):t[e]=i[e]}}),t},Fi=function(i,t,e){var n=i.transformState.scale,r=i.wrapperComponent,a=i.setup,o=a.maxScale,s=a.minScale,l=a.zoomAnimation,d=a.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var p=d?n*Math.exp(t*e):n+t*e,f=ai(L(p,3),s,o,u,!1);return f};function Vi(i,t,e,n,r){var a=i.wrapperComponent,o=i.transformState,s=o.scale,l=o.positionX,d=o.positionY;if(!a)return console.error("No WrapperComponent found");var u=a.offsetWidth,p=a.offsetHeight,f=(u/2-l)/s,v=(p/2-d)/s,h=Fi(i,t,e),g=bi(i,h,f,v);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");G(i,g,n,r)}function Ri(i,t,e,n){var r=i.setup,a=i.wrapperComponent,o=r.limitToBounds,s=Hi(i.props),l=i.transformState,d=l.scale,u=l.positionX,p=l.positionY;if(a){var f=wi(i,s.scale),v=ri(s.positionX,s.positionY,f,o,0,0,a),h={scale:s.scale,positionX:v.x,positionY:v.y};d===s.scale&&u===s.positionX&&p===s.positionY||(n==null||n(),G(i,h,t,e))}}function Ne(i,t,e,n){var r=i.getBoundingClientRect(),a=t.getBoundingClientRect(),o=e.getBoundingClientRect(),s=a.x*n.scale,l=a.y*n.scale;return{x:(r.x-o.x+s)/n.scale,y:(r.y-o.y+l)/n.scale}}function Me(i,t,e){var n=i.wrapperComponent,r=i.contentComponent,a=i.transformState,o=i.setup,s=o.limitToBounds,l=o.minScale,d=o.maxScale;if(!n||!r)return a;var u=n.getBoundingClientRect(),p=t.getBoundingClientRect(),f=Ne(t,n,r,a),v=f.x,h=f.y,g=p.width/a.scale,b=p.height/a.scale,z=n.offsetWidth/g,S=n.offsetHeight/b,X=ai(e||Math.min(z,S),l,d,0,!1),k=(u.width-g*X)/2,j=(u.height-b*X)/2,Z=(u.left-v)*X+k,N=(u.top-h)*X+j,H=wi(i,X),V=ri(Z,N,H,s,0,0,n),E=V.x,R=V.y;return{positionX:E,positionY:R,scale:X}}var Le=function(i){return function(t,e,n){t===void 0&&(t=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Vi(i,1,t,e,n)}},Ze=function(i){return function(t,e,n){t===void 0&&(t=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Vi(i,-1,t,e,n)}},He=function(i){return function(t,e,n,r,a){r===void 0&&(r=300),a===void 0&&(a="easeOut");var o=i.transformState,s=o.positionX,l=o.positionY,d=o.scale,u=i.wrapperComponent,p=i.contentComponent,f=i.setup.disabled;if(!(f||!u||!p)){var v={positionX:Number.isNaN(t)?s:t,positionY:Number.isNaN(e)?l:e,scale:Number.isNaN(n)?d:n};G(i,v,r,a)}}},Fe=function(i){return function(t,e){t===void 0&&(t=200),e===void 0&&(e="easeOut"),Ri(i,t,e)}},Ve=function(i){return function(t,e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut");var r=i.transformState,a=i.wrapperComponent,o=i.contentComponent;if(a&&o){var s=Ki(t||r.scale,a,o);G(i,s,e,n)}}},Re=function(i){return function(t,e,n,r){n===void 0&&(n=600),r===void 0&&(r="easeOut"),F(i);var a=i.wrapperComponent,o=typeof t=="string"?document.getElementById(t):t;if(a&&o&&a.contains(o)){var s=Me(i,o,e);G(i,s,n,r)}}},gi=function(i){return{instance:i,zoomIn:Le(i),zoomOut:Ze(i),setTransform:He(i),resetTransform:Fe(i),centerView:Ve(i),zoomToElement:Re(i)}},Ke=function(i){return{instance:i,state:i.transformState}},T=function(i){var t={};return Object.assign(t,Ke(i)),Object.assign(t,gi(i)),t},vi=!1;function mi(){try{var i={get passive(){return vi=!0,!1}};return i}catch{return vi=!1,vi}}var di=".".concat(hi.wrapperClass),fi=function(i,t){return t.some(function(e){return i.matches("".concat(di," ").concat(e,", ").concat(di," .").concat(e,", ").concat(di," ").concat(e," *, ").concat(di," .").concat(e," *"))})},Si=function(i){i&&clearTimeout(i)},Qe=function(i,t,e){return"translate(".concat(i,"px, ").concat(t,"px) scale(").concat(e,")")},Ki=function(i,t,e){var n=e.offsetWidth*i,r=e.offsetHeight*i,a=(t.offsetWidth-n)/2,o=(t.offsetHeight-r)/2;return{scale:i,positionX:a,positionY:o}};function $e(i){return function(t){i.forEach(function(e){typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var qe=function(i,t){var e=i.setup.wheel,n=e.disabled,r=e.wheelDisabled,a=e.touchPadDisabled,o=e.excluded,s=i.isInitialized,l=i.isPanning,d=t.target,u=s&&!l&&!n&&d;if(!u||r&&!t.ctrlKey||a&&t.ctrlKey)return!1;var p=fi(d,o);return!p},Ge=function(i){return i?i.deltaY<0?1:-1:0};function Ue(i,t){var e=Ge(i),n=ue(t,e);return n}function Qi(i,t,e){var n=t.getBoundingClientRect(),r=0,a=0;if("clientX"in i)r=(i.clientX-n.left)/e,a=(i.clientY-n.top)/e;else{var o=i.touches[0];r=(o.clientX-n.left)/e,a=(o.clientY-n.top)/e}return(Number.isNaN(r)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:r,y:a}}var Je=function(i,t,e,n,r){var a=i.transformState.scale,o=i.wrapperComponent,s=i.setup,l=s.maxScale,d=s.minScale,u=s.zoomAnimation,p=s.disablePadding,f=u.size,v=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var h=a+t*e;if(r)return h;var g=n?!1:!v,b=ai(L(h,3),d,l,f,g&&!p);return b},Ie=function(i,t){var e=i.previousWheelEvent,n=i.transformState.scale,r=i.setup,a=r.maxScale,o=r.minScale;return e?n<a||n>o||Math.sign(e.deltaY)!==Math.sign(t.deltaY)||e.deltaY>0&&e.deltaY<t.deltaY||e.deltaY<0&&e.deltaY>t.deltaY||Math.sign(e.deltaY)!==Math.sign(t.deltaY):!1},en=function(i,t){var e=i.setup.pinch,n=e.disabled,r=e.excluded,a=i.isInitialized,o=t.target,s=a&&!n&&o;if(!s)return!1;var l=fi(o,r);return!l},nn=function(i){var t=i.setup.pinch.disabled,e=i.isInitialized,n=i.pinchStartDistance,r=e&&!t&&n;return!!r},tn=function(i,t,e){var n=e.getBoundingClientRect(),r=i.touches,a=L(r[0].clientX-n.left,5),o=L(r[0].clientY-n.top,5),s=L(r[1].clientX-n.left,5),l=L(r[1].clientY-n.top,5);return{x:(a+s)/2/t,y:(o+l)/2/t}},$i=function(i){return Math.sqrt(Math.pow(i.touches[0].pageX-i.touches[1].pageX,2)+Math.pow(i.touches[0].pageY-i.touches[1].pageY,2))},rn=function(i,t){var e=i.pinchStartScale,n=i.pinchStartDistance,r=i.setup,a=r.maxScale,o=r.minScale,s=r.zoomAnimation,l=r.disablePadding,d=s.size,u=s.disabled;if(!e||n===null||!t)throw new Error("Pinch touches distance was not provided");if(t<0)return i.transformState.scale;var p=t/n,f=p*e;return ai(L(f,2),o,a,d,!u&&!l)},an=160,on=100,sn=function(i,t){var e=i.props,n=e.onWheelStart,r=e.onZoomStart;i.wheelStopEventTimer||(F(i),_(T(i),t,n),_(T(i),t,r))},ln=function(i,t){var e=i.props,n=e.onWheel,r=e.onZoom,a=i.contentComponent,o=i.setup,s=i.transformState,l=s.scale,d=o.limitToBounds,u=o.centerZoomedOut,p=o.zoomAnimation,f=o.wheel,v=o.disablePadding,h=o.smooth,g=p.size,b=p.disabled,z=f.step,S=f.smoothStep;if(!a)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var X=Ue(t,null),k=h?S*Math.abs(t.deltaY):z,j=Je(i,X,k,!t.ctrlKey);if(l!==j){var Z=J(i,j),N=Qi(t,a,l),H=b||g===0||u||v,V=d&&H,E=pi(i,N.x,N.y,j,Z,V),R=E.x,K=E.y;i.previousWheelEvent=t,i.setTransformState(j,R,K),_(T(i),t,n),_(T(i),t,r)}},un=function(i,t){var e=i.props,n=e.onWheelStop,r=e.onZoomStop;Si(i.wheelAnimationTimer),i.wheelAnimationTimer=setTimeout(function(){i.mounted&&(Zi(i,t.x,t.y),i.wheelAnimationTimer=null)},on);var a=Ie(i,t);a&&(Si(i.wheelStopEventTimer),i.wheelStopEventTimer=setTimeout(function(){i.mounted&&(i.wheelStopEventTimer=null,_(T(i),t,n),_(T(i),t,r))},an))},qi=function(i){for(var t=0,e=0,n=0;n<2;n+=1)t+=i.touches[n].clientX,e+=i.touches[n].clientY;var r=t/2,a=e/2;return{x:r,y:a}},dn=function(i,t){var e=$i(t);i.pinchStartDistance=e,i.lastDistance=e,i.pinchStartScale=i.transformState.scale,i.isPanning=!1;var n=qi(t);i.pinchLastCenterX=n.x,i.pinchLastCenterY=n.y,F(i)},pn=function(i,t){var e=i.contentComponent,n=i.pinchStartDistance,r=i.wrapperComponent,a=i.transformState.scale,o=i.setup,s=o.limitToBounds,l=o.centerZoomedOut,d=o.zoomAnimation,u=o.alignmentAnimation,p=d.disabled,f=d.size;if(!(n===null||!e)){var v=tn(t,a,e);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var h=$i(t),g=rn(i,h),b=qi(t),z=b.x-(i.pinchLastCenterX||0),S=b.y-(i.pinchLastCenterY||0);if(!(g===a&&z===0&&S===0)){i.pinchLastCenterX=b.x,i.pinchLastCenterY=b.y;var X=J(i,g),k=p||f===0||l,j=s&&k,Z=pi(i,v.x,v.y,g,X,j),N=Z.x,H=Z.y;i.pinchMidpoint=v,i.lastDistance=h;var V=u.sizeX,E=u.sizeY,R=$(i,V),K=$(i,E),I=N+z,ni=H+S,ii=ri(I,ni,X,s,R,K,r),B=ii.x,ei=ii.y;i.setTransformState(g,B,ei)}}}},fn=function(i){var t=i.pinchMidpoint;i.velocity=null,i.lastDistance=null,i.pinchMidpoint=null,i.pinchStartScale=null,i.pinchStartDistance=null,Zi(i,t==null?void 0:t.x,t==null?void 0:t.y)},Gi=function(i,t){var e=i.props.onZoomStop,n=i.setup.doubleClick.animationTime;Si(i.doubleClickStopEventTimer),i.doubleClickStopEventTimer=setTimeout(function(){i.doubleClickStopEventTimer=null,_(T(i),t,e)},n)},vn=function(i,t){var e=i.props,n=e.onZoomStart,r=e.onZoom,a=i.setup.doubleClick,o=a.animationTime,s=a.animationType;_(T(i),t,n),Ri(i,o,s,function(){return _(T(i),t,r)}),Gi(i,t)};function mn(i,t){return i==="toggle"?t===1?1:-1:i==="zoomOut"?-1:1}function cn(i,t){var e=i.setup,n=i.doubleClickStopEventTimer,r=i.transformState,a=i.contentComponent,o=r.scale,s=i.props,l=s.onZoomStart,d=s.onZoom,u=e.doubleClick,p=u.disabled,f=u.mode,v=u.step,h=u.animationTime,g=u.animationType;if(!p&&!n){if(f==="reset")return vn(i,t);if(!a)return console.error("No ContentComponent found");var b=mn(f,i.transformState.scale),z=Fi(i,b,v);if(o!==z){_(T(i),t,l);var S=Qi(t,a,o),X=bi(i,z,S.x,S.y);if(!X)return console.error("Error during zoom event. New transformation state was not calculated.");_(T(i),t,d),G(i,X,h,g),Gi(i,t)}}}var hn=function(i,t){var e=i.isInitialized,n=i.setup,r=i.wrapperComponent,a=n.doubleClick,o=a.disabled,s=a.excluded,l=t.target,d=r==null?void 0:r.contains(l),u=e&&l&&d&&!o;if(!u)return!1;var p=fi(l,s);return!p},gn=function(){function i(t){var e=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){e.initializeWindowEvents()},this.unmount=function(){e.cleanupWindowEvents()},this.update=function(n){e.props=n,J(e,e.transformState.scale),e.setup=Di(n)},this.initializeWindowEvents=function(){var n,r,a=mi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;(r=e.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",e.onWheelPanning,a),s==null||s.addEventListener("mousedown",e.onPanningStart,a),s==null||s.addEventListener("mousemove",e.onPanning,a),s==null||s.addEventListener("mouseup",e.onPanningStop,a),o==null||o.addEventListener("mouseleave",e.clearPanning,a),s==null||s.addEventListener("keyup",e.setKeyUnPressed,a),s==null||s.addEventListener("keydown",e.setKeyPressed,a)},this.cleanupWindowEvents=function(){var n,r,a=mi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;s==null||s.removeEventListener("mousedown",e.onPanningStart,a),s==null||s.removeEventListener("mousemove",e.onPanning,a),s==null||s.removeEventListener("mouseup",e.onPanningStop,a),o==null||o.removeEventListener("mouseleave",e.clearPanning,a),s==null||s.removeEventListener("keyup",e.setKeyUnPressed,a),s==null||s.removeEventListener("keydown",e.setKeyPressed,a),document.removeEventListener("mouseleave",e.clearPanning,a),F(e),(r=e.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(n){var r=mi();n.addEventListener("wheel",e.onWheelZoom,r),n.addEventListener("dblclick",e.onDoubleClick,r),n.addEventListener("touchstart",e.onTouchPanningStart,r),n.addEventListener("touchmove",e.onTouchPanning,r),n.addEventListener("touchend",e.onTouchPanningStop,r)},this.handleInitialize=function(n,r){var a=!1,o=e.setup.centerOnInit,s=function(l,d){for(var u=0,p=l;u<p.length;u++){var f=p[u];if(f.target===d)return!0}return!1};e.applyTransformation(),e.onInitCallbacks.forEach(function(l){l(T(e))}),e.observer=new ResizeObserver(function(l){if(s(l,n)||s(l,r))if(o&&!a){var d=r.offsetWidth,u=r.offsetHeight;(d>0||u>0)&&(a=!0,e.setCenter())}else F(e),J(e,e.transformState.scale),yi(e,0)}),e.observer.observe(n),e.observer.observe(r)},this.onWheelZoom=function(n){var r=e.setup.disabled;if(!r){var a=qe(e,n);if(a){var o=e.isPressingKeys(e.setup.wheel.activationKeys);o&&(sn(e,n),ln(e,n),un(e,n))}}},this.onWheelPanning=function(n){var r=e.setup,a=r.disabled,o=r.wheel,s=r.panning;if(!(!e.wrapperComponent||!e.contentComponent||a||!o.wheelDisabled||s.disabled||!s.wheelPanning||n.ctrlKey)){n.preventDefault(),n.stopPropagation();var l=e.transformState,d=l.positionX,u=l.positionY,p=d-n.deltaX,f=u-n.deltaY,v=s.lockAxisX?d:p,h=s.lockAxisY?u:f,g=e.setup.alignmentAnimation,b=g.sizeX,z=g.sizeY,S=$(e,b),X=$(e,z);v===d&&h===u||Li(e,v,h,S,X)}},this.onPanningStart=function(n){var r=e.setup.disabled,a=e.props.onPanningStart;if(!r){var o=Xi(e,n);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.button===0&&!e.setup.panning.allowLeftClickPan||n.button===1&&!e.setup.panning.allowMiddleClickPan||n.button===2&&!e.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),F(e),Ei(e,n),_(T(e),n,a)))}}},this.onPanning=function(n){var r=e.setup.disabled,a=e.props.onPanning;if(!r){var o=_i(e);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.preventDefault(),n.stopPropagation(),Ai(e,n.clientX,n.clientY),_(T(e),n,a))}}},this.onPanningStop=function(n){var r=e.props.onPanningStop;e.isPanning&&(ke(e),_(T(e),n,r))},this.onPinchStart=function(n){var r=e.setup.disabled,a=e.props,o=a.onPinchingStart,s=a.onZoomStart;if(!r){var l=en(e,n);l&&(dn(e,n),F(e),_(T(e),n,o),_(T(e),n,s))}},this.onPinch=function(n){var r=e.setup.disabled,a=e.props,o=a.onPinching,s=a.onZoom;if(!r){var l=nn(e);l&&(n.preventDefault(),n.stopPropagation(),pn(e,n),_(T(e),n,o),_(T(e),n,s))}},this.onPinchStop=function(n){var r=e.props,a=r.onPinchingStop,o=r.onZoomStop;e.pinchStartScale&&(fn(e),_(T(e),n,a),_(T(e),n,o))},this.onTouchPanningStart=function(n){var r=e.setup.disabled,a=e.props.onPanningStart;if(!r){var o=Xi(e,n);if(o){var s=e.lastTouch&&+new Date-e.lastTouch<200&&n.touches.length===1;if(!s){e.lastTouch=+new Date,F(e);var l=n.touches,d=l.length===1,u=l.length===2;d&&(F(e),Ei(e,n),_(T(e),n,a)),u&&e.onPinchStart(n)}}}},this.onTouchPanning=function(n){var r=e.setup.disabled,a=e.props.onPanning;if(e.isPanning&&n.touches.length===1){if(r)return;var o=_i(e);if(!o)return;n.preventDefault(),n.stopPropagation();var s=n.touches[0];Ai(e,s.clientX,s.clientY),_(T(e),n,a)}else n.touches.length>1&&e.onPinch(n)},this.onTouchPanningStop=function(n){e.onPanningStop(n),e.onPinchStop(n)},this.onDoubleClick=function(n){var r=e.setup.disabled;if(!r){var a=hn(e,n);a&&cn(e,n)}},this.clearPanning=function(n){e.isPanning&&e.onPanningStop(n)},this.setKeyPressed=function(n){e.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){e.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(r){return e.pressedKeys[r]}):!0},this.setTransformState=function(n,r,a){var o=e.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(r)&&!Number.isNaN(a)){n!==e.transformState.scale&&(e.transformState.previousScale=e.transformState.scale,e.transformState.scale=n),e.transformState.positionX=r,e.transformState.positionY=a,e.applyTransformation();var s=T(e);e.onChangeCallbacks.forEach(function(l){return l(s)}),_(s,{scale:n,positionX:r,positionY:a},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(e.wrapperComponent&&e.contentComponent){var n=Ki(e.transformState.scale,e.wrapperComponent,e.contentComponent);e.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,r,a){return e.props.customTransform?e.props.customTransform(n,r,a):Qe(n,r,a)},this.applyTransformation=function(){if(!(!e.mounted||!e.contentComponent)){var n=e.transformState,r=n.scale,a=n.positionX,o=n.positionY,s=e.handleTransformStyles(a,o,r);e.contentComponent.style.transform=s}},this.getContext=function(){return T(e)},this.onChange=function(n){return e.onChangeCallbacks.has(n)||e.onChangeCallbacks.add(n),function(){e.onChangeCallbacks.delete(n)}},this.onInit=function(n){return e.onInitCallbacks.has(n)||e.onInitCallbacks.add(n),function(){e.onInitCallbacks.delete(n)}},this.init=function(n,r){e.cleanupWindowEvents(),e.wrapperComponent=n,e.contentComponent=r,J(e,e.transformState.scale),e.handleInitializeWrapperEvents(n),e.handleInitialize(n,r),e.initializeWindowEvents(),e.isInitialized=!0;var a=T(e);_(a,void 0,e.props.onInit)},this.props=t,this.setup=Di(this.props),this.transformState=Hi(this.props)}return i}(),Pi=W.createContext(null),Sn=function(i,t){return typeof i=="function"?i(t):i},wn=W.forwardRef(function(i,t){var e=Y.useRef(new gn(i)).current,n=Sn(i.children,gi(e));return Y.useImperativeHandle(t,function(){return gi(e)},[e]),Y.useEffect(function(){e.update(i)},[e,i]),W.createElement(Pi.Provider,{value:e},n)});W.forwardRef(function(i,t){var e=Y.useRef(null),n=Y.useContext(Pi);return Y.useEffect(function(){return n.onChange(function(r){if(e.current){var a=0,o=0;e.current.style.transform=n.handleTransformStyles(a,o,1/r.instance.transformState.scale)}})},[n]),W.createElement("div",Q({},i,{ref:$e([e,t])}))});function yn(i,t){t===void 0&&(t={});var e=t.insertAt;if(!(!i||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}var bn=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Wi={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};yn(bn);var Pn=function(i){var t=i.children,e=i.wrapperClass,n=e===void 0?"":e,r=i.contentClass,a=r===void 0?"":r,o=i.wrapperStyle,s=i.contentStyle,l=i.wrapperProps,d=l===void 0?{}:l,u=i.contentProps,p=u===void 0?{}:u,f=Y.useContext(Pi),v=f.init,h=f.cleanupWindowEvents,g=Y.useRef(null),b=Y.useRef(null);return Y.useEffect(function(){var z=g.current,S=b.current;return z!==null&&S!==null&&v&&(v==null||v(z,S)),function(){h==null||h()}},[]),W.createElement("div",Q({},d,{ref:g,className:"".concat(hi.wrapperClass," ").concat(Wi.wrapper," ").concat(n),style:o}),W.createElement("div",Q({},p,{ref:b,className:"".concat(hi.contentClass," ").concat(Wi.content," ").concat(a),style:s}),t))};const Cn=x("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),Tn=x("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"205px",h:"70px",textTransform:"capitalize",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",gap:"5px",justify:"center",color:"#828282"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),Yn=x("div",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",mt:"10px",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%"}),Xn=x("div",{d:"grid",gap:"10px",gridTemplateAreas:`
    "filters destination"
    "team team"
  `,px:"20px",pb:"10px",w:"100%","@sm":{}}),_n=x("div",{d:"flex",gridArea:"filters",gap:"10px"}),zn=x("div",{d:"flex",align:"center",justify:"flex-end",gridArea:"destination",gap:"2px"}),En=x("div",{d:"flex",bg:"rgba(255, 225, 225, 0.05)",padding:"2px 3px",img:{w:"40px"},variants:{disabled:{true:{opacity:.7,filter:"grayscale(100%)"}}}});x("div",{d:"block",gridArea:"destination",w:"max-content",ml:"auto",p:{textAlign:"right",fs:"24px",ff:"$heading",color:"#fff",textTransform:"capitalize","&:not(:first-child)":{fs:"14px"}},"@sm":{p:{fs:"14px","&:not(:first-child)":{fs:"10px",color:"#8A8A8A"}}}});x("div",{d:"flex",gridArea:"team",w:"max-content",ml:"auto",">div":{ml:"5px","&:nth-child(3)":{ml:"25px"}},"@sm":{}});x("div",{d:"flex",align:"center",gap:"5px",direction:"column",img:{w:"35px",h:"35px"},span:{fs:"12px",ff:"$heading",color:"#A6A6A6"},"@sm":{}});const An=x("div",{d:"flex",w:"100%",px:"10px",".react-transform-wrapper":{maxH:"calc(100vh - 250px)"},"@sm":{".react-transform-wrapper":{maxH:"calc(100vh - 190px)"}},"@media (max-width: 768px) and (max-height: 500px)":{".react-transform-wrapper":{maxH:"calc(100vh)"}}}),xn=x("div",{d:"flex",w:"1920px",h:"1080px",position:"relative",img:{w:"1920px",h:"1080px"}}),Dn=x("button",{d:"flex",align:"center",justify:"center",position:"absolute",border:"1px solid rgba(0,0,0,0.6)",zIndex:1,w:"calc(100% / 40)",h:"calc(100% / 20)",svg:{w:"20px",h:"20px"},variants:{isSelected:{true:{bg:"rgba(0, 186, 255, 0.58)"}},type:{miningEvent:{zIndex:2},portal:{zIndex:2}}}});x("div",{d:"flex",align:"center",flexWrap:"wrap",gap:"20px",mt:"10px",pl:"20px",w:"100%"});x("div",{d:"flex",align:"center",justify:"center",gap:"5px",color:"#fff",ff:"$heading",fs:"10px",svg:{w:"17px",h:"17px"},"&:nth-child(1)":{fill:"#80FF00"},"&:nth-child(2)":{fill:"#EB094D"},"&:nth-child(3)":{fill:"#FFB800"}});const Wn=x("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,img:{w:"35px",h:"35px"},span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",textTransform:"capitalize",padding:"2px 5px",bg:"#333333",color:"#fff",ff:"$heading",fs:"10px",br:"5px"}}),jn=x("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fw:900,ff:"$heading",fs:"16px",br:"5px","-webkit-text-stroke":"1px #000"}}),On=i=>{const t=new Date(new Date().toUTCString().substring(0,25)),e=+i-+t;let n={days:0,hours:0,minutes:0,seconds:0};return e>0&&(n={days:Math.floor(e/(1e3*60*60)/24),hours:Math.floor(e/(1e3*60*60)%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}),{...n,difference:e}},Bn=i=>{if(i&&((i==null?void 0:i.seconds)>0||(i==null?void 0:i.minutes)>0||(i==null?void 0:i.hours)>0)){const t=i.hours>0?`${i.hours>9?`${i.hours}:`:`0${i.hours}:`}`:"",e=i.minutes>0?`${i.minutes>9?i.minutes:`0${i.minutes}`}`:"00",n=i.seconds>9?i.seconds:`0${i.seconds}`;return`${t}${e}:${n}`}return"MINE"};async function kn(i,t,e){const{executeTransaction:n}=re(),r=Nn(i,t,e);return!!await n(r)}function Nn(i,t,e){return{actions:[{account:Ii.playersAle,name:"travel",authorization:[{actor:i.name,permission:i.authorization.permission}],data:{wallet:i.name,x:t,y:e}}]}}const Mn=ie((i,t)=>({areaSelected:null,setAreaSelected:e=>i({areaSelected:e})})),Ln=i=>oe({queryKey:[ee.playerDataState,i],queryFn:()=>Zn(i),staleTime:1e3*60*20,enabled:!!Bi.getState().user});async function Zn(i){try{const t=await ne(i);return t||null}catch(t){return console.log(t),null}}const ji=W.lazy(()=>q(()=>import("./index-4a690c72.js"),["assets/index-4a690c72.js","assets/index-3ef2c8a4.js","assets/index-55fec1ff.css"])),Oi=W.lazy(()=>q(()=>import("./index-204349e4.js"),["assets/index-204349e4.js","assets/index-3ef2c8a4.js","assets/index-55fec1ff.css","assets/index-25272c67.js","assets/iconBase-96ca7b0b.js"])),Hn=W.lazy(()=>q(()=>import("./box-gloves-34f486ea.js"),["assets/box-gloves-34f486ea.js","assets/index-3ef2c8a4.js","assets/index-55fec1ff.css"])),Fn=W.lazy(()=>q(()=>import("./travel-arrow-7105d6a7.js"),["assets/travel-arrow-7105d6a7.js","assets/index-3ef2c8a4.js","assets/index-55fec1ff.css"]));W.lazy(()=>q(()=>import("./portal-7995cdad.js"),["assets/portal-7995cdad.js","assets/index-3ef2c8a4.js","assets/index-55fec1ff.css"]));const Vn=W.lazy(()=>q(()=>import("./index-75c08abb.js"),["assets/index-75c08abb.js","assets/index-3ef2c8a4.js","assets/index-55fec1ff.css"])),Rn=W.lazy(()=>q(()=>import("./index-6a87a3d6.js"),["assets/index-6a87a3d6.js","assets/index-3ef2c8a4.js","assets/index-55fec1ff.css","assets/inventory-query-03907467.js","assets/useQuery-47f5a8b1.js","assets/atomic-api-46ebcc3d.js","assets/toast-options-72940f32.js","assets/use-transaction-05983c75.js","assets/sleep-da79c358.js","assets/index-d28090f1.js","assets/use-media-5328fe24.js","assets/constants-1c8f422b.js"])),Kn=W.lazy(()=>q(()=>import("./index-1f8985df.js"),["assets/index-1f8985df.js","assets/index-3ef2c8a4.js","assets/index-55fec1ff.css","assets/index-093e9150.js","assets/index-d28090f1.js","assets/use-media-5328fe24.js","assets/use-transaction-05983c75.js","assets/toast-options-72940f32.js","assets/sleep-da79c358.js","assets/useQuery-47f5a8b1.js","assets/constants-1c8f422b.js"])),Qn=()=>{var ei;const{areaSelected:i,setAreaSelected:t}=Mn(),{user:e,updatePlayerData:n,updateLandsData:r}=Bi(),a=Y.useRef(null),[o,s]=Y.useState([]),[l,d]=Y.useState([]),[u,p]=Y.useState(null),[f,v]=Y.useState(8),[h,g]=Y.useState(0),[b,z]=Y.useState(!1),[S,X]=Y.useState({label:e!=null&&e.planet?e.planet.charAt(0).toUpperCase()+e.planet.slice(1):"",value:(e==null?void 0:e.planet)||""}),[k,j]=Y.useState([]),[Z,N]=Y.useState(k),[H,V]=Y.useState([]),{data:E}=Ln((S==null?void 0:S.value)||""),R=Y.useCallback(()=>{var D,U,oi,si;if(!e)return null;const m=((D=E==null?void 0:E.filter(C=>!!C.special_effect))==null?void 0:D.map(C=>({x:C.x-1,y:C.y-1,type:"portal",text:C.special_effect.slice(2,1/0)})))||[],P=((U=[...e.active_taverns,e.last_tavern].filter(C=>C.planet===(S==null?void 0:S.value)))==null?void 0:U.map(C=>({x:C.x-1,y:C.y-1,type:"tavern"})))||[],A=((oi=E==null?void 0:E.filter(C=>C.buildings.some(M=>M.building_name==="dungeon")))==null?void 0:oi.map(C=>({x:C.x-1,y:C.y-1,type:"dungeon"})))||[],w=[...m,...P,...A],y=w.reduce((C,M)=>(C.some(({value:li})=>li===M.type)||C.push({label:M.type.charAt(0).toUpperCase()+M.type.slice(1),value:M.type}),C),[]),O=(si=(E==null?void 0:E.filter(C=>{var M;return!!((M=C.buildings)!=null&&M.length)}))||[])==null?void 0:si.flatMap(C=>C.buildings);V(O),j(y),N(y),d(w)},[e,E,S]);Y.useEffect(()=>{const A=1920/Ti,w=1080/Yi,y=[];for(let O=0;O<Ti;O++){y[O]=[];for(let D=0;D<Yi;D++)y[O][D]={x:O*A,y:D*w}}s(y),R()},[R]);function K(m,P){switch(P){case"arena":return c.jsxs("svg",{fill:"rgba(235, 9, 77, 0.67)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"dungeon":return c.jsx("div",{children:c.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{width:"17.6777",height:"17.6777",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 0 12.5)",fill:"rgba(0, 184, 251, 1)"}),c.jsx("rect",{width:"12.8565",height:"12.8565",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 3.37476 12.5)",fill:"#141423"}),c.jsx("rect",{width:"8.03534",height:"8.03534",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 6.83008 12.5)",fill:"rgba(0, 184, 251, 1)"})]})});case"youControl":return c.jsxs("svg",{fill:"rgba(173, 255, 0, 0.65)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"miningEvent":return c.jsxs(jn,{children:[c.jsx("span",{children:m}),c.jsxs("svg",{fill:"#FFB800",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490 490",children:[c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m}),c.jsx("polygon",{points:"245,456.701 490,33.299 0,33.299 "})]})]});case"portal":return c.jsxs(Wn,{children:[c.jsx("span",{children:m}),c.jsx("img",{loading:"lazy",src:"./assets/maps/portal.webp",alt:"portal"})]});case"flag":return c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999,width:"14px",height:"14px"},children:[c.jsx("circle",{cx:"11",cy:"11",r:"11",fill:"#DB4447"}),c.jsx("circle",{cx:"11",cy:"11",r:"9",fill:"#141423"}),c.jsx("circle",{cx:"11",cy:"11",r:"7",fill:"#DB4447"})]});case"tavern":return c.jsx("div",{children:c.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{width:"17.6777",height:"17.6777",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 0 12.5)",fill:"#FFB800"}),c.jsx("rect",{width:"12.8565",height:"12.8565",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 3.37476 12.5)",fill:"#141423"}),c.jsx("rect",{width:"8.03534",height:"8.03534",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 6.83008 12.5)",fill:"#FFB800"})]})});default:return null}}function I(m){if(!e)return;if((u==null?void 0:u.x)===m.clientX&&(u==null?void 0:u.y)===m.clientY){p(null);return}if(p({x:m.clientX,y:m.clientY,type:m.type}),e.mapX===m.clientX&&e.mapY===m.clientY){g(0);return}const P=Math.sqrt(Math.pow(e.mapX-m.clientX,2)+Math.pow(e.mapY-m.clientY,2)),A=Math.ceil(P);g(A)}function ni(){if(!e)return;const m={x:e.x,y:e.y,type:(B==null?void 0:B.type)||""};if(console.log({x:e.x,y:e.y,type:(B==null?void 0:B.type)||""}),m.type==="tavern"){const P=(e==null?void 0:e.active_taverns.find(({x:A,y:w})=>A===m.x&&w===m.y))||((e==null?void 0:e.last_tavern.x)===m.x&&(e==null?void 0:e.last_tavern.y)===m.y?e==null?void 0:e.last_tavern:{});t({...m,...P});return}t({...m,...i})}async function ii(){try{if(z(!0),!e||!u||!await kn(e,(u==null?void 0:u.x)+1||0,(u==null?void 0:u.y)+1||0))return;await ae(2e3),p(null),g(0);const P=await n();await r(),P!=null&&P.planet&&X({label:P.planet.charAt(0).toUpperCase()+P.planet.slice(1),value:P.planet}),te.success("Travel successful")}catch(m){console.error(m)}finally{z(!1)}}const B=Y.useMemo(()=>l.find(({x:m,y:P})=>(e==null?void 0:e.mapX)===m&&(e==null?void 0:e.mapY)===P),[l,e]);return Y.useEffect(()=>{const m=setInterval(()=>{var A;const P=(A=l==null?void 0:l.filter(w=>(w==null?void 0:w.formattedTimeLeft)!=="MINE"))==null?void 0:A.map(w=>{if(w.type==="miningEvent"&&(w==null?void 0:w.formattedTimeLeft)!=="MINE"&&(w!=null&&w.expirationDate)){const y=On(w==null?void 0:w.expirationDate);return{...w,formattedTimeLeft:Bn(y),mineTime:y}}return w});d(P)},1e3);return()=>clearInterval(m)},[l]),(i==null?void 0:i.type)==="arena"?c.jsx(Vn,{}):(i==null?void 0:i.type)==="tavern"?c.jsx(Rn,{}):(i==null?void 0:i.type)==="dungeon"?c.jsx(Kn,{}):c.jsxs(Cn,{children:[c.jsxs(Tn,{children:[l.some(({x:m,y:P})=>(e==null?void 0:e.mapX)===m&&(e==null?void 0:e.mapY)===P)&&c.jsx(ji,{color:"black",onClick:ni,icon:Hn,children:`Enter ${B==null?void 0:B.type}`}),c.jsxs(ji,{isLoading:b,disabled:S.value!==(e==null?void 0:e.planet)||!u||!h||h>(((ei=e==null?void 0:e.activestats)==null?void 0:ei.action_points)||0)||b,color:"black",onClick:ii,icon:Fn,children:["Travel",S.value===(e==null?void 0:e.planet)&&c.jsxs("span",{children:["- ",h,c.jsx("img",{loading:"lazy",src:"/assets/icons/potion.png",alt:""})]})]})]}),c.jsxs(Yn,{ref:a,children:[c.jsxs(Xn,{children:[c.jsxs(_n,{children:[c.jsx(Oi,{options:se,selected:S,onSelected:m=>X(m)}),c.jsx(Oi,{title:"Select a filter",onMultipleSelected:m=>N(m),isMultipleItems:!0,multiplesSelected:Z,options:k})]}),c.jsx(zn,{children:le.map((m,P)=>c.jsx(En,{disabled:!(H!=null&&H.some(A=>A.building_name===m.name.toLowerCase())),children:c.jsx("img",{loading:"lazy",src:`/assets/buildings/${m.img}.png`,alt:m.name,title:m.name})},P))})]}),(e==null?void 0:e.playerLand)&&c.jsx(An,{children:c.jsx(wn,{disablePadding:!0,initialScale:1,maxScale:2,doubleClick:{step:f},onPanningStop:m=>{m.state.scale!==1?v(-8):v(8)},children:c.jsx(Pn,{children:c.jsxs(xn,{children:[c.jsx("img",{loading:"lazy",src:`/assets/maps/${S==null?void 0:S.value}.jpg`,alt:""}),o.map((m,P)=>m.map((A,w)=>{var O;const y=(O=l==null?void 0:l.filter(D=>Z.some(U=>U.value!=="mixed"?U.value===D.type:!0)))==null?void 0:O.find(D=>D.x===P&&D.y===w);return c.jsxs(Dn,{onClick:()=>I({clientX:P,clientY:w,type:(y==null?void 0:y.type)||""}),isSelected:(u==null?void 0:u.x)===P&&(u==null?void 0:u.y)===w,type:(y==null?void 0:y.type)||"empty",style:{top:A.y,left:A.x},children:[!!y&&K((y==null?void 0:y.formattedTimeLeft)||(y==null?void 0:y.number)||(y==null?void 0:y.text)||"",(y==null?void 0:y.type)||""),e.planet===S.value&&e.mapX===P&&e.mapY===w&&K("","flag")]},A.x+A.y)}))]})})})})]})]})},In=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));export{In as i,Mn as u};

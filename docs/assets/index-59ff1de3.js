import{R as W,r as Y,s as E,S as Ji,c as Ii,Q as ie,u as Oi,g as ee,_ as U,j as c,a as ne}from"./index-4e18439f.js";import{u as re}from"./use-transaction-7a47cee6.js";import{s as te}from"./sleep-da79c358.js";import{u as ae}from"./useQuery-903c3c38.js";var O=function(i,r){return Number(i.toFixed(r))},oe=function(i,r){return typeof i=="number"?i:r},X=function(i,r,e){e&&typeof e=="function"&&e(i,r)},se=function(i){return-Math.cos(i*Math.PI)/2+.5},le=function(i){return i},ue=function(i){return i*i},de=function(i){return i*(2-i)},pe=function(i){return i<.5?2*i*i:-1+(4-2*i)*i},fe=function(i){return i*i*i},ve=function(i){return--i*i*i+1},me=function(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},ce=function(i){return i*i*i*i},he=function(i){return 1- --i*i*i*i},ge=function(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},Se=function(i){return i*i*i*i*i},ye=function(i){return 1+--i*i*i*i*i},we=function(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i},ji={easeOut:se,linear:le,easeInQuad:ue,easeOutQuad:de,easeInOutQuad:pe,easeInCubic:fe,easeOutCubic:ve,easeInOutCubic:me,easeInQuart:ce,easeOutQuart:he,easeInOutQuart:ge,easeInQuint:Se,easeOutQuint:ye,easeInOutQuint:we},ki=function(i){typeof i=="number"&&cancelAnimationFrame(i)},H=function(i){i.mounted&&(ki(i.animation),i.animate=!1,i.animation=null,i.velocity=null)};function Bi(i,r,e,n){if(i.mounted){var t=new Date().getTime(),a=1;H(i),i.animation=function(){if(!i.mounted)return ki(i.animation);var o=new Date().getTime()-t,s=o/e,u=ji[r],d=u(s);o>=e?(n(a),i.animation=null):i.animation&&(n(d),requestAnimationFrame(i.animation))},requestAnimationFrame(i.animation)}}function be(i){var r=i.scale,e=i.positionX,n=i.positionY;return!(Number.isNaN(r)||Number.isNaN(e)||Number.isNaN(n))}function $(i,r,e,n){var t=be(r);if(!(!i.mounted||!t)){var a=i.setTransformState,o=i.transformState,s=o.scale,u=o.positionX,d=o.positionY,l=r.scale-s,p=r.positionX-u,f=r.positionY-d;e===0?a(r.scale,r.positionX,r.positionY):Bi(i,n,e,function(v){var h=s+l*v,g=u+p*v,P=d+f*v;a(h,g,P)})}}function Pe(i,r,e){var n=i.offsetWidth,t=i.offsetHeight,a=r.offsetWidth,o=r.offsetHeight,s=a*e,u=o*e,d=n-s,l=t-u;return{wrapperWidth:n,wrapperHeight:t,newContentWidth:s,newDiffWidth:d,newContentHeight:u,newDiffHeight:l}}var Ce=function(i,r,e,n,t,a,o){var s=i>r?e*(o?1:.5):0,u=n>t?a*(o?1:.5):0,d=i-r-s,l=s,p=n-t-u,f=u;return{minPositionX:d,maxPositionX:l,minPositionY:p,maxPositionY:f}},gi=function(i,r){var e=i.wrapperComponent,n=i.contentComponent,t=i.setup.centerZoomedOut;if(!e||!n)throw new Error("Components are not mounted");var a=Pe(e,n,r),o=a.wrapperWidth,s=a.wrapperHeight,u=a.newContentWidth,d=a.newDiffWidth,l=a.newContentHeight,p=a.newDiffHeight,f=Ce(o,u,d,s,l,p,!!t);return f},vi=function(i,r,e,n){return n?i<r?O(r,2):i>e?O(e,2):O(i,2):O(i,2)},ii=function(i,r){var e=gi(i,r);return i.bounds=e,e};function ri(i,r,e,n,t,a,o){var s=e.minPositionX,u=e.minPositionY,d=e.maxPositionX,l=e.maxPositionY,p=0,f=0;o&&(p=t,f=a);var v=vi(i,s-p,d+p,n),h=vi(r,u-f,l+f,n);return{x:v,y:h}}function ui(i,r,e,n,t,a){var o=i.transformState,s=o.scale,u=o.positionX,d=o.positionY,l=n-s;if(typeof r!="number"||typeof e!="number")return console.error("Mouse X and Y position were not provided!"),{x:u,y:d};var p=u-r*l,f=d-e*l,v=ri(p,f,t,a,0,0,null);return v}function ti(i,r,e,n,t){var a=t?n:0,o=r-a;return!Number.isNaN(e)&&i>=e?e:!Number.isNaN(r)&&i<=o?o:i}var Ci=function(i,r){var e=i.setup.panning.excluded,n=i.isInitialized,t=i.wrapperComponent,a=r.target,o="shadowRoot"in a&&"composedPath"in r,s=o?r.composedPath().some(function(l){return l instanceof Element?t==null?void 0:t.contains(l):!1}):t==null?void 0:t.contains(a),u=n&&a&&s;if(!u)return!1;var d=di(a,e);return!d},Ti=function(i){var r=i.isInitialized,e=i.isPanning,n=i.setup,t=n.panning.disabled,a=r&&e&&!t;return!!a},Te=function(i,r){var e=i.transformState,n=e.positionX,t=e.positionY;i.isPanning=!0;var a=r.clientX,o=r.clientY;i.startCoords={x:a-n,y:o-t}},Ye=function(i,r){var e=r.touches,n=i.transformState,t=n.positionX,a=n.positionY;i.isPanning=!0;var o=e.length===1;if(o){var s=e[0].clientX,u=e[0].clientY;i.startCoords={x:s-t,y:u-a}}};function Xe(i){var r=i.transformState,e=r.positionX,n=r.positionY,t=r.scale,a=i.setup,o=a.disabled,s=a.limitToBounds,u=a.centerZoomedOut,d=i.wrapperComponent;if(!(o||!d||!i.bounds)){var l=i.bounds,p=l.maxPositionX,f=l.minPositionX,v=l.maxPositionY,h=l.minPositionY,g=e>p||e<f,P=n>v||n<h,_=e>p?d.offsetWidth:i.setup.minPositionX||0,b=n>v?d.offsetHeight:i.setup.minPositionY||0,T=ui(i,_,b,t,i.bounds,s||u),j=T.x,D=T.y;return{scale:t,positionX:g?j:e,positionY:P?D:n}}}function Ni(i,r,e,n,t){var a=i.setup.limitToBounds,o=i.wrapperComponent,s=i.bounds,u=i.transformState,d=u.scale,l=u.positionX,p=u.positionY;if(!(o===null||s===null||r===l&&e===p)){var f=ri(r,e,s,a,n,t,o),v=f.x,h=f.y;i.setTransformState(d,v,h)}}var _e=function(i,r,e){var n=i.startCoords,t=i.transformState,a=i.setup.panning,o=a.lockAxisX,s=a.lockAxisY,u=t.positionX,d=t.positionY;if(!n)return{x:u,y:d};var l=r-n.x,p=e-n.y,f=o?u:l,v=s?d:p;return{x:f,y:v}},Q=function(i,r){var e=i.setup,n=i.transformState,t=n.scale,a=e.minScale,o=e.disablePadding;return r>0&&t>=a&&!o?r:0},Ae=function(i){var r=i.mounted,e=i.setup,n=e.disabled,t=e.velocityAnimation,a=i.transformState.scale,o=t.disabled,s=!o||a>1||!n||r;return!!s},ze=function(i){var r=i.mounted,e=i.velocity,n=i.bounds,t=i.setup,a=t.disabled,o=t.velocityAnimation,s=i.transformState.scale,u=o.disabled,d=!u||s>1||!a||r;return!(!d||!e||!n)};function Ee(i,r){var e=i.setup.velocityAnimation,n=e.equalToMove,t=e.animationTime,a=e.sensitivity;return n?t*r*a:t}function Yi(i,r,e,n,t,a,o,s,u,d){if(t){if(r>o&&e>o){var l=o+(i-o)*d;return l>u?u:l<o?o:l}if(r<a&&e<a){var l=a+(i-a)*d;return l<s?s:l>a?a:l}}return n?r:vi(i,a,o,t)}function xe(i,r){var e=1;return r?Math.min(e,i.offsetWidth/window.innerWidth):e}function De(i,r){var e=Ae(i);if(e){var n=i.lastMousePosition,t=i.velocityTime,a=i.setup,o=i.wrapperComponent,s=a.velocityAnimation.equalToMove,u=Date.now();if(n&&t&&o){var d=xe(o,s),l=r.x-n.x,p=r.y-n.y,f=l/d,v=p/d,h=u-t,g=l*l+p*p,P=Math.sqrt(g)/h;i.velocity={velocityX:f,velocityY:v,total:P}}i.lastMousePosition=r,i.velocityTime=u}}function We(i){var r=i.velocity,e=i.bounds,n=i.setup,t=i.wrapperComponent,a=ze(i);if(!(!a||!r||!e||!t)){var o=r.velocityX,s=r.velocityY,u=r.total,d=e.maxPositionX,l=e.minPositionX,p=e.maxPositionY,f=e.minPositionY,v=n.limitToBounds,h=n.alignmentAnimation,g=n.zoomAnimation,P=n.panning,_=P.lockAxisY,b=P.lockAxisX,T=g.animationType,j=h.sizeX,D=h.sizeY,k=h.velocityAlignmentTime,B=k,N=Ee(i,u),L=Math.max(N,B),x=Q(i,j),Z=Q(i,D),F=x*t.offsetWidth/100,G=Z*t.offsetHeight/100,ei=d+F,J=l-F,I=p+G,m=f-G,y=i.transformState,A=new Date().getTime();Bi(i,T,L,function(S){var w=i.transformState,q=w.scale,M=w.positionX,V=w.positionY,ai=new Date().getTime()-A,z=ai/B,R=ji[h.animationType],oi=1-R(Math.min(1,z)),wi=1-S,bi=M+o*wi,Pi=V+s*wi,Ui=Yi(bi,y.positionX,M,b,v,l,d,J,ei,oi),Gi=Yi(Pi,y.positionY,V,_,v,f,p,m,I,oi);(M!==bi||V!==Pi)&&i.setTransformState(q,Ui,Gi)})}}function Xi(i,r){var e=i.transformState.scale;H(i),ii(i,e),window.TouchEvent!==void 0&&r instanceof TouchEvent?Ye(i,r):Te(i,r)}function Mi(i){var r=i.transformState.scale,e=i.setup,n=e.minScale,t=e.alignmentAnimation,a=t.disabled,o=t.sizeX,s=t.sizeY,u=t.animationTime,d=t.animationType,l=a||r<n||!o&&!s;if(!l){var p=Xe(i);p&&$(i,p,u,d)}}function _i(i,r,e){var n=i.startCoords,t=i.setup,a=t.alignmentAnimation,o=a.sizeX,s=a.sizeY;if(n){var u=_e(i,r,e),d=u.x,l=u.y,p=Q(i,o),f=Q(i,s);De(i,{x:d,y:l}),Ni(i,d,l,p,f)}}function Oe(i){if(i.isPanning){var r=i.setup.panning.velocityDisabled,e=i.velocity,n=i.wrapperComponent,t=i.contentComponent;i.isPanning=!1,i.animate=!1,i.animation=null;var a=n==null?void 0:n.getBoundingClientRect(),o=t==null?void 0:t.getBoundingClientRect(),s=(a==null?void 0:a.width)||0,u=(a==null?void 0:a.height)||0,d=(o==null?void 0:o.width)||0,l=(o==null?void 0:o.height)||0,p=s<d||u<l,f=!r&&e&&(e==null?void 0:e.total)>.1&&p;f?We(i):Mi(i)}}function Si(i,r,e,n){var t=i.setup,a=t.minScale,o=t.maxScale,s=t.limitToBounds,u=ti(O(r,2),a,o,0,!1),d=ii(i,u),l=ui(i,e,n,u,d,s),p=l.x,f=l.y;return{scale:u,positionX:p,positionY:f}}function Li(i,r,e){var n=i.transformState.scale,t=i.wrapperComponent,a=i.setup,o=a.minScale,s=a.limitToBounds,u=a.zoomAnimation,d=u.disabled,l=u.animationTime,p=u.animationType,f=d||n>=o;if((n>=1||s)&&Mi(i),!(f||!t||!i.mounted)){var v=r||t.offsetWidth/2,h=e||t.offsetHeight/2,g=Si(i,o,v,h);g&&$(i,g,l,p)}}var K=function(){return K=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},K.apply(this,arguments)};function Ai(i,r,e){if(e||arguments.length===2)for(var n=0,t=r.length,a;n<t;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return i.concat(a||Array.prototype.slice.call(r))}var si={previousScale:1,scale:1,positionX:0,positionY:0},ni={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},mi={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},Zi=function(i){var r,e,n,t;return{previousScale:(r=i.initialScale)!==null&&r!==void 0?r:si.scale,scale:(e=i.initialScale)!==null&&e!==void 0?e:si.scale,positionX:(n=i.initialPositionX)!==null&&n!==void 0?n:si.positionX,positionY:(t=i.initialPositionY)!==null&&t!==void 0?t:si.positionY}},zi=function(i){var r=K({},ni);return Object.keys(i).forEach(function(e){var n=typeof i[e]<"u",t=typeof ni[e]<"u";if(t&&n){var a=Object.prototype.toString.call(ni[e]),o=a==="[object Object]",s=a==="[object Array]";o?r[e]=K(K({},ni[e]),i[e]):s?r[e]=Ai(Ai([],ni[e],!0),i[e],!0):r[e]=i[e]}}),r},Hi=function(i,r,e){var n=i.transformState.scale,t=i.wrapperComponent,a=i.setup,o=a.maxScale,s=a.minScale,u=a.zoomAnimation,d=a.smooth,l=u.size;if(!t)throw new Error("Wrapper is not mounted");var p=d?n*Math.exp(r*e):n+r*e,f=ti(O(p,3),s,o,l,!1);return f};function Fi(i,r,e,n,t){var a=i.wrapperComponent,o=i.transformState,s=o.scale,u=o.positionX,d=o.positionY;if(!a)return console.error("No WrapperComponent found");var l=a.offsetWidth,p=a.offsetHeight,f=(l/2-u)/s,v=(p/2-d)/s,h=Hi(i,r,e),g=Si(i,h,f,v);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");$(i,g,n,t)}function Vi(i,r,e,n){var t=i.setup,a=i.wrapperComponent,o=t.limitToBounds,s=Zi(i.props),u=i.transformState,d=u.scale,l=u.positionX,p=u.positionY;if(a){var f=gi(i,s.scale),v=ri(s.positionX,s.positionY,f,o,0,0,a),h={scale:s.scale,positionX:v.x,positionY:v.y};d===s.scale&&l===s.positionX&&p===s.positionY||(n==null||n(),$(i,h,r,e))}}function je(i,r,e,n){var t=i.getBoundingClientRect(),a=r.getBoundingClientRect(),o=e.getBoundingClientRect(),s=a.x*n.scale,u=a.y*n.scale;return{x:(t.x-o.x+s)/n.scale,y:(t.y-o.y+u)/n.scale}}function ke(i,r,e){var n=i.wrapperComponent,t=i.contentComponent,a=i.transformState,o=i.setup,s=o.limitToBounds,u=o.minScale,d=o.maxScale;if(!n||!t)return a;var l=n.getBoundingClientRect(),p=r.getBoundingClientRect(),f=je(r,n,t,a),v=f.x,h=f.y,g=p.width/a.scale,P=p.height/a.scale,_=n.offsetWidth/g,b=n.offsetHeight/P,T=ti(e||Math.min(_,b),u,d,0,!1),j=(l.width-g*T)/2,D=(l.height-P*T)/2,k=(l.left-v)*T+j,B=(l.top-h)*T+D,N=gi(i,T),L=ri(k,B,N,s,0,0,n),x=L.x,Z=L.y;return{positionX:x,positionY:Z,scale:T}}var Be=function(i){return function(r,e,n){r===void 0&&(r=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Fi(i,1,r,e,n)}},Ne=function(i){return function(r,e,n){r===void 0&&(r=.5),e===void 0&&(e=300),n===void 0&&(n="easeOut"),Fi(i,-1,r,e,n)}},Me=function(i){return function(r,e,n,t,a){t===void 0&&(t=300),a===void 0&&(a="easeOut");var o=i.transformState,s=o.positionX,u=o.positionY,d=o.scale,l=i.wrapperComponent,p=i.contentComponent,f=i.setup.disabled;if(!(f||!l||!p)){var v={positionX:Number.isNaN(r)?s:r,positionY:Number.isNaN(e)?u:e,scale:Number.isNaN(n)?d:n};$(i,v,t,a)}}},Le=function(i){return function(r,e){r===void 0&&(r=200),e===void 0&&(e="easeOut"),Vi(i,r,e)}},Ze=function(i){return function(r,e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut");var t=i.transformState,a=i.wrapperComponent,o=i.contentComponent;if(a&&o){var s=Ri(r||t.scale,a,o);$(i,s,e,n)}}},He=function(i){return function(r,e,n,t){n===void 0&&(n=600),t===void 0&&(t="easeOut"),H(i);var a=i.wrapperComponent,o=typeof r=="string"?document.getElementById(r):r;if(a&&o&&a.contains(o)){var s=ke(i,o,e);$(i,s,n,t)}}},ci=function(i){return{instance:i,zoomIn:Be(i),zoomOut:Ne(i),setTransform:Me(i),resetTransform:Le(i),centerView:Ze(i),zoomToElement:He(i)}},Fe=function(i){return{instance:i,state:i.transformState}},C=function(i){var r={};return Object.assign(r,Fe(i)),Object.assign(r,ci(i)),r},pi=!1;function fi(){try{var i={get passive(){return pi=!0,!1}};return i}catch{return pi=!1,pi}}var li=".".concat(mi.wrapperClass),di=function(i,r){return r.some(function(e){return i.matches("".concat(li," ").concat(e,", ").concat(li," .").concat(e,", ").concat(li," ").concat(e," *, ").concat(li," .").concat(e," *"))})},hi=function(i){i&&clearTimeout(i)},Ve=function(i,r,e){return"translate(".concat(i,"px, ").concat(r,"px) scale(").concat(e,")")},Ri=function(i,r,e){var n=e.offsetWidth*i,t=e.offsetHeight*i,a=(r.offsetWidth-n)/2,o=(r.offsetHeight-t)/2;return{scale:i,positionX:a,positionY:o}};function Re(i){return function(r){i.forEach(function(e){typeof e=="function"?e(r):e!=null&&(e.current=r)})}}var Ke=function(i,r){var e=i.setup.wheel,n=e.disabled,t=e.wheelDisabled,a=e.touchPadDisabled,o=e.excluded,s=i.isInitialized,u=i.isPanning,d=r.target,l=s&&!u&&!n&&d;if(!l||t&&!r.ctrlKey||a&&r.ctrlKey)return!1;var p=di(d,o);return!p},Qe=function(i){return i?i.deltaY<0?1:-1:0};function $e(i,r){var e=Qe(i),n=oe(r,e);return n}function Ki(i,r,e){var n=r.getBoundingClientRect(),t=0,a=0;if("clientX"in i)t=(i.clientX-n.left)/e,a=(i.clientY-n.top)/e;else{var o=i.touches[0];t=(o.clientX-n.left)/e,a=(o.clientY-n.top)/e}return(Number.isNaN(t)||Number.isNaN(a))&&console.error("No mouse or touch offset found"),{x:t,y:a}}var qe=function(i,r,e,n,t){var a=i.transformState.scale,o=i.wrapperComponent,s=i.setup,u=s.maxScale,d=s.minScale,l=s.zoomAnimation,p=s.disablePadding,f=l.size,v=l.disabled;if(!o)throw new Error("Wrapper is not mounted");var h=a+r*e;if(t)return h;var g=n?!1:!v,P=ti(O(h,3),d,u,f,g&&!p);return P},Ue=function(i,r){var e=i.previousWheelEvent,n=i.transformState.scale,t=i.setup,a=t.maxScale,o=t.minScale;return e?n<a||n>o||Math.sign(e.deltaY)!==Math.sign(r.deltaY)||e.deltaY>0&&e.deltaY<r.deltaY||e.deltaY<0&&e.deltaY>r.deltaY||Math.sign(e.deltaY)!==Math.sign(r.deltaY):!1},Ge=function(i,r){var e=i.setup.pinch,n=e.disabled,t=e.excluded,a=i.isInitialized,o=r.target,s=a&&!n&&o;if(!s)return!1;var u=di(o,t);return!u},Je=function(i){var r=i.setup.pinch.disabled,e=i.isInitialized,n=i.pinchStartDistance,t=e&&!r&&n;return!!t},Ie=function(i,r,e){var n=e.getBoundingClientRect(),t=i.touches,a=O(t[0].clientX-n.left,5),o=O(t[0].clientY-n.top,5),s=O(t[1].clientX-n.left,5),u=O(t[1].clientY-n.top,5);return{x:(a+s)/2/r,y:(o+u)/2/r}},Qi=function(i){return Math.sqrt(Math.pow(i.touches[0].pageX-i.touches[1].pageX,2)+Math.pow(i.touches[0].pageY-i.touches[1].pageY,2))},en=function(i,r){var e=i.pinchStartScale,n=i.pinchStartDistance,t=i.setup,a=t.maxScale,o=t.minScale,s=t.zoomAnimation,u=t.disablePadding,d=s.size,l=s.disabled;if(!e||n===null||!r)throw new Error("Pinch touches distance was not provided");if(r<0)return i.transformState.scale;var p=r/n,f=p*e;return ti(O(f,2),o,a,d,!l&&!u)},nn=160,rn=100,tn=function(i,r){var e=i.props,n=e.onWheelStart,t=e.onZoomStart;i.wheelStopEventTimer||(H(i),X(C(i),r,n),X(C(i),r,t))},an=function(i,r){var e=i.props,n=e.onWheel,t=e.onZoom,a=i.contentComponent,o=i.setup,s=i.transformState,u=s.scale,d=o.limitToBounds,l=o.centerZoomedOut,p=o.zoomAnimation,f=o.wheel,v=o.disablePadding,h=o.smooth,g=p.size,P=p.disabled,_=f.step,b=f.smoothStep;if(!a)throw new Error("Component not mounted");r.preventDefault(),r.stopPropagation();var T=$e(r,null),j=h?b*Math.abs(r.deltaY):_,D=qe(i,T,j,!r.ctrlKey);if(u!==D){var k=ii(i,D),B=Ki(r,a,u),N=P||g===0||l||v,L=d&&N,x=ui(i,B.x,B.y,D,k,L),Z=x.x,F=x.y;i.previousWheelEvent=r,i.setTransformState(D,Z,F),X(C(i),r,n),X(C(i),r,t)}},on=function(i,r){var e=i.props,n=e.onWheelStop,t=e.onZoomStop;hi(i.wheelAnimationTimer),i.wheelAnimationTimer=setTimeout(function(){i.mounted&&(Li(i,r.x,r.y),i.wheelAnimationTimer=null)},rn);var a=Ue(i,r);a&&(hi(i.wheelStopEventTimer),i.wheelStopEventTimer=setTimeout(function(){i.mounted&&(i.wheelStopEventTimer=null,X(C(i),r,n),X(C(i),r,t))},nn))},$i=function(i){for(var r=0,e=0,n=0;n<2;n+=1)r+=i.touches[n].clientX,e+=i.touches[n].clientY;var t=r/2,a=e/2;return{x:t,y:a}},sn=function(i,r){var e=Qi(r);i.pinchStartDistance=e,i.lastDistance=e,i.pinchStartScale=i.transformState.scale,i.isPanning=!1;var n=$i(r);i.pinchLastCenterX=n.x,i.pinchLastCenterY=n.y,H(i)},ln=function(i,r){var e=i.contentComponent,n=i.pinchStartDistance,t=i.wrapperComponent,a=i.transformState.scale,o=i.setup,s=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,l=o.alignmentAnimation,p=d.disabled,f=d.size;if(!(n===null||!e)){var v=Ie(r,a,e);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var h=Qi(r),g=en(i,h),P=$i(r),_=P.x-(i.pinchLastCenterX||0),b=P.y-(i.pinchLastCenterY||0);if(!(g===a&&_===0&&b===0)){i.pinchLastCenterX=P.x,i.pinchLastCenterY=P.y;var T=ii(i,g),j=p||f===0||u,D=s&&j,k=ui(i,v.x,v.y,g,T,D),B=k.x,N=k.y;i.pinchMidpoint=v,i.lastDistance=h;var L=l.sizeX,x=l.sizeY,Z=Q(i,L),F=Q(i,x),G=B+_,ei=N+b,J=ri(G,ei,T,s,Z,F,t),I=J.x,m=J.y;i.setTransformState(g,I,m)}}}},un=function(i){var r=i.pinchMidpoint;i.velocity=null,i.lastDistance=null,i.pinchMidpoint=null,i.pinchStartScale=null,i.pinchStartDistance=null,Li(i,r==null?void 0:r.x,r==null?void 0:r.y)},qi=function(i,r){var e=i.props.onZoomStop,n=i.setup.doubleClick.animationTime;hi(i.doubleClickStopEventTimer),i.doubleClickStopEventTimer=setTimeout(function(){i.doubleClickStopEventTimer=null,X(C(i),r,e)},n)},dn=function(i,r){var e=i.props,n=e.onZoomStart,t=e.onZoom,a=i.setup.doubleClick,o=a.animationTime,s=a.animationType;X(C(i),r,n),Vi(i,o,s,function(){return X(C(i),r,t)}),qi(i,r)};function pn(i,r){return i==="toggle"?r===1?1:-1:i==="zoomOut"?-1:1}function fn(i,r){var e=i.setup,n=i.doubleClickStopEventTimer,t=i.transformState,a=i.contentComponent,o=t.scale,s=i.props,u=s.onZoomStart,d=s.onZoom,l=e.doubleClick,p=l.disabled,f=l.mode,v=l.step,h=l.animationTime,g=l.animationType;if(!p&&!n){if(f==="reset")return dn(i,r);if(!a)return console.error("No ContentComponent found");var P=pn(f,i.transformState.scale),_=Hi(i,P,v);if(o!==_){X(C(i),r,u);var b=Ki(r,a,o),T=Si(i,_,b.x,b.y);if(!T)return console.error("Error during zoom event. New transformation state was not calculated.");X(C(i),r,d),$(i,T,h,g),qi(i,r)}}}var vn=function(i,r){var e=i.isInitialized,n=i.setup,t=i.wrapperComponent,a=n.doubleClick,o=a.disabled,s=a.excluded,u=r.target,d=t==null?void 0:t.contains(u),l=e&&u&&d&&!o;if(!l)return!1;var p=di(u,s);return!p},mn=function(){function i(r){var e=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){e.initializeWindowEvents()},this.unmount=function(){e.cleanupWindowEvents()},this.update=function(n){e.props=n,ii(e,e.transformState.scale),e.setup=zi(n)},this.initializeWindowEvents=function(){var n,t,a=fi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;(t=e.wrapperComponent)===null||t===void 0||t.addEventListener("wheel",e.onWheelPanning,a),s==null||s.addEventListener("mousedown",e.onPanningStart,a),s==null||s.addEventListener("mousemove",e.onPanning,a),s==null||s.addEventListener("mouseup",e.onPanningStop,a),o==null||o.addEventListener("mouseleave",e.clearPanning,a),s==null||s.addEventListener("keyup",e.setKeyUnPressed,a),s==null||s.addEventListener("keydown",e.setKeyPressed,a)},this.cleanupWindowEvents=function(){var n,t,a=fi(),o=(n=e.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=o==null?void 0:o.defaultView;s==null||s.removeEventListener("mousedown",e.onPanningStart,a),s==null||s.removeEventListener("mousemove",e.onPanning,a),s==null||s.removeEventListener("mouseup",e.onPanningStop,a),o==null||o.removeEventListener("mouseleave",e.clearPanning,a),s==null||s.removeEventListener("keyup",e.setKeyUnPressed,a),s==null||s.removeEventListener("keydown",e.setKeyPressed,a),document.removeEventListener("mouseleave",e.clearPanning,a),H(e),(t=e.observer)===null||t===void 0||t.disconnect()},this.handleInitializeWrapperEvents=function(n){var t=fi();n.addEventListener("wheel",e.onWheelZoom,t),n.addEventListener("dblclick",e.onDoubleClick,t),n.addEventListener("touchstart",e.onTouchPanningStart,t),n.addEventListener("touchmove",e.onTouchPanning,t),n.addEventListener("touchend",e.onTouchPanningStop,t)},this.handleInitialize=function(n){var t=e.setup.centerOnInit;e.applyTransformation(),e.onInitCallbacks.forEach(function(a){return a(C(e))}),t&&(e.setCenter(),e.observer=new ResizeObserver(function(){var a,o=n.offsetWidth,s=n.offsetHeight;(o>0||s>0)&&(e.onInitCallbacks.forEach(function(u){return u(C(e))}),e.setCenter(),(a=e.observer)===null||a===void 0||a.disconnect())}),setTimeout(function(){var a;(a=e.observer)===null||a===void 0||a.disconnect()},5e3),e.observer.observe(n))},this.onWheelZoom=function(n){var t=e.setup.disabled;if(!t){var a=Ke(e,n);if(a){var o=e.isPressingKeys(e.setup.wheel.activationKeys);o&&(tn(e,n),an(e,n),on(e,n))}}},this.onWheelPanning=function(n){var t=e.setup,a=t.disabled,o=t.wheel,s=t.panning;if(!(!e.wrapperComponent||!e.contentComponent||a||!o.wheelDisabled||s.disabled||!s.wheelPanning||n.ctrlKey)){n.preventDefault(),n.stopPropagation();var u=e.transformState,d=u.positionX,l=u.positionY,p=d-n.deltaX,f=l-n.deltaY,v=s.lockAxisX?d:p,h=s.lockAxisY?l:f,g=e.setup.alignmentAnimation,P=g.sizeX,_=g.sizeY,b=Q(e,P),T=Q(e,_);v===d&&h===l||Ni(e,v,h,b,T)}},this.onPanningStart=function(n){var t=e.setup.disabled,a=e.props.onPanningStart;if(!t){var o=Ci(e,n);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.button===0&&!e.setup.panning.allowLeftClickPan||n.button===1&&!e.setup.panning.allowMiddleClickPan||n.button===2&&!e.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),H(e),Xi(e,n),X(C(e),n,a)))}}},this.onPanning=function(n){var t=e.setup.disabled,a=e.props.onPanning;if(!t){var o=Ti(e);if(o){var s=e.isPressingKeys(e.setup.panning.activationKeys);s&&(n.preventDefault(),n.stopPropagation(),_i(e,n.clientX,n.clientY),X(C(e),n,a))}}},this.onPanningStop=function(n){var t=e.props.onPanningStop;e.isPanning&&(Oe(e),X(C(e),n,t))},this.onPinchStart=function(n){var t=e.setup.disabled,a=e.props,o=a.onPinchingStart,s=a.onZoomStart;if(!t){var u=Ge(e,n);u&&(sn(e,n),H(e),X(C(e),n,o),X(C(e),n,s))}},this.onPinch=function(n){var t=e.setup.disabled,a=e.props,o=a.onPinching,s=a.onZoom;if(!t){var u=Je(e);u&&(n.preventDefault(),n.stopPropagation(),ln(e,n),X(C(e),n,o),X(C(e),n,s))}},this.onPinchStop=function(n){var t=e.props,a=t.onPinchingStop,o=t.onZoomStop;e.pinchStartScale&&(un(e),X(C(e),n,a),X(C(e),n,o))},this.onTouchPanningStart=function(n){var t=e.setup.disabled,a=e.props.onPanningStart;if(!t){var o=Ci(e,n);if(o){var s=e.lastTouch&&+new Date-e.lastTouch<200;if(!s){e.lastTouch=+new Date,H(e);var u=n.touches,d=u.length===1,l=u.length===2;d&&(H(e),Xi(e,n),X(C(e),n,a)),l&&e.onPinchStart(n)}}}},this.onTouchPanning=function(n){var t=e.setup.disabled,a=e.props.onPanning;if(e.isPanning&&n.touches.length===1){if(t)return;var o=Ti(e);if(!o)return;n.preventDefault(),n.stopPropagation();var s=n.touches[0];_i(e,s.clientX,s.clientY),X(C(e),n,a)}else n.touches.length>1&&e.onPinch(n)},this.onTouchPanningStop=function(n){e.onPanningStop(n),e.onPinchStop(n)},this.onDoubleClick=function(n){var t=e.setup.disabled;if(!t){var a=vn(e,n);a&&fn(e,n)}},this.clearPanning=function(n){e.isPanning&&e.onPanningStop(n)},this.setKeyPressed=function(n){e.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){e.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(t){return e.pressedKeys[t]}):!0},this.setTransformState=function(n,t,a){var o=e.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(t)&&!Number.isNaN(a)){n!==e.transformState.scale&&(e.transformState.previousScale=e.transformState.scale,e.transformState.scale=n),e.transformState.positionX=t,e.transformState.positionY=a,e.applyTransformation();var s=C(e);e.onChangeCallbacks.forEach(function(u){return u(s)}),X(s,{scale:n,positionX:t,positionY:a},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(e.wrapperComponent&&e.contentComponent){var n=Ri(e.transformState.scale,e.wrapperComponent,e.contentComponent);e.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,t,a){return e.props.customTransform?e.props.customTransform(n,t,a):Ve(n,t,a)},this.applyTransformation=function(){if(!(!e.mounted||!e.contentComponent)){var n=e.transformState,t=n.scale,a=n.positionX,o=n.positionY,s=e.handleTransformStyles(a,o,t);e.contentComponent.style.transform=s}},this.getContext=function(){return C(e)},this.onChange=function(n){return e.onChangeCallbacks.has(n)||e.onChangeCallbacks.add(n),function(){e.onChangeCallbacks.delete(n)}},this.onInit=function(n){return e.onInitCallbacks.has(n)||e.onInitCallbacks.add(n),function(){e.onInitCallbacks.delete(n)}},this.init=function(n,t){e.cleanupWindowEvents(),e.wrapperComponent=n,e.contentComponent=t,ii(e,e.transformState.scale),e.handleInitializeWrapperEvents(n),e.handleInitialize(t),e.initializeWindowEvents(),e.isInitialized=!0;var a=C(e);X(a,void 0,e.props.onInit)},this.props=r,this.setup=zi(this.props),this.transformState=Zi(this.props)}return i}(),yi=W.createContext(null),cn=function(i,r){return typeof i=="function"?i(r):i},hn=W.forwardRef(function(i,r){var e=Y.useRef(new mn(i)).current,n=cn(i.children,ci(e));return Y.useImperativeHandle(r,function(){return ci(e)},[e]),Y.useEffect(function(){e.update(i)},[e,i]),W.createElement(yi.Provider,{value:e},n)});W.forwardRef(function(i,r){var e=Y.useRef(null),n=Y.useContext(yi);return Y.useEffect(function(){return n.onChange(function(t){if(e.current){var a=0,o=0;e.current.style.transform=n.handleTransformStyles(a,o,1/t.instance.transformState.scale)}})},[n]),W.createElement("div",K({},i,{ref:Re([e,r])}))});function gn(i,r){r===void 0&&(r={});var e=r.insertAt;if(!(!i||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e==="top"&&n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),t.styleSheet?t.styleSheet.cssText=i:t.appendChild(document.createTextNode(i))}}var Sn=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Ei={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};gn(Sn);var yn=function(i){var r=i.children,e=i.wrapperClass,n=e===void 0?"":e,t=i.contentClass,a=t===void 0?"":t,o=i.wrapperStyle,s=i.contentStyle,u=i.wrapperProps,d=u===void 0?{}:u,l=i.contentProps,p=l===void 0?{}:l,f=Y.useContext(yi),v=f.init,h=f.cleanupWindowEvents,g=Y.useRef(null),P=Y.useRef(null);return Y.useEffect(function(){var _=g.current,b=P.current;return _!==null&&b!==null&&v&&(v==null||v(_,b)),function(){h==null||h()}},[]),W.createElement("div",K({},d,{ref:g,className:"".concat(mi.wrapperClass," ").concat(Ei.wrapper," ").concat(n),style:o}),W.createElement("div",K({},p,{ref:P,className:"".concat(mi.contentClass," ").concat(Ei.content," ").concat(a),style:s}),r))};const wn=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),bn=E("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"205px",h:"70px",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",gap:"5px",justify:"center",color:"#828282"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),Pn=E("div",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",mt:"10px",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%"}),Cn=E("div",{d:"grid",gap:"10px",gridTemplateAreas:`
    "filters destination"
    "team team"
  `,px:"20px",pb:"10px",w:"100%","@sm":{}}),Tn=E("div",{d:"flex",gridArea:"filters",gap:"10px"}),Yn=E("div",{d:"flex",align:"center",justify:"flex-end",gridArea:"destination",gap:"2px"}),Xn=E("div",{d:"flex",bg:"rgba(255, 225, 225, 0.05)",padding:"2px 3px",img:{w:"40px"},variants:{disabled:{true:{opacity:.5}}}});E("div",{d:"block",gridArea:"destination",w:"max-content",ml:"auto",p:{textAlign:"right",fs:"24px",ff:"$heading",color:"#fff",textTransform:"capitalize","&:not(:first-child)":{fs:"14px"}},"@sm":{p:{fs:"14px","&:not(:first-child)":{fs:"10px",color:"#8A8A8A"}}}});E("div",{d:"flex",gridArea:"team",w:"max-content",ml:"auto",">div":{ml:"5px","&:nth-child(3)":{ml:"25px"}},"@sm":{}});E("div",{d:"flex",align:"center",gap:"5px",direction:"column",img:{w:"35px",h:"35px"},span:{fs:"12px",ff:"$heading",color:"#A6A6A6"},"@sm":{}});const _n=E("div",{d:"flex",w:"100%",px:"10px",".react-transform-wrapper":{maxH:"calc(100vh - 250px)"},"@sm":{".react-transform-wrapper":{maxH:"calc(100vh - 190px)"}},"@media (max-width: 768px) and (max-height: 500px)":{".react-transform-wrapper":{maxH:"calc(100vh)"}}}),An=E("div",{d:"flex",w:"1420px",h:"710px",position:"relative",img:{w:"1420px",h:"710px"}}),zn=E("button",{d:"flex",align:"center",justify:"center",position:"absolute",border:"1px solid rgba(0,0,0,0.6)",zIndex:1,w:"35.5px",h:"35.5px",svg:{w:"20px",h:"20px"},variants:{isSelected:{true:{bg:"rgba(0, 186, 255, 0.58)"}},type:{miningEvent:{zIndex:2},portal:{zIndex:2}}}});E("div",{d:"flex",align:"center",flexWrap:"wrap",gap:"20px",mt:"10px",pl:"20px",w:"100%"});E("div",{d:"flex",align:"center",justify:"center",gap:"5px",color:"#fff",ff:"$heading",fs:"10px",svg:{w:"17px",h:"17px"},"&:nth-child(1)":{fill:"#80FF00"},"&:nth-child(2)":{fill:"#EB094D"},"&:nth-child(3)":{fill:"#FFB800"}});const En=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",textTransform:"capitalize",padding:"2px 5px",bg:"#333333",color:"#fff",ff:"$heading",fs:"10px",br:"5px"}}),xn=E("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",zIndex:999,span:{position:"absolute",top:"-8px",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fw:900,ff:"$heading",fs:"16px",br:"5px","-webkit-text-stroke":"1px #000"}}),Dn=i=>{const r=new Date(new Date().toUTCString().substring(0,25)),e=+i-+r;let n={days:0,hours:0,minutes:0,seconds:0};return e>0&&(n={days:Math.floor(e/(1e3*60*60)/24),hours:Math.floor(e/(1e3*60*60)%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}),{...n,difference:e}},Wn=i=>{if(i&&((i==null?void 0:i.seconds)>0||(i==null?void 0:i.minutes)>0||(i==null?void 0:i.hours)>0)){const r=i.hours>0?`${i.hours>9?`${i.hours}:`:`0${i.hours}:`}`:"",e=i.minutes>0?`${i.minutes>9?i.minutes:`0${i.minutes}`}`:"00",n=i.seconds>9?i.seconds:`0${i.seconds}`;return`${r}${e}:${n}`}return"MINE"};async function On(i,r,e){const{executeTransaction:n}=re(),t=jn(i,r,e);return!!await n(t)}function jn(i,r,e){return{actions:[{account:Ji.playersAle,name:"travel",authorization:[{actor:i.name,permission:i.authorization.permission}],data:{wallet:i.name,x:r,y:e}}]}}const kn=Ii((i,r)=>({areaSelected:null,setAreaSelected:e=>i({areaSelected:e})})),Bn=i=>ae({queryKey:[ie.playerDataState,i],queryFn:()=>Nn(i),staleTime:1e3*60*20,enabled:!!Oi.getState().user});async function Nn(i){try{const r=await ee(i);return r||null}catch(r){return console.log(r),null}}const xi=40,Mn=20,Ln=[{label:"Magor",value:"magor"},{label:"Neri",value:"neri"},{label:"Eyeke",value:"eyeke"},{label:"Naron",value:"naron"},{label:"Veles",value:"veles"},{label:"Kavian",value:"kavian"}],Zn=[{name:"Tavern",img:"tavern"},{name:"Training Center",img:"training-center"},{name:"Mine",img:"mine"},{name:"Ascension Hall",img:"ascension-hall"}],Di=W.lazy(()=>U(()=>import("./index-43205769.js"),["assets/index-43205769.js","assets/index-4e18439f.js","assets/index-55fec1ff.css"])),Wi=W.lazy(()=>U(()=>import("./index-b3e7725a.js"),["assets/index-b3e7725a.js","assets/index-4e18439f.js","assets/index-55fec1ff.css","assets/iconBase-70641c02.js"])),Hn=W.lazy(()=>U(()=>import("./box-gloves-e930aa98.js"),["assets/box-gloves-e930aa98.js","assets/index-4e18439f.js","assets/index-55fec1ff.css"])),Fn=W.lazy(()=>U(()=>import("./travel-arrow-27ab0b10.js"),["assets/travel-arrow-27ab0b10.js","assets/index-4e18439f.js","assets/index-55fec1ff.css"])),Vn=W.lazy(()=>U(()=>import("./portal-dc346f46.js"),["assets/portal-dc346f46.js","assets/index-4e18439f.js","assets/index-55fec1ff.css"])),Rn=W.lazy(()=>U(()=>import("./index-a78e580c.js"),["assets/index-a78e580c.js","assets/index-4e18439f.js","assets/index-55fec1ff.css"])),Kn=W.lazy(()=>U(()=>import("./index-0dd17629.js"),["assets/index-0dd17629.js","assets/index-4e18439f.js","assets/index-55fec1ff.css","assets/inventory-query-9af050d4.js","assets/useQuery-903c3c38.js","assets/toast-options-d23a87f6.js","assets/use-transaction-7a47cee6.js","assets/sleep-da79c358.js"])),Qn=()=>{var I;const{areaSelected:i,setAreaSelected:r}=kn(),{user:e,updatePlayerData:n,updateLandsData:t}=Oi(),a=Y.useRef(null),[o,s]=Y.useState([]),[u,d]=Y.useState([]),[l,p]=Y.useState(null),[f,v]=Y.useState(8),[h,g]=Y.useState(0),[P,_]=Y.useState(!1),[b,T]=Y.useState({label:e!=null&&e.planet?e.planet.charAt(0).toUpperCase()+e.planet.slice(1):"",value:(e==null?void 0:e.planet)||""}),[j,D]=Y.useState([{label:"Mixed",value:"mixed"}]),[k,B]=Y.useState([{label:"Mixed",value:"mixed"}]),[N,L]=Y.useState([]),{data:x}=Bn((b==null?void 0:b.value)||""),Z=Y.useCallback(()=>{var q,M,V,ai;if(!e)return null;const m=((q=x==null?void 0:x.filter(z=>!!z.special_effect))==null?void 0:q.map(z=>({x:z.x-1,y:z.y-1,type:"portal",text:z.special_effect.slice(2,1/0)})))||[],y=((V=(M=e.active_taverns)==null?void 0:M.filter(z=>z.planet===(b==null?void 0:b.value)))==null?void 0:V.map(z=>({x:z.x-1,y:z.y-1,type:"tavern"})))||[],A=(ai=(x==null?void 0:x.filter(z=>{var R;return!!((R=z.buildings)!=null&&R.length)}))||[])==null?void 0:ai.flatMap(z=>z.buildings);L(A);const S=[...m,...y],w=S.reduce((z,R)=>(z.some(({value:oi})=>oi===R.type)||z.push({label:R.type.charAt(0).toUpperCase()+R.type.slice(1),value:R.type}),z),[]);D([...w,{label:"Mixed",value:"mixed"}]),d(S)},[e,x]);Y.useEffect(()=>{const y=1420/xi,A=[];for(let S=0;S<xi;S++){A[S]=[];for(let w=0;w<Mn;w++)A[S][w]={x:S*y,y:w*y}}s(A),Z()},[Z]);function F(m,y){switch(y){case"arena":return c.jsxs("svg",{fill:"rgba(235, 9, 77, 0.67)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"youControl":return c.jsxs("svg",{fill:"rgba(173, 255, 0, 0.65)",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"50",cy:"50",r:"50"}),c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m})]});case"miningEvent":return c.jsxs(xn,{children:[c.jsx("span",{children:m}),c.jsxs("svg",{fill:"#FFB800",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 490 490",children:[c.jsx("text",{x:"50",y:"75",fontSize:"5em",textAnchor:"middle",style:{fill:"white",stroke:"#000",strokeWidth:5,fontWeight:"bold",fontFamily:"Orbitron, sans-serif"},children:m}),c.jsx("polygon",{points:"245,456.701 490,33.299 0,33.299 "})]})]});case"portal":return c.jsxs(En,{children:[c.jsx("span",{children:m}),c.jsx(Vn,{})]});case"flag":return c.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:999,width:"14px",height:"14px"},children:[c.jsx("circle",{cx:"11",cy:"11",r:"11",fill:"#DB4447"}),c.jsx("circle",{cx:"11",cy:"11",r:"9",fill:"#141423"}),c.jsx("circle",{cx:"11",cy:"11",r:"7",fill:"#DB4447"})]});case"tavern":return c.jsx("div",{children:c.jsxs("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{width:"17.6777",height:"17.6777",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 0 12.5)",fill:"#FFB800"}),c.jsx("rect",{width:"12.8565",height:"12.8565",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 3.37476 12.5)",fill:"#141423"}),c.jsx("rect",{width:"8.03534",height:"8.03534",transform:"matrix(0.707104 -0.70711 0.707104 0.70711 6.83008 12.5)",fill:"#FFB800"})]})});default:return null}}function G(m){if(!e)return;if((l==null?void 0:l.x)===m.clientX&&(l==null?void 0:l.y)===m.clientY){p(null);return}if(p({x:m.clientX,y:m.clientY,type:m.type}),e.mapX===m.clientX&&e.mapY===m.clientY){g(0);return}const y=Math.sqrt(Math.pow(e.mapX-m.clientX,2)+Math.pow(e.mapY-m.clientY,2)),A=Math.ceil(y);g(A)}function ei(){if(!l)return;const m={x:l.x+1,y:l.y+1,type:(l==null?void 0:l.type)||""};if(m.type==="tavern"){const y=(e==null?void 0:e.active_taverns.find(({x:A,y:S})=>A===m.x&&S===m.y))||{};r({...m,...y})}}async function J(){try{if(_(!0),!e||!l||!await On(e,(l==null?void 0:l.x)+1||0,(l==null?void 0:l.y)+1||0))return;await te(2e3),p(null),g(0);const y=await n();await t(),y!=null&&y.planet&&T({label:y.planet.charAt(0).toUpperCase()+y.planet.slice(1),value:y.planet}),ne.success("Travel successful")}catch(m){console.error(m)}finally{_(!1)}}return Y.useEffect(()=>{const m=setInterval(()=>{var A;const y=(A=u==null?void 0:u.filter(S=>(S==null?void 0:S.formattedTimeLeft)!=="MINE"))==null?void 0:A.map(S=>{if(S.type==="miningEvent"&&(S==null?void 0:S.formattedTimeLeft)!=="MINE"&&(S!=null&&S.expirationDate)){const w=Dn(S==null?void 0:S.expirationDate);return{...S,formattedTimeLeft:Wn(w),mineTime:w}}return S});d(y)},1e3);return()=>clearInterval(m)},[u]),(i==null?void 0:i.type)==="arena"?c.jsx(Rn,{}):(i==null?void 0:i.type)==="tavern"?c.jsx(Kn,{}):c.jsxs(wn,{children:[c.jsxs(bn,{children:[((l==null?void 0:l.type)==="arena"||(l==null?void 0:l.type)==="tavern")&&u.some(({x:m,y})=>(e==null?void 0:e.mapX)===m&&(e==null?void 0:e.mapY)===y)&&c.jsx(Di,{disabled:!!u.find(({x:m,y})=>(e==null?void 0:e.x)===m&&(e==null?void 0:e.y)===y),color:"black",onClick:ei,icon:Hn,children:(l==null?void 0:l.type)==="tavern"?"Enter Tavern":"Enter Arena"}),c.jsxs(Di,{isLoading:P,disabled:b.value!==(e==null?void 0:e.planet)||!l||!h||h>(((I=e==null?void 0:e.activestats)==null?void 0:I.action_points)||0)||P,color:"black",onClick:J,icon:Fn,children:["Travel",b.value===(e==null?void 0:e.planet)&&c.jsxs("span",{children:["- ",h,c.jsx("img",{loading:"lazy",src:"/assets/icons/potion.png",alt:""})]})]})]}),c.jsxs(Pn,{ref:a,children:[c.jsxs(Cn,{children:[c.jsxs(Tn,{children:[c.jsx(Wi,{options:Ln,selected:b,onSelected:m=>T(m)}),c.jsx(Wi,{title:"Select a filter",onMultipleSelected:m=>B(m),isMultipleItems:!0,multiplesSelected:k,options:j})]}),c.jsx(Yn,{children:Zn.map((m,y)=>c.jsx(Xn,{disabled:!(N!=null&&N.some(A=>A.building_name===m.img)),children:c.jsx("img",{loading:"lazy",src:`/assets/buildings/${m.img}.png`,alt:m.name,title:m.name})},y))})]}),(e==null?void 0:e.playerLand)&&c.jsx(_n,{children:c.jsx(hn,{disablePadding:!0,initialScale:1,maxScale:2,doubleClick:{step:f},onPanningStop:m=>{m.state.scale!==1?v(-8):v(8)},children:c.jsx(yn,{children:c.jsxs(An,{children:[c.jsx("img",{loading:"lazy",src:`/assets/maps/${b==null?void 0:b.value}.jpg`,alt:""}),o.map((m,y)=>m.map((A,S)=>{var q;const w=(q=u==null?void 0:u.filter(M=>k.some(V=>V.value!=="mixed"?V.value===M.type:!0)))==null?void 0:q.find(M=>M.x===y&&M.y===S);return c.jsxs(zn,{onClick:()=>G({clientX:y,clientY:S,type:(w==null?void 0:w.type)||""}),isSelected:(l==null?void 0:l.x)===y&&(l==null?void 0:l.y)===S,type:(w==null?void 0:w.type)||"empty",style:{top:A.y,left:A.x},children:[!!w&&F((w==null?void 0:w.formattedTimeLeft)||(w==null?void 0:w.number)||(w==null?void 0:w.text)||"",(w==null?void 0:w.type)||""),e.planet===b.value&&e.mapX===y&&e.mapY===S&&F("","flag")]},A.x+A.y)}))]})})})})]})]})},Jn=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));export{Jn as i,kn as u};

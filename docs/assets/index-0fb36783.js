import{s as t,g as C,S as p,e as _,u as g,r as x,j as e}from"./index-2065452d.js";import k from"./index-56942775.js";import{s as S}from"./shimmer-7c2f57fd.js";import{I as T}from"./styles-72a7c1bf.js";import{u as $}from"./useQuery-36fe4bfc.js";import{u as D}from"./index-be3ac59b.js";import"./index-dd6c8c3e.js";import"./use-transaction-6f0f3719.js";import"./toast-options-71eb7020.js";import"./sleep-da79c358.js";const B=t("div",{d:"flex",direction:"column",w:"100%",padding:"24px 30px",minH:"calc(100vh - 175px)",maxH:"calc(100vh - 175px)",overflowY:"auto","@md":{h:"unset"}}),f=t("div",{d:"flex",direction:"column",gap:"10px",w:"100%",input:{bg:"#fff",color:"#000",fs:"16px",ff:"$heading",padding:"10px",borderRadius:"5px"}}),u=t("span",{d:"flex",direction:"column",w:"100%",color:"#fff",fs:"16px",ff:"$heading"}),m=t("span",{d:"flex",direction:"column",w:"100%",padding:"10px 10px 20px 10px",borderRadius:"3px",bg:"#201D2C",color:"#fff",fs:"16px",ff:"$heading"}),E=t("span",{d:"flex",direction:"column",mb:"20px",w:"100%",color:"#fff",fs:"10px",ff:"$heading"}),L=t("div",{d:"flex",direction:"column",bg:"#1D1B20",padding:"20px 0 0 0 ",mt:"20px",w:"100%"}),I=t("div",{d:"flex",align:"flex-start",alignContent:"flex-start",justify:"flex-start",gap:"20px",ml:"20px"}),l=t("button",{d:"flex",align:"center",justify:"center",pb:"10px",color:"#fff",fs:"12px",variants:{isSelected:{true:{color:"#36B9EA",borderBottom:"2px solid #36B9EA"}}}}),q=t("div",{d:"flex",direction:"column",gap:"5px",padding:"10px 20px",border:"1px solid #4A4459",overflowY:"auto",h:"470px",w:"100%"}),R=t("div",{d:"flex",align:"center",gap:"10px",w:"100%",br:"10px",padding:"5px",bg:"#191928","@sm":{justifyContent:"center",alignItems:"center",flexDirection:"column"}}),U=t("div",{d:"flex",gap:"10px",border:"1px solid transparent",img:{w:57,h:57},variants:{isSelected:{true:{border:"1px solid #00FF00",boxShadow:"0 0 10px rgba(0, 255, 0, 0.5)"}},isDisabled:{true:{filter:"grayscale(100%)",cursor:"not-allowed",pointerEvents:"none"}}}}),F=t("span",{d:"flex",fs:"16px",fw:"bold",ff:"$heading",color:"#C9BA76"}),Y=t("span",{d:"flex",fs:"16px",ff:"$heading",color:"#fff"}),z=t(k,{display:"inline-flex",align:"center",justify:"center",gap:"5px",zIndex:"3",w:"100%",maxW:"150px",h:"40px",ml:"auto",br:"2px !important",bg:"#6750A4 !important",border:"1px solid #36B9EA",fw:"bold",ff:"$heading",fs:"14px",color:"white",img:{w:"20px",h:"20px",objectFit:"contain"},variants:{isCooldown:{true:{bg:"#1D1B20 !important",border:"1px solid #767777",pointerEvents:"none"}}}}),G=t("div",{w:"96px",h:"96px",background:"linear-gradient( -90deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.25) ,rgba(255, 255, 255, 0.15))",br:"10px",backgroundSize:"400% 400%",animation:`${S} 1.2s ease-in-out infinite`,"@sm":{width:"70px",height:"100px"}}),Q=async()=>await C({options:{code:p.playersAle,index_position:1,limit:"1000",scope:p.playersAle,table:"avatars"}}),H=()=>$({queryKey:[_.AvatarState],queryFn:()=>K(),staleTime:1e3*60*20,enabled:!!g.getState().user});async function K(){try{const a=await Q();return a||null}catch(a){return console.log(a),null}}const ne=()=>{const a=g(({user:n})=>n),{data:o,isLoading:h}=H(),{setSelectedAvatar:b,gameTag:v,setGameTag:y,handleUnlockAvatar:j}=D(),[i,s]=x.useState("locked"),[d,c]=x.useState(!1);async function w(n){try{c(!0),await j([n])}catch(r){console.error(r)}finally{c(!1)}}return e.jsxs(B,{children:[e.jsxs(f,{children:[e.jsx(u,{children:"Gamertag"}),e.jsx(m,{children:"Set your display name — this is how other players will recognize you across Alien Legends."}),e.jsx(T,{value:v,onChange:n=>y(n.target.value)}),e.jsx(E,{children:"max 12 characters"})]}),e.jsxs(f,{children:[e.jsx(u,{children:"Avatar"}),e.jsx(m,{children:"Choose your avatar — it will represent you on leaderboards, your buildings, in the arena, and beyond. Unlock new avatars by completing milestones in Alien Legends."})]}),e.jsxs(L,{children:[e.jsxs(I,{children:[e.jsx(l,{isSelected:i==="locked",onClick:()=>s("locked"),children:"Locked"}),e.jsx(l,{isSelected:i==="unlocked",onClick:()=>s("unlocked"),children:"Unlocked"}),e.jsx(l,{isSelected:i==="legacy",onClick:()=>s("legacy"),children:"Legacy"})]}),e.jsx(q,{children:h?new Array(3).fill(0).map((n,r)=>e.jsx(G,{},r)):o==null?void 0:o.map(n=>{const r=a.permstats.find(({first:A})=>A===n.permstats_requirement)??{first:"",second:0};return e.jsxs(R,{children:[e.jsx(U,{onClick:()=>b(n.avatar_id),children:e.jsx("img",{src:`/assets/avatar/avatar_${n.avatar_id}.jpeg`,alt:n.avatar_name,title:n.avatar_name})}),e.jsxs("div",{children:[e.jsx(F,{children:n.avatar_name}),e.jsx(Y,{children:n.avatar_description})]}),e.jsx(z,{isLoading:d,disabled:d,onClick:()=>w(n.avatar_id),isCooldown:(r==null?void 0:r.second)<n.permstats_requirement_min_value,children:(r==null?void 0:r.second)>=n.permstats_requirement_min_value?"Unlock":`${r==null?void 0:r.second}/${n.permstats_requirement_min_value}`})]},n.avatar_id)})})]})]})};export{ne as default};

import{s as _,S as w,R as c,_ as p,u as y,r as d,j as i,Q as I}from"./index-c493562e.js";import{u as P}from"./use-transaction-0c6b2968.js";import{s as C}from"./sleep-da79c358.js";import{u as O}from"./index-ce65166d.js";import"./toast-options-33778087.js";const S=_("div",{d:"flex",align:"center",justify:"center",direction:"column",position:"relative",w:"100%"}),V=_("div",{d:"flex",align:"flex-end",justify:"flex-end",gap:"10px",position:"relative",w:"100%",button:{maxW:"205px",h:"70px",textTransform:"capitalize",svg:{fill:"#00BAFF"},span:{d:"flex",align:"center",gap:"5px",justify:"center",color:"#828282"}},"@sm":{button:{justify:"center",gap:"2px",padding:"0",maxW:"33%",h:"45px",fs:"12px",span:{gap:"0px"},svg:{display:"none"}}}}),M=_("div",{d:"flex",align:"flex-end",justify:"flex-end",direction:"column",mt:"10px",padding:"15px 0px",bg:"#141423",br:"15px",w:"100%"});async function k(e,a,o){const{executeTransaction:l}=P(),t=B(e,a,o);return!!await l(t)}function B(e,a,o){return{actions:[{account:w.playersAle,name:"travel",authorization:[{actor:e.name,permission:e.authorization.permission}],data:{wallet:e.name,x:a,y:o}}]}}const F=(e,a)=>{const o=String(e),l=String(a);let t="";for(const n of o)n=="0"?t=t+"a":n=="1"?t=t+"b":n=="2"?t=t+"c":n=="3"?t=t+"d":n=="4"?t=t+"e":n=="5"?t=t+"f":n=="6"?t=t+"g":n=="7"?t=t+"h":n=="8"?t=t+"i":n=="9"&&(t=t+"j");t=t+"x";for(const n of l)n=="0"?t=t+"a":n=="1"?t=t+"b":n=="2"?t=t+"c":n=="3"?t=t+"d":n=="4"?t=t+"e":n=="5"?t=t+"f":n=="6"?t=t+"g":n=="7"?t=t+"h":n=="8"?t=t+"i":n=="9"&&(t=t+"j");return t},g=c.lazy(()=>p(()=>import("./index-f7dbd0b6.js"),["assets/index-f7dbd0b6.js","assets/index-c493562e.js","assets/index-55fec1ff.css"])),W=c.lazy(()=>p(()=>import("./index-a6621574.js"),["assets/index-a6621574.js","assets/index-c493562e.js","assets/index-55fec1ff.css","assets/index-ce65166d.js","assets/constants-1566b5f3.js"])),$=c.lazy(()=>p(()=>import("./index-cc36a7dd.js"),["assets/index-cc36a7dd.js","assets/index-c493562e.js","assets/index-55fec1ff.css","assets/useQuery-065da00d.js","assets/constants-1566b5f3.js","assets/index-ce65166d.js"])),H=c.lazy(()=>p(()=>import("./box-gloves-57e1acc2.js"),["assets/box-gloves-57e1acc2.js","assets/index-c493562e.js","assets/index-55fec1ff.css"])),G=c.lazy(()=>p(()=>import("./travel-arrow-f7bd6117.js"),["assets/travel-arrow-f7bd6117.js","assets/index-c493562e.js","assets/index-55fec1ff.css"])),N=c.lazy(()=>p(()=>import("./index-fcf3ca7a.js"),["assets/index-fcf3ca7a.js","assets/index-c493562e.js","assets/index-55fec1ff.css"])),Q=c.lazy(()=>p(()=>import("./index-2881c81c.js"),["assets/index-2881c81c.js","assets/index-c493562e.js","assets/index-55fec1ff.css","assets/index-ce65166d.js","assets/inventory-query-62541ee1.js","assets/useQuery-065da00d.js","assets/atomic-api-4c756726.js","assets/toast-options-33778087.js","assets/use-transaction-0c6b2968.js","assets/sleep-da79c358.js","assets/use-media-a73b9615.js","assets/fighters-query-a410cf89.js"])),X=c.lazy(()=>p(()=>import("./index-3cc08999.js").then(e=>e.i),["assets/index-3cc08999.js","assets/index-c493562e.js","assets/index-55fec1ff.css","assets/index-5fd5a9ac.js","assets/index-f44f737f.js","assets/use-media-a73b9615.js","assets/index-ce65166d.js","assets/sleep-da79c358.js","assets/use-transaction-0c6b2968.js","assets/toast-options-33778087.js"])),U=()=>{var m;const e=y(s=>s.user),{areaSelected:a,allAreas:o,moveCost:l,selectedMap:t,selectedCoordinates:n,setSelectedCoordinates:T,setAreaSelected:x,setMoveCost:j,setSelectedMap:h}=O(),{updatePlayerData:E,updateLandsData:A}=y(),R=d.useRef(null),[u,v]=d.useState(!1);function L(){if(!e)return;const s={x:e.x,y:e.y,type:(f==null?void 0:f.type)||"",landId:F(e.x,e.y)};if(s.type==="tavern"){const r=(e==null?void 0:e.active_taverns.find(({x:b,y:D})=>b===s.x&&D===s.y))||((e==null?void 0:e.last_tavern.x)===s.x&&(e==null?void 0:e.last_tavern.y)===s.y?e==null?void 0:e.last_tavern:{});x({...s,...r});return}x({...s,...a})}async function z(){try{if(v(!0),!e||!n||!await k(e,(n==null?void 0:n.x)+1||0,(n==null?void 0:n.y)+1||0))return;await C(2e3),T(null),j(0);const r=await E();await A(),r!=null&&r.planet&&h({label:r.planet.charAt(0).toUpperCase()+r.planet.slice(1),value:r.planet}),I.success("Travel successful")}catch(s){console.error(s)}finally{v(!1)}}const f=d.useMemo(()=>o[`${e.mapX},${e.mapY}`],[o,e]);return(a==null?void 0:a.type)==="arena"?i.jsx(N,{}):(a==null?void 0:a.type)==="tavern"?i.jsx(Q,{}):(a==null?void 0:a.type)==="dungeon"?i.jsx(X,{}):i.jsxs(S,{children:[i.jsxs(V,{children:[!!f&&i.jsx(g,{color:"black",onClick:L,icon:H,children:`Enter ${f==null?void 0:f.type}`}),i.jsxs(g,{isLoading:u,disabled:t.value!==(e==null?void 0:e.planet)||!n||!l||l>(((m=e==null?void 0:e.activestats)==null?void 0:m.action_points)||0)||u,color:"black",onClick:z,icon:G,children:["Travel",t.value===(e==null?void 0:e.planet)&&i.jsxs("span",{children:["- ",l,i.jsx("img",{loading:"lazy",src:"/assets/icons/potion.png",alt:""})]})]})]}),i.jsxs(M,{ref:R,children:[i.jsx(W,{}),i.jsx($,{})]})]})};export{U as default};
